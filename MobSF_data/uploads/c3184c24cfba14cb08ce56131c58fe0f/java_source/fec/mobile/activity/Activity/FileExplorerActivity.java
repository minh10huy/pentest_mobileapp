/*
 * Decompiled with CFR 0_132.
 * 
 * Could not load the following classes:
 *  android.content.Context
 *  android.content.Intent
 *  android.os.Bundle
 *  android.os.Environment
 *  android.view.MenuItem
 *  android.view.View
 *  android.view.View$OnClickListener
 *  android.widget.AdapterView
 *  android.widget.AdapterView$OnItemClickListener
 *  android.widget.ImageButton
 *  android.widget.ListAdapter
 *  android.widget.ListView
 *  fec.mobile.activity.Activity.FileExplorerActivity$getDirFromRoot
 *  fec.mobile.activity.Activity.FileExplorerActivity$onCreate
 */
package fec.mobile.activity.Activity;

import android.content.Context;
import android.content.Intent;
import android.os.Bundle;
import android.os.Environment;
import android.support.v4.app.o;
import android.support.v7.app.a;
import android.support.v7.app.c;
import android.support.v7.widget.Toolbar;
import android.view.MenuItem;
import android.view.View;
import android.widget.AdapterView;
import android.widget.ImageButton;
import android.widget.ListAdapter;
import android.widget.ListView;
import b.e.b.f;
import fec.mobile.activity.Activity.FileExplorerActivity;
import fec.mobile.activity.Apdater.AdapterFileExplorer;
import fec.mobile.activity.Fragment.ShowImageFragment;
import fec.mobile.activity.R;
import java.io.File;
import java.util.ArrayList;
import java.util.Arrays;
import java.util.HashMap;
import java.util.Iterator;
import java.util.List;

public final class FileExplorerActivity
extends c {
    public String n;
    private final String o = Environment.getExternalStorageDirectory().getPath();
    private ArrayList<String> p = new ArrayList();
    private ArrayList<String> q = new ArrayList();
    private AdapterFileExplorer r;
    private ShowImageFragment s;
    private boolean t;
    private boolean u;
    private HashMap v;

    public static final /* synthetic */ AdapterFileExplorer a(FileExplorerActivity fileExplorerActivity) {
        return fileExplorerActivity.r;
    }

    public static final /* synthetic */ void a(FileExplorerActivity fileExplorerActivity, ShowImageFragment showImageFragment) {
        fileExplorerActivity.s = showImageFragment;
    }

    public static final /* synthetic */ ShowImageFragment b(FileExplorerActivity fileExplorerActivity) {
        return fileExplorerActivity.s;
    }

    public final void a(String listView) {
        f.b((Object)listView, "p_rootPath");
        this.p = new ArrayList();
        Boolean bl2 = true;
        this.q = new ArrayList();
        Object object = new ArrayList();
        Object object2 = new ArrayList<String>();
        File file = new File((String)listView);
        Object[] arrobject = file.listFiles();
        boolean bl3 = f.a((Object)listView, (Object)this.o);
        int n2 = 0;
        if (true ^ bl3) {
            this.p.add("../");
            this.q.add(file.getParent());
            bl2 = false;
        }
        this.n = listView;
        Arrays.sort(arrobject);
        f.a((Object)arrobject, "m_filesArray");
        int n3 = arrobject.length;
        while (n2 < n3) {
            listView = arrobject[n2];
            f.a((Object)listView, "file");
            if (listView.isDirectory()) {
                this.p.add(listView.getName());
                this.q.add(listView.getPath());
            } else {
                object.add(listView.getName());
                object2.add(listView.getPath());
            }
            ++n2;
        }
        listView = object.iterator();
        while (listView.hasNext()) {
            object = (String)listView.next();
            this.p.add((String)object);
        }
        listView = object2.iterator();
        while (listView.hasNext()) {
            object2 = (String)listView.next();
            this.q.add((String)object2);
        }
        this.r = new AdapterFileExplorer((Context)this, (List<String>)this.p, (List<String>)this.q, bl2);
        listView = (ListView)this.c(R.id.rl_lvListRoot);
        f.a((Object)listView, "rl_lvListRoot");
        listView.setAdapter((ListAdapter)this.r);
        listView = (ListView)this.c(R.id.rl_lvListRoot);
        f.a((Object)listView, "rl_lvListRoot");
        listView.setOnItemClickListener(new AdapterView.OnItemClickListener(this){
            final /* synthetic */ FileExplorerActivity a;
            {
                this.a = fileExplorerActivity;
            }

            /*
             * Loose catch block
             * Enabled aggressive block sorting
             * Enabled unnecessary exception pruning
             * Enabled aggressive exception aggregation
             * Lifted jumps to return sites
             */
            public final void onItemClick(AdapterView<?> object, View object2, int n2, long l2) {
                object2 = new File(this.a.n().get(n2));
                if (object2.isDirectory()) {
                    object = this.a;
                    object2 = object2.toString();
                    f.a(object2, "m_isFile.toString()");
                    object.a((String)object2);
                    return;
                }
                object = this.a.m().get(n2);
                f.a(object, "m_item[position]");
                object = (String)object;
                if (object == null) throw new b.g("null cannot be cast to non-null type java.lang.String");
                object = object.toLowerCase();
                f.a(object, "(this as java.lang.String).toLowerCase()");
                if (!b.i.f.a((java.lang.CharSequence)object, ".jpg", false, 2, null)) {
                    object = this.a.m().get(n2);
                    f.a(object, "m_item[position]");
                    object = (String)object;
                    if (object == null) throw new b.g("null cannot be cast to non-null type java.lang.String");
                    object = object.toLowerCase();
                    f.a(object, "(this as java.lang.String).toLowerCase()");
                    if (!b.i.f.a((java.lang.CharSequence)object, ".png", false, 2, null)) {
                        object = this.a.m().get(n2);
                        f.a(object, "m_item[position]");
                        object = (String)object;
                        if (object == null) throw new b.g("null cannot be cast to non-null type java.lang.String");
                        object = object.toLowerCase();
                        f.a(object, "(this as java.lang.String).toLowerCase()");
                        if (!b.i.f.a((java.lang.CharSequence)object, ".pdf", false, 2, null)) return;
                        object = new File(this.a.n().get(n2));
                        object = android.support.v4.content.FileProvider.a((Context)this.a, this.a.getPackageName(), (File)object);
                        object2 = this.a.getContentResolver().getType((android.net.Uri)object);
                        Intent intent = new Intent();
                        intent.setAction("android.intent.action.VIEW");
                        intent.setDataAndType((android.net.Uri)object, (String)object2);
                        intent.addFlags(1);
                        this.a.startActivity(intent);
                        return;
                    }
                }
                object = this.a.g().a();
                object.a((String)null);
                FileExplorerActivity.a(this.a, new ShowImageFragment());
                object2 = new Bundle();
                object2.putString("path", this.a.n().get(n2));
                ShowImageFragment showImageFragment = FileExplorerActivity.b(this.a);
                if (showImageFragment != null) {
                    showImageFragment.g((Bundle)object2);
                }
                object.b(2131296395, FileExplorerActivity.b(this.a));
                object.c();
                return;
                catch (java.lang.Exception exception) {}
                fec.mobile.activity.Activity.MainApplication$Companion companion = fec.mobile.activity.Activity.MainApplication.a;
                object2 = this.a.getResources().getString(2131689582);
                f.a(object2, "resources.getString(R.string.erro_open_file)");
                companion.a((String)object2);
            }
        });
    }

    public View c(int n2) {
        View view;
        if (this.v == null) {
            this.v = new HashMap();
        }
        View view2 = view = (View)this.v.get(n2);
        if (view == null) {
            view2 = this.findViewById(n2);
            this.v.put(n2, view2);
        }
        return view2;
    }

    public final ArrayList<String> m() {
        return this.p;
    }

    public final ArrayList<String> n() {
        return this.q;
    }

    public final boolean o() {
        return this.t;
    }

    @Override
    protected void onCreate(Bundle object) {
        super.onCreate((Bundle)object);
        this.setContentView(2131492893);
        this.a((Toolbar)this.c(R.id.toolbar));
        object = this.i();
        if (object != null) {
            object.a(true);
        }
        object = this.getIntent().getStringExtra("path");
        this.t = this.getIntent().getBooleanExtra("iscreatebyfesgo", false);
        this.u = this.getIntent().getBooleanExtra("isolduploaded", false);
        String string2 = this.o;
        f.a((Object)string2, "m_root");
        this.a(string2);
        ((ImageButton)this.c(R.id.btnDone)).setOnClickListener(new View.OnClickListener(this, (String)object){
            final /* synthetic */ FileExplorerActivity a;
            final /* synthetic */ String b;
            {
                this.a = fileExplorerActivity;
                this.b = string2;
            }

            /*
             * Unable to fully structure code
             * Enabled aggressive block sorting
             * Lifted jumps to return sites
             */
            public final void onClick(View var1_1) {
                block11 : {
                    if (this.a.p()) {
                        var1_2 = FileExplorerActivity.a(this.a);
                        if (var1_2 != null && (var1_3 = var1_2.b()) != null && var1_3.size() == 1) {
                            var3_29 = this.a.n();
                            var1_4 = FileExplorerActivity.a(this.a);
                            if (var1_4 == null || (var1_5 = var1_4.b()) == null || (var1_6 = var1_5.get(0)) == null) {
                                var1_8 = 0;
                            }
                            var1_10 = new File((String)var3_29.get(var1_9.intValue())).getName();
                            f.a((Object)var1_10, "fileName");
                            var5_31 = b.i.f.b((java.lang.CharSequence)var1_10, new String[]{"_"}, false, 0, 6, null);
                            var1_11 = (String)var5_31.get(0);
                            var3_29 = (String)var5_31.get(1);
                            var4_33 = (String)var5_31.get(2);
                            if (var5_31.size() == 3) {
                                var5_31 = new Intent((Context)this.a, fec.mobile.activity.Activity.CreateCustomerActivity.class);
                                var5_31.putExtra("customername", var1_11);
                                var5_31.putExtra("cmnd", (String)var3_29);
                                var5_31.putExtra("channel", (String)var4_33);
                                var1_12 = new android.support.v7.app.b$a((Context)this.a);
                                var1_12.a(2131689650);
                                var1_12.b(2131689553);
                                var1_12.a(2131689618, new android.content.DialogInterface$OnClickListener(this, (Intent)var5_31){
                                    final /* synthetic */ onCreate a;
                                    final /* synthetic */ Intent b;
                                    {
                                        this.a = var1_1;
                                        this.b = intent;
                                    }

                                    public final void onClick(android.content.DialogInterface dialogInterface, int n2) {
                                        this.b.putExtra("isqde", true);
                                        this.b.putExtra("ishardqde", true);
                                        this.a.a.startActivity(this.b);
                                        this.a.a.finish();
                                    }
                                });
                                var1_12.b(2131689649, new android.content.DialogInterface$OnClickListener(this, (Intent)var5_31){
                                    final /* synthetic */ onCreate a;
                                    final /* synthetic */ Intent b;
                                    {
                                        this.a = var1_1;
                                        this.b = intent;
                                    }

                                    public final void onClick(android.content.DialogInterface dialogInterface, int n2) {
                                        this.a.a.startActivity(this.b);
                                    }
                                });
                                var1_12.c();
                                return;
                            }
                            var4_33 = fec.mobile.activity.Activity.MainApplication.a;
                            var1_13 = this.a.getResources().getString(2131689602);
                            var3_29 = "resources.getString(R.st\u2026rror_not_folder_customer)";
                        } else {
                            var4_33 = fec.mobile.activity.Activity.MainApplication.a;
                            var1_15 = this.a.getResources().getString(2131689607);
                            var3_29 = "resources.getString(R.st\u2026please_choice_one_folder)";
                        }
                        f.a((Object)var1_16, (String)var3_29);
                        var4_33.a((String)var1_16);
                        return;
                    }
                    if (FileExplorerActivity.a(this.a) == null) return;
                    var1_17 = FileExplorerActivity.a(this.a);
                    if (var1_17 == null || (var1_18 = var1_17.b()) == null) break block11;
                    var3_30 = ((java.lang.Iterable)var1_18).iterator();
                    while (var3_30.hasNext()) {
                        var2_35 = ((java.lang.Number)var3_30.next()).intValue();
                        var4_34 = new File(this.a.n().get(var2_35));
                        var1_20 = var4_34.getName();
                        if (var4_34.isDirectory()) continue;
                        if (!this.a.o()) ** GOTO lbl68
                        f.a((Object)var1_20, "fileName");
                        if (b.i.f.a((java.lang.CharSequence)var1_20, fec.mobile.activity.Activity.MainApplication.a.e(), false, 2, null)) {
                            var5_32 = var4_34.getAbsolutePath();
                            f.a(var5_32, "fileSelected.absolutePath");
                            var6_36 = var4_34.getAbsolutePath();
                            f.a((Object)var6_36, "fileSelected.absolutePath");
                            var2_35 = b.i.f.b((java.lang.CharSequence)var6_36, ".", 0, false, 6, null);
                            if (var5_32 == null) throw new b.g("null cannot be cast to non-null type java.lang.String");
                            var5_32 = var5_32.substring(var2_35);
                            f.a(var5_32, "(this as java.lang.String).substring(startIndex)");
                            if (var5_32.hashCode() != 1475827 || !var5_32.equals(".jpg")) continue;
                            var5_32 = new File(this.b);
                            if (!var5_32.exists()) {
                                var5_32.mkdirs();
                            }
                            var1_21 = new File((File)var5_32, var1_20);
                        } else {
                            var4_34 = fec.mobile.activity.Activity.MainApplication.a;
                            var1_23 = this.a.getResources();
                            if (var1_23 == null || (var1_24 = var1_23.getString(2131689590)) == null) {
                                var1_26 = "";
                            }
                            var4_34.a((String)var1_27);
                            continue;
lbl68: // 1 sources:
                            var5_32 = var4_34.getAbsolutePath();
                            f.a(var5_32, "fileSelected.absolutePath");
                            var6_36 = var4_34.getAbsolutePath();
                            f.a((Object)var6_36, "fileSelected.absolutePath");
                            var2_35 = b.i.f.b((java.lang.CharSequence)var6_36, ".", 0, false, 6, null);
                            if (var5_32 == null) throw new b.g("null cannot be cast to non-null type java.lang.String");
                            var5_32 = var5_32.substring(var2_35);
                            f.a(var5_32, "(this as java.lang.String).substring(startIndex)");
                            if (var5_32.hashCode() != 1475827 || !var5_32.equals(".jpg")) continue;
                            var5_32 = new File(this.b);
                            if (!var5_32.exists()) {
                                var5_32.mkdirs();
                            }
                            var1_28 = new File((File)var5_32, var1_20);
                        }
                        b.d.j.a((File)var4_34, (File)var1_22, true, 0, 4, null);
                    }
                }
                this.a.finish();
            }
        });
        ((ImageButton)this.c(R.id.btndelete)).setOnClickListener(new View.OnClickListener(this){
            final /* synthetic */ FileExplorerActivity a;
            {
                this.a = fileExplorerActivity;
            }

            public final void onClick(View object) {
                object = new android.support.v7.app.b$a((Context)this.a).b();
                object.setTitle(2131689579);
                object.a(this.a.getResources().getString(2131689504));
                object.a(17301543);
                object.a(-1, this.a.getResources().getString(2131689651), new android.content.DialogInterface$OnClickListener(this){
                    final /* synthetic */ onCreate a;
                    {
                        this.a = var1_1;
                    }

                    public final void onClick(android.content.DialogInterface dialogInterface, int n2) {
                        if (FileExplorerActivity.a(this.a.a) != null) {
                            Object object = FileExplorerActivity.a(this.a.a);
                            object = object != null && (object = object.b()) != null ? b.a.j.b((java.lang.Iterable)object) : null;
                            if (object != null) {
                                Iterator<T> iterator = ((java.lang.Iterable)object).iterator();
                                while (iterator.hasNext()) {
                                    n2 = ((java.lang.Number)iterator.next()).intValue();
                                    b.d.j.b(new File(this.a.a.n().get(n2)));
                                }
                            }
                            if (object != null) {
                                object = ((java.lang.Iterable)object).iterator();
                                while (object.hasNext()) {
                                    n2 = ((java.lang.Number)object.next()).intValue();
                                    this.a.a.m().remove(n2);
                                    this.a.a.n().remove(n2);
                                }
                            }
                            if ((object = FileExplorerActivity.a(this.a.a)) != null) {
                                object.notifyDataSetChanged();
                            }
                        }
                        dialogInterface.dismiss();
                    }
                });
                object.a(-2, this.a.getResources().getString(2131689508), fec.mobile.activity.Activity.FileExplorerActivity$onCreate$2$2.a);
                object.show();
            }
        });
    }

    public boolean onOptionsItemSelected(MenuItem menuItem) {
        Object object = menuItem != null ? Integer.valueOf(menuItem.getItemId()) : null;
        if (object != null && object.intValue() == 16908332) {
            if (this.s != null && (object = this.s) != null && object.t()) {
                this.g().b();
            } else {
                this.finish();
            }
        }
        return super.onOptionsItemSelected(menuItem);
    }

    public final boolean p() {
        return this.u;
    }
}

