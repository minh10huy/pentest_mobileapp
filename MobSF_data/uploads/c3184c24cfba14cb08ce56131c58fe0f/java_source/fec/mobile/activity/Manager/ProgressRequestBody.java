/*
 * Decompiled with CFR 0_132.
 * 
 * Could not load the following classes:
 *  android.os.Handler
 *  android.os.Looper
 */
package fec.mobile.activity.Manager;

import android.os.Handler;
import android.os.Looper;
import b.e.b.f;
import d.ab;
import d.v;
import e.d;
import java.io.File;
import java.io.FileInputStream;

public final class ProgressRequestBody
extends ab {
    private final File a;
    private final UploadCallbacks b;

    public ProgressRequestBody(File file, UploadCallbacks uploadCallbacks) {
        f.b(file, "mFile");
        f.b(uploadCallbacks, "mListener");
        this.a = file;
        this.b = uploadCallbacks;
    }

    @Override
    public v a() {
        return v.a("multipart/form-data");
    }

    @Override
    public void a(d d2) {
        int n2;
        long l2;
        Handler handler;
        f.b(d2, "sink");
        long l3 = this.a.length();
        byte[] arrby = new byte[2048];
        FileInputStream fileInputStream = new FileInputStream(this.a);
        try {
            handler = new Handler(Looper.getMainLooper());
            l2 = 0L;
        }
        catch (Throwable throwable) {
            fileInputStream.close();
            throw throwable;
        }
        do {
            n2 = fileInputStream.read(arrby);
            if (n2 != -1) break block6;
            break;
        } while (true);
        {
            block6 : {
                fileInputStream.close();
                return;
            }
            handler.post((Runnable)new ProgressUpdater(l2, l3));
            l2 += (long)n2;
            d2.c(arrby, 0, n2);
            continue;
        }
    }

    @Override
    public long b() {
        return this.a.length();
    }

    private final class ProgressUpdater
    implements Runnable {
        private final long b;
        private final long c;

        public ProgressUpdater(long l2, long l3) {
            this.b = l2;
            this.c = l3;
        }

        @Override
        public void run() {
            ProgressRequestBody.this.b.a((int)((long)100 * this.b / this.c));
        }
    }

    public static interface UploadCallbacks {
        public void a(int var1);
    }

}

