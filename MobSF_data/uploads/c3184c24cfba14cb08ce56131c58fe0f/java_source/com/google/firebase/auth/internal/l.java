/*
 * Decompiled with CFR 0_132.
 * 
 * Could not load the following classes:
 *  android.os.Handler
 *  android.os.HandlerThread
 *  android.os.Looper
 */
package com.google.firebase.auth.internal;

import android.os.Handler;
import android.os.HandlerThread;
import android.os.Looper;
import com.google.android.gms.common.internal.ah;
import com.google.android.gms.common.util.i;
import com.google.android.gms.internal.xu;
import com.google.firebase.auth.internal.m;
import com.google.firebase.b;

public final class l {
    private static xu c = new xu("TokenRefresher", new String[]{"FirebaseAuth:"});
    volatile long a;
    volatile long b;
    private final b d;
    private long e;
    private HandlerThread f;
    private Handler g;
    private Runnable h;

    public l(b b2) {
        c.a("Initializing TokenRefresher", new Object[0]);
        this.d = ah.a(b2);
        this.f = new HandlerThread("TokenRefresher", 10);
        this.f.start();
        this.g = new Handler(this.f.getLooper());
        this.h = new m(this, this.d.b());
        this.e = 300000L;
    }

    static /* synthetic */ xu d() {
        return c;
    }

    public final void a() {
        xu xu2 = c;
        long l2 = this.a;
        long l3 = this.e;
        StringBuilder stringBuilder = new StringBuilder(43);
        stringBuilder.append("Scheduling refresh for ");
        stringBuilder.append(l2 - l3);
        xu2.a(stringBuilder.toString(), new Object[0]);
        this.c();
        l2 = i.d().a();
        this.b = Math.max(this.a - l2 - this.e, 0L) / 1000L;
        this.g.postDelayed(this.h, this.b * 1000L);
    }

    final void b() {
        int n2 = (int)this.b;
        long l2 = n2 != 30 && n2 != 60 && n2 != 120 && n2 != 240 && n2 != 480 ? (n2 != 960 ? 30L : 960L) : 2L * this.b;
        this.b = l2;
        this.a = i.d().a() + this.b * 1000L;
        xu xu2 = c;
        l2 = this.a;
        StringBuilder stringBuilder = new StringBuilder(43);
        stringBuilder.append("Scheduling refresh for ");
        stringBuilder.append(l2);
        xu2.a(stringBuilder.toString(), new Object[0]);
        this.g.postDelayed(this.h, this.b * 1000L);
    }

    public final void c() {
        this.g.removeCallbacks(this.h);
    }
}

