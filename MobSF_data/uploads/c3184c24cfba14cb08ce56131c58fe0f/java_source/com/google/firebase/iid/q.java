/*
 * Decompiled with CFR 0_132.
 * 
 * Could not load the following classes:
 *  android.content.ComponentName
 *  android.content.ServiceConnection
 *  android.os.Bundle
 *  android.os.Handler
 *  android.os.Handler$Callback
 *  android.os.IBinder
 *  android.os.Looper
 *  android.os.Message
 *  android.os.Messenger
 *  android.os.RemoteException
 *  android.util.Log
 *  android.util.SparseArray
 */
package com.google.firebase.iid;

import android.content.ComponentName;
import android.content.ServiceConnection;
import android.os.Bundle;
import android.os.Handler;
import android.os.IBinder;
import android.os.Looper;
import android.os.Message;
import android.os.Messenger;
import android.os.RemoteException;
import android.util.Log;
import android.util.SparseArray;
import com.google.android.gms.common.stats.a;
import com.google.firebase.iid.o;
import com.google.firebase.iid.p;
import com.google.firebase.iid.r;
import com.google.firebase.iid.t;
import com.google.firebase.iid.v;
import com.google.firebase.iid.x;
import com.google.firebase.iid.y;
import java.util.ArrayDeque;
import java.util.Iterator;
import java.util.Queue;

final class q
implements ServiceConnection {
    int a = 0;
    final Messenger b = new Messenger(new Handler(Looper.getMainLooper(), (Handler.Callback)new r(this)));
    v c;
    final Queue<x<?>> d = new ArrayDeque();
    final SparseArray<x<?>> e = new SparseArray();
    final /* synthetic */ o f;

    private q(o o2) {
        this.f = o2;
    }

    /* synthetic */ q(o o2, p p2) {
        this(o2);
    }

    private final void a(y y2) {
        Iterator<x<?>> iterator = this.d.iterator();
        while (iterator.hasNext()) {
            iterator.next().a(y2);
        }
        this.d.clear();
        for (int i2 = 0; i2 < this.e.size(); ++i2) {
            ((x)this.e.valueAt(i2)).a(y2);
        }
        this.e.clear();
    }

    private final void c() {
        o.b(this.f).execute(new t(this));
    }

    final void a() {
        synchronized (this) {
            if (this.a == 2 && this.d.isEmpty() && this.e.size() == 0) {
                if (Log.isLoggable((String)"MessengerIpcClient", (int)2)) {
                    Log.v((String)"MessengerIpcClient", (String)"Finished handling requests, unbinding");
                }
                this.a = 3;
                a.a();
                o.a(this.f).unbindService((ServiceConnection)this);
            }
            return;
        }
    }

    /*
     * Enabled aggressive block sorting
     * Enabled unnecessary exception pruning
     * Enabled aggressive exception aggregation
     */
    final void a(int n2) {
        synchronized (this) {
            x x2 = (x)this.e.get(n2);
            if (x2 != null) {
                StringBuilder stringBuilder = new StringBuilder(31);
                stringBuilder.append("Timing out request: ");
                stringBuilder.append(n2);
                Log.w((String)"MessengerIpcClient", (String)stringBuilder.toString());
                this.e.remove(n2);
                x2.a(new y(3, "Timed out waiting for response"));
                this.a();
            }
            return;
        }
    }

    /*
     * Exception decompiling
     */
    final void a(int var1_1, String var2_2) {
        // This method has failed to decompile.  When submitting a bug report, please provide this stack trace, and (if you hold appropriate legal rights) the relevant class file.
        // org.benf.cfr.reader.util.ConfusedCFRException: First case is not immediately after switch.
        // org.benf.cfr.reader.bytecode.analysis.opgraph.op3rewriters.SwitchReplacer.examineSwitchContiguity(SwitchReplacer.java:366)
        // org.benf.cfr.reader.bytecode.analysis.opgraph.op3rewriters.SwitchReplacer.replaceRawSwitches(SwitchReplacer.java:65)
        // org.benf.cfr.reader.bytecode.CodeAnalyser.getAnalysisInner(CodeAnalyser.java:416)
        // org.benf.cfr.reader.bytecode.CodeAnalyser.getAnalysisOrWrapFail(CodeAnalyser.java:196)
        // org.benf.cfr.reader.bytecode.CodeAnalyser.getAnalysis(CodeAnalyser.java:141)
        // org.benf.cfr.reader.entities.attributes.AttributeCode.analyse(AttributeCode.java:95)
        // org.benf.cfr.reader.entities.Method.analyse(Method.java:372)
        // org.benf.cfr.reader.entities.ClassFile.analyseMid(ClassFile.java:867)
        // org.benf.cfr.reader.entities.ClassFile.analyseTop(ClassFile.java:768)
        // org.benf.cfr.reader.Main.doJar(Main.java:141)
        // org.benf.cfr.reader.Main.main(Main.java:242)
        throw new IllegalStateException("Decompilation failed");
    }

    /*
     * Enabled aggressive block sorting
     * Enabled unnecessary exception pruning
     * Enabled aggressive exception aggregation
     */
    final boolean a(Message object) {
        Object object2;
        int n2 = object.arg1;
        if (Log.isLoggable((String)"MessengerIpcClient", (int)3)) {
            object2 = new StringBuilder(41);
            object2.append("Received response to request: ");
            object2.append(n2);
            Log.d((String)"MessengerIpcClient", (String)object2.toString());
        }
        synchronized (this) {
            object2 = (x)this.e.get(n2);
            if (object2 == null) {
                object = new StringBuilder(50);
                object.append("Received response for unknown request: ");
                object.append(n2);
                Log.w((String)"MessengerIpcClient", (String)object.toString());
                return true;
            }
            this.e.remove(n2);
            this.a();
        }
        object = object.getData();
        if (object.getBoolean("unsupported", false)) {
            object2.a(new y(4, "Not supported by GmsCore"));
            return true;
        }
        object2.a((Bundle)object);
        return true;
    }

    /*
     * Exception decompiling
     */
    final boolean a(x var1_1) {
        // This method has failed to decompile.  When submitting a bug report, please provide this stack trace, and (if you hold appropriate legal rights) the relevant class file.
        // org.benf.cfr.reader.util.ConfusedCFRException: First case is not immediately after switch.
        // org.benf.cfr.reader.bytecode.analysis.opgraph.op3rewriters.SwitchReplacer.examineSwitchContiguity(SwitchReplacer.java:366)
        // org.benf.cfr.reader.bytecode.analysis.opgraph.op3rewriters.SwitchReplacer.replaceRawSwitches(SwitchReplacer.java:65)
        // org.benf.cfr.reader.bytecode.CodeAnalyser.getAnalysisInner(CodeAnalyser.java:416)
        // org.benf.cfr.reader.bytecode.CodeAnalyser.getAnalysisOrWrapFail(CodeAnalyser.java:196)
        // org.benf.cfr.reader.bytecode.CodeAnalyser.getAnalysis(CodeAnalyser.java:141)
        // org.benf.cfr.reader.entities.attributes.AttributeCode.analyse(AttributeCode.java:95)
        // org.benf.cfr.reader.entities.Method.analyse(Method.java:372)
        // org.benf.cfr.reader.entities.ClassFile.analyseMid(ClassFile.java:867)
        // org.benf.cfr.reader.entities.ClassFile.analyseTop(ClassFile.java:768)
        // org.benf.cfr.reader.Main.doJar(Main.java:141)
        // org.benf.cfr.reader.Main.main(Main.java:242)
        throw new IllegalStateException("Decompilation failed");
    }

    final void b() {
        synchronized (this) {
            if (this.a == 1) {
                this.a(1, "Timed out while binding");
            }
            return;
        }
    }

    /*
     * Enabled aggressive block sorting
     * Enabled unnecessary exception pruning
     * Enabled aggressive exception aggregation
     */
    public final void onServiceConnected(ComponentName componentName, IBinder iBinder) {
        synchronized (this) {
            void var2_3;
            if (Log.isLoggable((String)"MessengerIpcClient", (int)2)) {
                Log.v((String)"MessengerIpcClient", (String)"Service connected");
            }
            if (var2_3 == null) {
                this.a(0, "Null service connection");
                return;
            }
            try {
                this.c = new v((IBinder)var2_3);
            }
            catch (RemoteException remoteException) {
                this.a(0, remoteException.getMessage());
                return;
            }
            this.a = 2;
            this.c();
            return;
        }
    }

    public final void onServiceDisconnected(ComponentName componentName) {
        synchronized (this) {
            if (Log.isLoggable((String)"MessengerIpcClient", (int)2)) {
                Log.v((String)"MessengerIpcClient", (String)"Service disconnected");
            }
            this.a(2, "Service disconnected");
            return;
        }
    }
}

