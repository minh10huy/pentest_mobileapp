/*
 * Decompiled with CFR 0_132.
 * 
 * Could not load the following classes:
 *  android.app.PendingIntent
 *  android.content.Context
 *  android.content.Intent
 *  android.os.Bundle
 *  android.os.Looper
 *  android.util.Log
 */
package com.google.android.gms.common.api.internal;

import android.app.PendingIntent;
import android.content.Context;
import android.content.Intent;
import android.os.Bundle;
import android.os.Looper;
import android.util.Log;
import com.google.android.gms.common.api.Scope;
import com.google.android.gms.common.api.a;
import com.google.android.gms.common.api.f;
import com.google.android.gms.common.api.internal.aa;
import com.google.android.gms.common.api.internal.ah;
import com.google.android.gms.common.api.internal.ai;
import com.google.android.gms.common.api.internal.al;
import com.google.android.gms.common.api.internal.bc;
import com.google.android.gms.common.api.internal.cp;
import com.google.android.gms.common.api.internal.o;
import com.google.android.gms.common.api.internal.p;
import com.google.android.gms.common.api.internal.q;
import com.google.android.gms.common.api.internal.t;
import com.google.android.gms.common.api.internal.w;
import com.google.android.gms.common.api.k;
import com.google.android.gms.common.internal.ak;
import com.google.android.gms.common.internal.bd;
import com.google.android.gms.common.internal.bf;
import com.google.android.gms.common.m;
import com.google.android.gms.internal.agr;
import com.google.android.gms.internal.ags;
import com.google.android.gms.internal.ahe;
import com.google.android.gms.internal.wz;
import java.util.ArrayList;
import java.util.Collection;
import java.util.Collections;
import java.util.HashMap;
import java.util.HashSet;
import java.util.Iterator;
import java.util.Map;
import java.util.Set;
import java.util.concurrent.Future;
import java.util.concurrent.locks.Lock;

public final class n
implements ah {
    private final ai a;
    private final Lock b;
    private final Context c;
    private final m d;
    private com.google.android.gms.common.a e;
    private int f;
    private int g = 0;
    private int h;
    private final Bundle i = new Bundle();
    private final Set<a.d> j = new HashSet<a.d>();
    private agr k;
    private boolean l;
    private boolean m;
    private boolean n;
    private com.google.android.gms.common.internal.o o;
    private boolean p;
    private boolean q;
    private final bd r;
    private final Map<a<?>, Boolean> s;
    private final a.b<? extends agr, ags> t;
    private ArrayList<Future<?>> u = new ArrayList();

    public n(ai ai2, bd bd2, Map<a<?>, Boolean> map, m m2, a.b<? extends agr, ags> b2, Lock lock, Context context) {
        this.a = ai2;
        this.r = bd2;
        this.s = map;
        this.d = m2;
        this.t = b2;
        this.b = lock;
        this.c = context;
    }

    static /* synthetic */ Context a(n n2) {
        return n2.c;
    }

    static /* synthetic */ void a(n n2, com.google.android.gms.common.a a2) {
        n2.b(a2);
    }

    static /* synthetic */ void a(n n2, com.google.android.gms.common.a a2, a a3, boolean bl2) {
        n2.b(a2, a3, bl2);
    }

    static /* synthetic */ void a(n n2, ahe ahe2) {
        n2.a(ahe2);
    }

    private final void a(ahe wz2) {
        if (!this.b(0)) {
            return;
        }
        Object object = wz2.a();
        if (object.b()) {
            object = wz2.b();
            wz2 = object.b();
            if (!wz2.b()) {
                object = String.valueOf(wz2);
                StringBuilder stringBuilder = new StringBuilder(String.valueOf(object).length() + 48);
                stringBuilder.append("Sign-in succeeded with resolve account failure: ");
                stringBuilder.append((String)object);
                Log.wtf((String)"GoogleApiClientConnecting", (String)stringBuilder.toString(), (Throwable)new Exception());
                this.b((com.google.android.gms.common.a)wz2);
                return;
            }
            this.n = true;
            this.o = object.a();
            this.p = object.c();
            this.q = object.d();
            this.e();
            return;
        }
        if (this.a((com.google.android.gms.common.a)object)) {
            this.g();
            this.e();
            return;
        }
        this.b((com.google.android.gms.common.a)object);
    }

    private final void a(boolean bl2) {
        if (this.k != null) {
            if (this.k.g() && bl2) {
                this.k.e();
            }
            this.k.f();
            this.o = null;
        }
    }

    private final boolean a(com.google.android.gms.common.a a2) {
        if (this.l && !a2.a()) {
            return true;
        }
        return false;
    }

    static /* synthetic */ boolean a(n n2, int n3) {
        return n2.b(0);
    }

    static /* synthetic */ Lock b(n n2) {
        return n2.b;
    }

    private final void b(com.google.android.gms.common.a a2) {
        this.h();
        this.a(a2.a() ^ true);
        this.a.a(a2);
        this.a.e.a(a2);
    }

    /*
     * Enabled aggressive block sorting
     */
    private final void b(com.google.android.gms.common.a a2, a<?> a3, boolean bl2) {
        boolean bl3;
        int n2;
        block5 : {
            block6 : {
                boolean bl4;
                block4 : {
                    n2 = a3.a().a();
                    bl4 = false;
                    if (!bl2) break block4;
                    boolean bl5 = a2.a() || this.d.c(a2.c()) != null;
                    bl3 = bl4;
                    if (!bl5) break block5;
                }
                if (this.e == null) break block6;
                bl3 = bl4;
                if (n2 >= this.f) break block5;
            }
            bl3 = true;
        }
        if (bl3) {
            this.e = a2;
            this.f = n2;
        }
        this.a.b.put(a3.c(), a2);
    }

    private final boolean b(int n2) {
        if (this.g != n2) {
            Log.w((String)"GoogleApiClientConnecting", (String)this.a.d.n());
            CharSequence charSequence = String.valueOf(this);
            CharSequence charSequence2 = new StringBuilder(String.valueOf(charSequence).length() + 23);
            charSequence2.append("Unexpected callback in ");
            charSequence2.append((String)charSequence);
            Log.w((String)"GoogleApiClientConnecting", (String)charSequence2.toString());
            int n3 = this.h;
            charSequence = new StringBuilder(33);
            charSequence.append("mRemainingConnections=");
            charSequence.append(n3);
            Log.w((String)"GoogleApiClientConnecting", (String)charSequence.toString());
            charSequence = n.c(this.g);
            charSequence2 = n.c(n2);
            StringBuilder stringBuilder = new StringBuilder(String.valueOf(charSequence).length() + 70 + String.valueOf(charSequence2).length());
            stringBuilder.append("GoogleApiClient connecting is in step ");
            stringBuilder.append((String)charSequence);
            stringBuilder.append(" but received callback for step ");
            stringBuilder.append((String)charSequence2);
            Log.wtf((String)"GoogleApiClientConnecting", (String)stringBuilder.toString(), (Throwable)new Exception());
            this.b(new com.google.android.gms.common.a(8, null));
            return false;
        }
        return true;
    }

    static /* synthetic */ boolean b(n n2, com.google.android.gms.common.a a2) {
        return n2.a(a2);
    }

    static /* synthetic */ ai c(n n2) {
        return n2.a;
    }

    private static String c(int n2) {
        switch (n2) {
            default: {
                return "UNKNOWN";
            }
            case 1: {
                return "STEP_GETTING_REMOTE_SERVICE";
            }
            case 0: 
        }
        return "STEP_SERVICE_BINDINGS_AND_SIGN_IN";
    }

    /*
     * Enabled aggressive block sorting
     */
    private final boolean d() {
        com.google.android.gms.common.a a2;
        --this.h;
        if (this.h > 0) {
            return false;
        }
        if (this.h < 0) {
            Log.w((String)"GoogleApiClientConnecting", (String)this.a.d.n());
            Log.wtf((String)"GoogleApiClientConnecting", (String)"GoogleApiClient received too many callbacks for the given step. Clients may be in an unexpected state; GoogleApiClient will now disconnect.", (Throwable)new Exception());
            a2 = new com.google.android.gms.common.a(8, null);
        } else {
            if (this.e == null) {
                return true;
            }
            this.a.c = this.f;
            a2 = this.e;
        }
        this.b(a2);
        return false;
    }

    static /* synthetic */ boolean d(n n2) {
        return n2.m;
    }

    static /* synthetic */ agr e(n n2) {
        return n2.k;
    }

    private final void e() {
        if (this.h != 0) {
            return;
        }
        if (!this.m || this.n) {
            ArrayList<a.f> arrayList = new ArrayList<a.f>();
            this.g = 1;
            this.h = this.a.a.size();
            for (a.d<?> d2 : this.a.a.keySet()) {
                if (this.a.b.containsKey(d2)) {
                    if (!this.d()) continue;
                    this.f();
                    continue;
                }
                arrayList.add(this.a.a.get(d2));
            }
            if (!arrayList.isEmpty()) {
                this.u.add(al.a().submit(new t(this, arrayList)));
            }
        }
    }

    static /* synthetic */ Set f(n n2) {
        return n2.i();
    }

    private final void f() {
        this.a.h();
        al.a().execute(new o(this));
        if (this.k != null) {
            if (this.p) {
                this.k.a(this.o, this.q);
            }
            this.a(false);
        }
        for (a.d<?> d2 : this.a.b.keySet()) {
            this.a.a.get(d2).f();
        }
        Object object = this.i.isEmpty() ? null : this.i;
        this.a.e.a((Bundle)object);
    }

    static /* synthetic */ com.google.android.gms.common.internal.o g(n n2) {
        return n2.o;
    }

    private final void g() {
        this.m = false;
        this.a.d.c = Collections.emptySet();
        for (a.d d2 : this.j) {
            if (this.a.b.containsKey(d2)) continue;
            this.a.b.put(d2, new com.google.android.gms.common.a(17, null));
        }
    }

    private final void h() {
        ArrayList<Future<?>> arrayList = this.u;
        int n2 = arrayList.size();
        for (int i2 = 0; i2 < n2; ++i2) {
            Future<?> future = arrayList.get(i2);
            future.cancel(true);
        }
        this.u.clear();
    }

    static /* synthetic */ void h(n n2) {
        n2.g();
    }

    private final Set<Scope> i() {
        if (this.r == null) {
            return Collections.emptySet();
        }
        HashSet<Scope> hashSet = new HashSet<Scope>(this.r.d());
        Map<a<?>, bf> map = this.r.f();
        for (a<?> a2 : map.keySet()) {
            if (this.a.b.containsKey(a2.c())) continue;
            hashSet.addAll(map.get(a2).a);
        }
        return hashSet;
    }

    static /* synthetic */ void i(n n2) {
        n2.e();
    }

    static /* synthetic */ boolean j(n n2) {
        return n2.d();
    }

    @Override
    public final <A extends a.c, T extends cp<? extends k, A>> T a(T t2) {
        throw new IllegalStateException("GoogleApiClient is not connected yet.");
    }

    @Override
    public final void a() {
        this.a.b.clear();
        this.m = false;
        this.e = null;
        this.g = 0;
        this.l = true;
        this.n = false;
        this.p = false;
        HashMap<a.f, p> hashMap = new HashMap<a.f, p>();
        Object object = this.s.keySet().iterator();
        boolean bl2 = false;
        while (object.hasNext()) {
            a<?> a2 = object.next();
            a.f f2 = this.a.a.get(a2.c());
            boolean bl3 = a2.a().a() == 1;
            bl2 |= bl3;
            boolean bl4 = this.s.get(a2);
            if (f2.i()) {
                this.m = true;
                if (bl4) {
                    this.j.add(a2.c());
                } else {
                    this.l = false;
                }
            }
            hashMap.put(f2, new p(this, a2, bl4));
        }
        if (bl2) {
            this.m = false;
        }
        if (this.m) {
            this.r.a(System.identityHashCode(this.a.d));
            object = new w(this, null);
            this.k = this.t.a(this.c, this.a.d.c(), this.r, this.r.i(), (f.b)object, (f.c)object);
        }
        this.h = this.a.a.size();
        this.u.add(al.a().submit(new q(this, hashMap)));
    }

    @Override
    public final void a(int n2) {
        this.b(new com.google.android.gms.common.a(8, null));
    }

    @Override
    public final void a(Bundle bundle) {
        if (!this.b(1)) {
            return;
        }
        if (bundle != null) {
            this.i.putAll(bundle);
        }
        if (this.d()) {
            this.f();
        }
    }

    @Override
    public final void a(com.google.android.gms.common.a a2, a<?> a3, boolean bl2) {
        if (!this.b(1)) {
            return;
        }
        this.b(a2, a3, bl2);
        if (this.d()) {
            this.f();
        }
    }

    @Override
    public final boolean b() {
        this.h();
        this.a(true);
        this.a.a((com.google.android.gms.common.a)null);
        return true;
    }

    @Override
    public final void c() {
    }
}

