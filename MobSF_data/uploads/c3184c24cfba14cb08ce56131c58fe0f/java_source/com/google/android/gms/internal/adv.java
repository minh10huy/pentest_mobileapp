/*
 * Decompiled with CFR 0_132.
 * 
 * Could not load the following classes:
 *  android.app.Activity
 *  android.content.Context
 *  android.os.Bundle
 */
package com.google.android.gms.internal;

import android.app.Activity;
import android.content.Context;
import android.os.Bundle;
import android.support.v4.g.a;
import com.google.android.gms.common.internal.ah;
import com.google.android.gms.common.util.f;
import com.google.android.gms.internal.aab;
import com.google.android.gms.internal.aac;
import com.google.android.gms.internal.aai;
import com.google.android.gms.internal.aaw;
import com.google.android.gms.internal.aax;
import com.google.android.gms.internal.aaz;
import com.google.android.gms.internal.abb;
import com.google.android.gms.internal.abd;
import com.google.android.gms.internal.abm;
import com.google.android.gms.internal.abw;
import com.google.android.gms.internal.abx;
import com.google.android.gms.internal.acc;
import com.google.android.gms.internal.adc;
import com.google.android.gms.internal.ade;
import com.google.android.gms.internal.adt;
import com.google.android.gms.internal.adx;
import com.google.android.gms.internal.ady;
import com.google.android.gms.internal.adz;
import com.google.android.gms.internal.aez;
import com.google.android.gms.internal.afk;
import com.google.android.gms.internal.zr;
import com.google.android.gms.internal.zu;
import com.google.android.gms.internal.zy;
import com.google.android.gms.measurement.AppMeasurement;
import java.util.Map;
import java.util.concurrent.CopyOnWriteArrayList;

public final class adv
extends adc {
    protected ady a;
    private volatile adt b;
    private adt c;
    private long d;
    private final Map<Activity, ady> e = new a<Activity, ady>();
    private final CopyOnWriteArrayList<AppMeasurement.f> f = new CopyOnWriteArrayList();
    private boolean g;
    private adt h;
    private String i;

    public adv(acc acc2) {
        super(acc2);
    }

    private static String a(String object) {
        object = ((String[])(object = object.split("\\."))).length > 0 ? object[((String[])object).length - 1] : "";
        Object object2 = object;
        if (object.length() > 100) {
            object2 = object.substring(0, 100);
        }
        return object2;
    }

    /*
     * Exception decompiling
     */
    private final void a(Activity var1_1, ady var2_3, boolean var3_4) {
        // This method has failed to decompile.  When submitting a bug report, please provide this stack trace, and (if you hold appropriate legal rights) the relevant class file.
        // org.benf.cfr.reader.util.ConfusedCFRException: Tried to end blocks [1[TRYBLOCK]], but top level block is 8[UNCONDITIONALDOLOOP]
        // org.benf.cfr.reader.bytecode.analysis.opgraph.Op04StructuredStatement.processEndingBlocks(Op04StructuredStatement.java:416)
        // org.benf.cfr.reader.bytecode.analysis.opgraph.Op04StructuredStatement.buildNestedBlocks(Op04StructuredStatement.java:468)
        // org.benf.cfr.reader.bytecode.analysis.opgraph.Op03SimpleStatement.createInitialStructuredBlock(Op03SimpleStatement.java:2960)
        // org.benf.cfr.reader.bytecode.CodeAnalyser.getAnalysisInner(CodeAnalyser.java:818)
        // org.benf.cfr.reader.bytecode.CodeAnalyser.getAnalysisOrWrapFail(CodeAnalyser.java:196)
        // org.benf.cfr.reader.bytecode.CodeAnalyser.getAnalysis(CodeAnalyser.java:141)
        // org.benf.cfr.reader.entities.attributes.AttributeCode.analyse(AttributeCode.java:95)
        // org.benf.cfr.reader.entities.Method.analyse(Method.java:372)
        // org.benf.cfr.reader.entities.ClassFile.analyseMid(ClassFile.java:867)
        // org.benf.cfr.reader.entities.ClassFile.analyseTop(ClassFile.java:768)
        // org.benf.cfr.reader.Main.doJar(Main.java:141)
        // org.benf.cfr.reader.Main.main(Main.java:242)
        throw new IllegalStateException("Decompilation failed");
    }

    public static void a(adt adt2, Bundle bundle, boolean bl2) {
        if (bundle != null && adt2 != null && (!bundle.containsKey("_sc") || bl2)) {
            if (adt2.a != null) {
                bundle.putString("_sn", adt2.a);
            } else {
                bundle.remove("_sn");
            }
            bundle.putString("_sc", adt2.b);
            bundle.putLong("_si", adt2.c);
            return;
        }
        if (bundle != null && adt2 == null && bl2) {
            bundle.remove("_sn");
            bundle.remove("_sc");
            bundle.remove("_si");
        }
    }

    static /* synthetic */ void a(adv adv2, ady ady2) {
        adv2.a(ady2);
    }

    private final void a(ady ady2) {
        this.d().a(this.k().b());
        if (this.r().a(ady2.d)) {
            ady2.d = false;
        }
    }

    final ady a(Activity activity) {
        ady ady2;
        ah.a(activity);
        ady ady3 = ady2 = this.e.get((Object)activity);
        if (ady2 == null) {
            ady3 = new ady(null, adv.a(activity.getClass().getCanonicalName()), this.p().y());
            this.e.put(activity, ady3);
        }
        return ady3;
    }

    public final void a(Activity object, Bundle bundle) {
        if (bundle == null) {
            return;
        }
        if ((object = this.e.get(object)) == null) {
            return;
        }
        Bundle bundle2 = new Bundle();
        bundle2.putLong("id", object.c);
        bundle2.putString("name", object.a);
        bundle2.putString("referrer_name", object.b);
        bundle.putBundle("com.google.firebase.analytics.screen_service", bundle2);
    }

    public final void a(Activity activity, String object, String object2) {
        this.s();
        if (!abx.y()) {
            this.t().A().a("setCurrentScreen must be called from the main thread");
            return;
        }
        if (this.g) {
            this.t().A().a("Cannot call setCurrentScreen from onScreenChangeCallback");
            return;
        }
        if (this.b == null) {
            this.t().A().a("setCurrentScreen cannot be called while no activity active");
            return;
        }
        if (this.e.get((Object)activity) == null) {
            this.t().A().a("setCurrentScreen must be called with an activity in the activity lifecycle");
            return;
        }
        String string2 = object2;
        if (object2 == null) {
            string2 = adv.a(activity.getClass().getCanonicalName());
        }
        boolean bl2 = this.b.b.equals(string2);
        boolean bl3 = afk.b(this.b.a, (String)object);
        if (bl2 && bl3) {
            this.t().B().a("setCurrentScreen cannot be called with the same class and name");
            return;
        }
        if (object != null && (object.length() <= 0 || object.length() > 100)) {
            this.t().A().a("Invalid screen name length in setCurrentScreen. Length", object.length());
            return;
        }
        if (string2 != null && (string2.length() <= 0 || string2.length() > 100)) {
            this.t().A().a("Invalid class name length in setCurrentScreen. Length", string2.length());
            return;
        }
        abd abd2 = this.t().E();
        object2 = object == null ? "null" : object;
        abd2.a("Setting current screen to name, class", object2, string2);
        object = new ady((String)object, string2, this.p().y());
        this.e.put(activity, (ady)object);
        this.a(activity, (ady)object, true);
    }

    public final void a(AppMeasurement.f f2) {
        if (f2 == null) {
            this.t().A().a("Attempting to register null OnScreenChangeCallback");
            return;
        }
        this.f.remove(f2);
        this.f.add(f2);
    }

    /*
     * Enabled aggressive block sorting
     * Enabled unnecessary exception pruning
     * Enabled aggressive exception aggregation
     */
    public final void a(String string2, adt adt2) {
        this.c();
        synchronized (this) {
            if (this.i == null || this.i.equals(string2) || adt2 != null) {
                this.i = string2;
                this.h = adt2;
            }
            return;
        }
    }

    public final void b(Activity object) {
        this.a((Activity)object, this.a((Activity)object), false);
        object = this.d();
        long l2 = object.k().b();
        object.s().a(new zu((zr)object, l2));
    }

    public final void b(AppMeasurement.f f2) {
        this.f.remove(f2);
    }

    public final void c(Activity object) {
        object = this.a((Activity)object);
        this.c = this.b;
        this.d = this.k().b();
        this.b = null;
        this.s().a(new adx(this, (ady)object));
    }

    public final void d(Activity activity) {
        this.e.remove((Object)activity);
    }

    @Override
    protected final boolean w() {
        return false;
    }

    public final ady y() {
        this.Q();
        this.c();
        return this.a;
    }

    public final adt z() {
        adt adt2 = this.b;
        if (adt2 == null) {
            return null;
        }
        return new adt(adt2);
    }
}

