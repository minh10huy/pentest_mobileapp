/*
 * Decompiled with CFR 0_132.
 * 
 * Could not load the following classes:
 *  android.os.Process
 */
package com.google.android.gms.internal;

import android.os.Process;
import com.google.android.gms.internal.azy;
import com.google.android.gms.internal.b;
import com.google.android.gms.internal.bfp;
import com.google.android.gms.internal.buc;
import com.google.android.gms.internal.bwe;
import com.google.android.gms.internal.cci;
import com.google.android.gms.internal.eg;
import com.google.android.gms.internal.ua;
import com.google.android.gms.internal.yl;
import java.util.Map;
import java.util.concurrent.BlockingQueue;

public final class aii
extends Thread {
    private static final boolean a = eg.a;
    private final BlockingQueue<bwe<?>> b;
    private final BlockingQueue<bwe<?>> c;
    private final ua d;
    private final b e;
    private volatile boolean f = false;
    private final bfp g;

    public aii(BlockingQueue<bwe<?>> blockingQueue, BlockingQueue<bwe<?>> blockingQueue2, ua ua2, b b2) {
        this.b = blockingQueue;
        this.c = blockingQueue2;
        this.d = ua2;
        this.e = b2;
        this.g = new bfp(this);
    }

    static /* synthetic */ BlockingQueue a(aii aii2) {
        return aii2.c;
    }

    static /* synthetic */ b b(aii aii2) {
        return aii2.e;
    }

    private final void b() {
        bwe<?> bwe2 = this.b.take();
        bwe2.b("cache-queue-take");
        bwe2.g();
        yl yl2 = this.d.a(bwe2.e());
        if (yl2 == null) {
            bwe2.b("cache-miss");
            if (!bfp.a(this.g, bwe2)) {
                this.c.put(bwe2);
            }
            return;
        }
        if (yl2.a()) {
            bwe2.b("cache-hit-expired");
            bwe2.a(yl2);
            if (!bfp.a(this.g, bwe2)) {
                this.c.put(bwe2);
            }
            return;
        }
        bwe2.b("cache-hit");
        cci<?> cci2 = bwe2.a(new buc(yl2.a, yl2.g));
        bwe2.b("cache-hit-parsed");
        boolean bl2 = yl2.f < System.currentTimeMillis();
        if (bl2) {
            bwe2.b("cache-hit-refresh-needed");
            bwe2.a(yl2);
            cci2.d = true;
            if (!bfp.a(this.g, bwe2)) {
                this.e.a(bwe2, cci2, new azy(this, bwe2));
                return;
            }
        }
        this.e.a(bwe2, cci2);
    }

    public final void a() {
        this.f = true;
        this.interrupt();
    }

    /*
     * Enabled aggressive block sorting
     * Enabled unnecessary exception pruning
     * Enabled aggressive exception aggregation
     */
    @Override
    public final void run() {
        if (a) {
            eg.a("start new dispatcher", new Object[0]);
        }
        Process.setThreadPriority((int)10);
        this.d.a();
        do {
            try {
                do {
                    this.b();
                } while (true);
            }
            catch (InterruptedException interruptedException) {}
        } while (!this.f);
    }
}

