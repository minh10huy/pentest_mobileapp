/*
 * Decompiled with CFR 0_132.
 * 
 * Could not load the following classes:
 *  android.annotation.TargetApi
 *  android.content.Context
 *  android.content.SharedPreferences
 *  android.content.SharedPreferences$Editor
 *  android.os.Build
 *  android.os.Build$VERSION
 *  android.os.Bundle
 *  android.security.NetworkSecurityPolicy
 *  org.json.JSONArray
 *  org.json.JSONException
 *  org.json.JSONObject
 */
package com.google.android.gms.internal;

import android.annotation.TargetApi;
import android.content.Context;
import android.content.SharedPreferences;
import android.os.Build;
import android.os.Bundle;
import android.security.NetworkSecurityPolicy;
import com.google.android.gms.ads.internal.av;
import com.google.android.gms.internal.ak;
import com.google.android.gms.internal.gp;
import com.google.android.gms.internal.he;
import com.google.android.gms.internal.hh;
import com.google.android.gms.internal.hj;
import com.google.android.gms.internal.hl;
import com.google.android.gms.internal.lf;
import java.util.Collections;
import java.util.Set;
import java.util.concurrent.CancellationException;
import java.util.concurrent.CopyOnWriteArraySet;
import java.util.concurrent.ExecutionException;
import java.util.concurrent.TimeUnit;
import java.util.concurrent.TimeoutException;
import org.json.JSONArray;
import org.json.JSONException;
import org.json.JSONObject;

@ak
public final class hg {
    SharedPreferences.Editor a;
    private final Object b = new Object();
    private lf<?> c;
    private CopyOnWriteArraySet<hl> d = new CopyOnWriteArraySet();
    private SharedPreferences e;
    private boolean f = false;
    private boolean g = true;
    private String h;
    private String i;
    private boolean j = false;
    private String k = "";
    private long l = 0L;
    private long m = 0L;
    private long n = 0L;
    private int o = -1;
    private int p = 0;
    private Set<String> q = Collections.emptySet();
    private JSONObject r = new JSONObject();
    private boolean s = true;
    private boolean t = true;

    static /* synthetic */ int a(hg hg2, int n2) {
        hg2.p = n2;
        return n2;
    }

    static /* synthetic */ long a(hg hg2, long l2) {
        hg2.l = l2;
        return l2;
    }

    static /* synthetic */ SharedPreferences a(hg hg2, SharedPreferences sharedPreferences) {
        hg2.e = sharedPreferences;
        return sharedPreferences;
    }

    static /* synthetic */ Object a(hg hg2) {
        return hg2.b;
    }

    static /* synthetic */ String a(hg hg2, String string2) {
        hg2.h = string2;
        return string2;
    }

    static /* synthetic */ Set a(hg hg2, Set set) {
        hg2.q = set;
        return set;
    }

    static /* synthetic */ JSONObject a(hg hg2, JSONObject jSONObject) {
        hg2.r = jSONObject;
        return jSONObject;
    }

    private final void a(Bundle bundle) {
        new hj(this, bundle).d();
    }

    static /* synthetic */ void a(hg hg2, Bundle bundle) {
        hg2.a(bundle);
    }

    static /* synthetic */ boolean a(hg hg2, boolean bl2) {
        hg2.f = bl2;
        return bl2;
    }

    static /* synthetic */ int b(hg hg2, int n2) {
        hg2.o = n2;
        return n2;
    }

    static /* synthetic */ long b(hg hg2, long l2) {
        hg2.m = l2;
        return l2;
    }

    static /* synthetic */ String b(hg hg2, String string2) {
        hg2.i = string2;
        return string2;
    }

    static /* synthetic */ boolean b(hg hg2) {
        return hg.n();
    }

    static /* synthetic */ boolean b(hg hg2, boolean bl2) {
        hg2.g = bl2;
        return bl2;
    }

    static /* synthetic */ long c(hg hg2, long l2) {
        hg2.n = l2;
        return l2;
    }

    static /* synthetic */ String c(hg hg2, String string2) {
        hg2.k = string2;
        return string2;
    }

    static /* synthetic */ boolean c(hg hg2) {
        return hg2.g;
    }

    static /* synthetic */ boolean c(hg hg2, boolean bl2) {
        hg2.s = bl2;
        return bl2;
    }

    static /* synthetic */ SharedPreferences d(hg hg2) {
        return hg2.e;
    }

    static /* synthetic */ boolean d(hg hg2, boolean bl2) {
        hg2.j = bl2;
        return bl2;
    }

    static /* synthetic */ boolean e(hg hg2) {
        return hg2.s;
    }

    static /* synthetic */ boolean e(hg hg2, boolean bl2) {
        hg2.t = bl2;
        return bl2;
    }

    static /* synthetic */ String f(hg hg2) {
        return hg2.h;
    }

    static /* synthetic */ boolean g(hg hg2) {
        return hg2.j;
    }

    static /* synthetic */ boolean h(hg hg2) {
        return hg2.t;
    }

    static /* synthetic */ String i(hg hg2) {
        return hg2.i;
    }

    static /* synthetic */ int j(hg hg2) {
        return hg2.p;
    }

    static /* synthetic */ String k(hg hg2) {
        return hg2.k;
    }

    static /* synthetic */ long l(hg hg2) {
        return hg2.l;
    }

    static /* synthetic */ long m(hg hg2) {
        return hg2.m;
    }

    static /* synthetic */ int n(hg hg2) {
        return hg2.o;
    }

    @TargetApi(value=23)
    private static boolean n() {
        if (Build.VERSION.SDK_INT >= 23 && !NetworkSecurityPolicy.getInstance().isCleartextTrafficPermitted()) {
            return true;
        }
        return false;
    }

    static /* synthetic */ long o(hg hg2) {
        return hg2.n;
    }

    private final void o() {
        if (this.c == null) {
            return;
        }
        if (this.c.isDone()) {
            return;
        }
        try {
            this.c.get(1L, TimeUnit.SECONDS);
            return;
        }
        catch (CancellationException | ExecutionException | TimeoutException exception) {
            he.b("Fail to initialize AdSharedPreferenceManager.", exception);
            return;
        }
        catch (InterruptedException interruptedException) {
            Thread.currentThread().interrupt();
            he.c("Interrupted while waiting for preferences loaded.", interruptedException);
            return;
        }
    }

    /*
     * Enabled aggressive block sorting
     * Enabled unnecessary exception pruning
     * Enabled aggressive exception aggregation
     */
    private final Bundle p() {
        Bundle bundle = new Bundle();
        bundle.putBoolean("listener_registration_bundle", true);
        Object object = this.b;
        synchronized (object) {
            bundle.putBoolean("use_https", this.g);
            bundle.putBoolean("content_url_opted_out", this.s);
            bundle.putBoolean("content_vertical_opted_out", this.t);
            bundle.putBoolean("auto_collect_location", this.j);
            bundle.putInt("version_code", this.p);
            bundle.putStringArray("never_pool_slots", this.q.toArray(new String[this.q.size()]));
            bundle.putString("app_settings_json", this.k);
            bundle.putLong("app_settings_last_update_ms", this.l);
            bundle.putLong("app_last_background_time_ms", this.m);
            bundle.putInt("request_in_session_count", this.o);
            bundle.putLong("first_ad_req_time_ms", this.n);
            bundle.putString("native_advanced_settings", this.r.toString());
            if (this.h != null) {
                bundle.putString("content_url_hashes", this.h);
            }
            if (this.i != null) {
                bundle.putString("content_vertical_hashes", this.i);
            }
            return bundle;
        }
    }

    static /* synthetic */ Set p(hg hg2) {
        return hg2.q;
    }

    static /* synthetic */ Bundle q(hg hg2) {
        return hg2.p();
    }

    static /* synthetic */ CopyOnWriteArraySet r(hg hg2) {
        return hg2.d;
    }

    /*
     * Enabled aggressive block sorting
     * Enabled unnecessary exception pruning
     * Enabled aggressive exception aggregation
     */
    public final void a(int n2) {
        this.o();
        Object object = this.b;
        synchronized (object) {
            if (this.p == n2) {
                return;
            }
            this.p = n2;
            if (this.a != null) {
                this.a.putInt("version_code", n2);
                this.a.apply();
            }
            Bundle bundle = new Bundle();
            bundle.putInt("version_code", n2);
            this.a(bundle);
            return;
        }
    }

    /*
     * Enabled aggressive block sorting
     * Enabled unnecessary exception pruning
     * Enabled aggressive exception aggregation
     */
    public final void a(long l2) {
        this.o();
        Object object = this.b;
        synchronized (object) {
            if (this.m == l2) {
                return;
            }
            this.m = l2;
            if (this.a != null) {
                this.a.putLong("app_last_background_time_ms", l2);
                this.a.apply();
            }
            Bundle bundle = new Bundle();
            bundle.putLong("app_last_background_time_ms", l2);
            this.a(bundle);
            return;
        }
    }

    public final void a(Context context) {
        if (context.getApplicationContext() != null) {
            context = context.getApplicationContext();
        }
        this.c = (lf)new hh(this, context).d();
    }

    /*
     * Enabled aggressive block sorting
     * Enabled unnecessary exception pruning
     * Enabled aggressive exception aggregation
     */
    public final void a(hl hl2) {
        Object object = this.b;
        synchronized (object) {
            if (this.c != null && this.c.isDone()) {
                hl2.a(this.p());
            }
            this.d.add(hl2);
            return;
        }
    }

    /*
     * Unable to fully structure code
     * Enabled aggressive block sorting
     * Enabled unnecessary exception pruning
     * Enabled aggressive exception aggregation
     * Converted monitor instructions to comments
     * Lifted jumps to return sites
     */
    public final void a(String var1_1) {
        this.o();
        var2_3 = this.b;
        // MONITORENTER : var2_3
        if (var1_1 == null) ** GOTO lbl17
        if (var1_1.equals(this.h)) {
            return;
        }
        this.h = var1_1;
        if (this.a != null) {
            this.a.putString("content_url_hashes", var1_1);
            this.a.apply();
        }
        var3_4 = new Bundle();
        var3_4.putString("content_url_hashes", var1_1);
        this.a(var3_4);
        // MONITOREXIT : var2_3
        return;
lbl17: // 1 sources:
        // MONITOREXIT : var2_3
        return;
    }

    /*
     * Enabled aggressive block sorting
     * Enabled unnecessary exception pruning
     * Enabled aggressive exception aggregation
     */
    public final void a(String string2, String string3, boolean bl2) {
        this.o();
        Object object = this.b;
        synchronized (object) {
            int n2;
            JSONArray jSONArray;
            JSONArray jSONArray2 = jSONArray = this.r.optJSONArray(string2);
            if (jSONArray == null) {
                jSONArray2 = new JSONArray();
            }
            int n3 = jSONArray2.length();
            int n4 = 0;
            do {
                n2 = n3;
                if (n4 >= jSONArray2.length()) break;
                jSONArray = jSONArray2.optJSONObject(n4);
                if (jSONArray == null) {
                    return;
                }
                if (string3.equals(jSONArray.optString("template_id"))) {
                    if (bl2 && jSONArray.optBoolean("uses_media_view", false) == bl2) {
                        return;
                    }
                    n2 = n4;
                    break;
                }
                ++n4;
            } while (true);
            try {
                jSONArray = new JSONObject();
                jSONArray.put("template_id", (Object)string3);
                jSONArray.put("uses_media_view", bl2);
                jSONArray.put("timestamp_ms", av.l().a());
                jSONArray2.put(n2, (Object)jSONArray);
                this.r.put(string2, (Object)jSONArray2);
            }
            catch (JSONException jSONException) {
                he.c("Could not update native advanced settings", (Throwable)jSONException);
            }
            if (this.a != null) {
                this.a.putString("native_advanced_settings", this.r.toString());
                this.a.apply();
            }
            string2 = new Bundle();
            string2.putString("native_advanced_settings", this.r.toString());
            this.a((Bundle)string2);
            return;
        }
    }

    /*
     * Enabled aggressive block sorting
     * Enabled unnecessary exception pruning
     * Enabled aggressive exception aggregation
     */
    public final void a(boolean bl2) {
        this.o();
        Object object = this.b;
        synchronized (object) {
            if (this.g == bl2) {
                return;
            }
            this.g = bl2;
            if (this.a != null) {
                this.a.putBoolean("use_https", bl2);
                this.a.apply();
            }
            if (!this.f) {
                Bundle bundle = new Bundle();
                bundle.putBoolean("use_https", bl2);
                this.a(bundle);
            }
            return;
        }
    }

    /*
     * Enabled aggressive block sorting
     * Enabled unnecessary exception pruning
     * Enabled aggressive exception aggregation
     */
    public final boolean a() {
        this.o();
        Object object = this.b;
        synchronized (object) {
            if (this.g) return true;
            if (!this.f) return false;
            return true;
        }
    }

    /*
     * Enabled aggressive block sorting
     * Enabled unnecessary exception pruning
     * Enabled aggressive exception aggregation
     */
    public final void b(int n2) {
        this.o();
        Object object = this.b;
        synchronized (object) {
            if (this.o == n2) {
                return;
            }
            this.o = n2;
            if (this.a != null) {
                this.a.putInt("request_in_session_count", n2);
                this.a.apply();
            }
            Bundle bundle = new Bundle();
            bundle.putInt("request_in_session_count", n2);
            this.a(bundle);
            return;
        }
    }

    /*
     * Enabled aggressive block sorting
     * Enabled unnecessary exception pruning
     * Enabled aggressive exception aggregation
     */
    public final void b(long l2) {
        this.o();
        Object object = this.b;
        synchronized (object) {
            if (this.n == l2) {
                return;
            }
            this.n = l2;
            if (this.a != null) {
                this.a.putLong("first_ad_req_time_ms", l2);
                this.a.apply();
            }
            Bundle bundle = new Bundle();
            bundle.putLong("first_ad_req_time_ms", l2);
            this.a(bundle);
            return;
        }
    }

    /*
     * Unable to fully structure code
     * Enabled aggressive block sorting
     * Enabled unnecessary exception pruning
     * Enabled aggressive exception aggregation
     * Converted monitor instructions to comments
     * Lifted jumps to return sites
     */
    public final void b(String var1_1) {
        this.o();
        var2_3 = this.b;
        // MONITORENTER : var2_3
        if (var1_1 == null) ** GOTO lbl17
        if (var1_1.equals(this.i)) {
            return;
        }
        this.i = var1_1;
        if (this.a != null) {
            this.a.putString("content_vertical_hashes", var1_1);
            this.a.apply();
        }
        var3_4 = new Bundle();
        var3_4.putString("content_vertical_hashes", var1_1);
        this.a(var3_4);
        // MONITOREXIT : var2_3
        return;
lbl17: // 1 sources:
        // MONITOREXIT : var2_3
        return;
    }

    /*
     * Enabled aggressive block sorting
     * Enabled unnecessary exception pruning
     * Enabled aggressive exception aggregation
     */
    public final void b(boolean bl2) {
        this.o();
        Object object = this.b;
        synchronized (object) {
            if (this.s == bl2) {
                return;
            }
            this.s = bl2;
            if (this.a != null) {
                this.a.putBoolean("content_url_opted_out", bl2);
                this.a.apply();
            }
            Bundle bundle = new Bundle();
            bundle.putBoolean("content_url_opted_out", this.s);
            bundle.putBoolean("content_vertical_opted_out", this.t);
            this.a(bundle);
            return;
        }
    }

    /*
     * Enabled aggressive block sorting
     * Enabled unnecessary exception pruning
     * Enabled aggressive exception aggregation
     */
    public final boolean b() {
        this.o();
        Object object = this.b;
        synchronized (object) {
            return this.s;
        }
    }

    /*
     * Enabled aggressive block sorting
     * Enabled unnecessary exception pruning
     * Enabled aggressive exception aggregation
     */
    public final String c() {
        this.o();
        Object object = this.b;
        synchronized (object) {
            return this.h;
        }
    }

    /*
     * Enabled aggressive block sorting
     * Enabled unnecessary exception pruning
     * Enabled aggressive exception aggregation
     */
    public final void c(String string2) {
        this.o();
        Object object = this.b;
        synchronized (object) {
            if (this.q.contains(string2)) {
                return;
            }
            this.q.add(string2);
            if (this.a != null) {
                this.a.putStringSet("never_pool_slots", this.q);
                this.a.apply();
            }
            string2 = new Bundle();
            string2.putStringArray("never_pool_slots", this.q.toArray(new String[this.q.size()]));
            this.a((Bundle)string2);
            return;
        }
    }

    /*
     * Enabled aggressive block sorting
     * Enabled unnecessary exception pruning
     * Enabled aggressive exception aggregation
     */
    public final void c(boolean bl2) {
        this.o();
        Object object = this.b;
        synchronized (object) {
            if (this.t == bl2) {
                return;
            }
            this.t = bl2;
            if (this.a != null) {
                this.a.putBoolean("content_vertical_opted_out", bl2);
                this.a.apply();
            }
            Bundle bundle = new Bundle();
            bundle.putBoolean("content_url_opted_out", this.s);
            bundle.putBoolean("content_vertical_opted_out", this.t);
            this.a(bundle);
            return;
        }
    }

    /*
     * Enabled aggressive block sorting
     * Enabled unnecessary exception pruning
     * Enabled aggressive exception aggregation
     */
    public final void d(String string2) {
        this.o();
        Object object = this.b;
        synchronized (object) {
            if (!this.q.contains(string2)) {
                return;
            }
            this.q.remove(string2);
            if (this.a != null) {
                this.a.putStringSet("never_pool_slots", this.q);
                this.a.apply();
            }
            string2 = new Bundle();
            string2.putStringArray("never_pool_slots", this.q.toArray(new String[this.q.size()]));
            this.a((Bundle)string2);
            return;
        }
    }

    /*
     * Enabled aggressive block sorting
     * Enabled unnecessary exception pruning
     * Enabled aggressive exception aggregation
     */
    public final void d(boolean bl2) {
        this.o();
        Object object = this.b;
        synchronized (object) {
            if (this.j == bl2) {
                return;
            }
            this.j = bl2;
            if (this.a != null) {
                this.a.putBoolean("auto_collect_location", bl2);
                this.a.apply();
            }
            Bundle bundle = new Bundle();
            bundle.putBoolean("auto_collect_location", bl2);
            this.a(bundle);
            return;
        }
    }

    /*
     * Enabled aggressive block sorting
     * Enabled unnecessary exception pruning
     * Enabled aggressive exception aggregation
     */
    public final boolean d() {
        this.o();
        Object object = this.b;
        synchronized (object) {
            return this.t;
        }
    }

    /*
     * Enabled aggressive block sorting
     * Enabled unnecessary exception pruning
     * Enabled aggressive exception aggregation
     */
    public final String e() {
        this.o();
        Object object = this.b;
        synchronized (object) {
            return this.i;
        }
    }

    /*
     * Enabled aggressive block sorting
     * Enabled unnecessary exception pruning
     * Enabled aggressive exception aggregation
     */
    public final boolean e(String string2) {
        this.o();
        Object object = this.b;
        synchronized (object) {
            return this.q.contains(string2);
        }
    }

    /*
     * Enabled aggressive block sorting
     * Enabled unnecessary exception pruning
     * Enabled aggressive exception aggregation
     */
    public final void f(String string2) {
        this.o();
        Object object = this.b;
        synchronized (object) {
            long l2;
            this.l = l2 = av.l().a();
            if (string2 != null && !string2.equals(this.k)) {
                this.k = string2;
                if (this.a != null) {
                    this.a.putString("app_settings_json", string2);
                    this.a.putLong("app_settings_last_update_ms", l2);
                    this.a.apply();
                }
                Bundle bundle = new Bundle();
                bundle.putString("app_settings_json", string2);
                bundle.putLong("app_settings_last_update_ms", l2);
                this.a(bundle);
                return;
            }
            return;
        }
    }

    /*
     * Enabled aggressive block sorting
     * Enabled unnecessary exception pruning
     * Enabled aggressive exception aggregation
     */
    public final boolean f() {
        this.o();
        Object object = this.b;
        synchronized (object) {
            return this.j;
        }
    }

    /*
     * Enabled aggressive block sorting
     * Enabled unnecessary exception pruning
     * Enabled aggressive exception aggregation
     */
    public final int g() {
        this.o();
        Object object = this.b;
        synchronized (object) {
            return this.p;
        }
    }

    /*
     * Enabled aggressive block sorting
     * Enabled unnecessary exception pruning
     * Enabled aggressive exception aggregation
     */
    public final gp h() {
        this.o();
        Object object = this.b;
        synchronized (object) {
            return new gp(this.k, this.l);
        }
    }

    /*
     * Enabled aggressive block sorting
     * Enabled unnecessary exception pruning
     * Enabled aggressive exception aggregation
     */
    public final long i() {
        this.o();
        Object object = this.b;
        synchronized (object) {
            return this.m;
        }
    }

    /*
     * Enabled aggressive block sorting
     * Enabled unnecessary exception pruning
     * Enabled aggressive exception aggregation
     */
    public final int j() {
        this.o();
        Object object = this.b;
        synchronized (object) {
            return this.o;
        }
    }

    /*
     * Enabled aggressive block sorting
     * Enabled unnecessary exception pruning
     * Enabled aggressive exception aggregation
     */
    public final long k() {
        this.o();
        Object object = this.b;
        synchronized (object) {
            return this.n;
        }
    }

    /*
     * Enabled aggressive block sorting
     * Enabled unnecessary exception pruning
     * Enabled aggressive exception aggregation
     */
    public final JSONObject l() {
        this.o();
        Object object = this.b;
        synchronized (object) {
            return this.r;
        }
    }

    /*
     * Enabled aggressive block sorting
     * Enabled unnecessary exception pruning
     * Enabled aggressive exception aggregation
     */
    public final void m() {
        this.o();
        Object object = this.b;
        synchronized (object) {
            this.r = new JSONObject();
            if (this.a != null) {
                this.a.remove("native_advanced_settings");
                this.a.apply();
            }
            Bundle bundle = new Bundle();
            bundle.putString("native_advanced_settings", "{}");
            this.a(bundle);
            return;
        }
    }
}

