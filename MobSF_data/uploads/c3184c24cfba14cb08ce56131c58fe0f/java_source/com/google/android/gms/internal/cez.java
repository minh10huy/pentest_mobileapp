/*
 * Decompiled with CFR 0_132.
 * 
 * Could not load the following classes:
 *  android.content.Context
 *  android.graphics.Color
 *  android.graphics.drawable.Drawable
 *  android.net.Uri
 *  android.os.Handler
 *  android.os.RemoteException
 *  android.text.TextUtils
 *  org.json.JSONArray
 *  org.json.JSONException
 *  org.json.JSONObject
 */
package com.google.android.gms.internal;

import android.content.Context;
import android.graphics.Color;
import android.graphics.drawable.Drawable;
import android.net.Uri;
import android.os.Handler;
import android.os.RemoteException;
import android.text.TextUtils;
import com.google.android.gms.ads.internal.ad;
import com.google.android.gms.ads.internal.gmsg.aa;
import com.google.android.gms.internal.agk;
import com.google.android.gms.internal.ak;
import com.google.android.gms.internal.bj;
import com.google.android.gms.internal.bn;
import com.google.android.gms.internal.boc;
import com.google.android.gms.internal.bp;
import com.google.android.gms.internal.bpu;
import com.google.android.gms.internal.bpy;
import com.google.android.gms.internal.bqj;
import com.google.android.gms.internal.bsz;
import com.google.android.gms.internal.btk;
import com.google.android.gms.internal.btx;
import com.google.android.gms.internal.buk;
import com.google.android.gms.internal.bum;
import com.google.android.gms.internal.bur;
import com.google.android.gms.internal.buy;
import com.google.android.gms.internal.buz;
import com.google.android.gms.internal.bva;
import com.google.android.gms.internal.bvc;
import com.google.android.gms.internal.bvl;
import com.google.android.gms.internal.bwt;
import com.google.android.gms.internal.bxd;
import com.google.android.gms.internal.c;
import com.google.android.gms.internal.caw;
import com.google.android.gms.internal.cax;
import com.google.android.gms.internal.caz;
import com.google.android.gms.internal.cbq;
import com.google.android.gms.internal.cey;
import com.google.android.gms.internal.cfa;
import com.google.android.gms.internal.d;
import com.google.android.gms.internal.e;
import com.google.android.gms.internal.f;
import com.google.android.gms.internal.fk;
import com.google.android.gms.internal.gl;
import com.google.android.gms.internal.gm;
import com.google.android.gms.internal.h;
import com.google.android.gms.internal.he;
import com.google.android.gms.internal.hm;
import com.google.android.gms.internal.hs;
import com.google.android.gms.internal.i;
import com.google.android.gms.internal.jb;
import com.google.android.gms.internal.jh;
import com.google.android.gms.internal.km;
import com.google.android.gms.internal.ku;
import com.google.android.gms.internal.lf;
import com.google.android.gms.internal.lk;
import com.google.android.gms.internal.lq;
import com.google.android.gms.internal.nu;
import com.google.android.gms.internal.p;
import com.google.android.gms.internal.q;
import com.google.android.gms.internal.r;
import com.google.android.gms.internal.s;
import java.util.ArrayList;
import java.util.Arrays;
import java.util.Iterator;
import java.util.List;
import java.util.concurrent.Callable;
import java.util.concurrent.CancellationException;
import java.util.concurrent.ExecutionException;
import java.util.concurrent.Executor;
import java.util.concurrent.Future;
import java.util.concurrent.ThreadPoolExecutor;
import java.util.concurrent.TimeUnit;
import java.util.concurrent.TimeoutException;
import java.util.concurrent.atomic.AtomicInteger;
import org.json.JSONArray;
import org.json.JSONException;
import org.json.JSONObject;

@ak
public final class cez
implements Callable<gl> {
    private static long a = 10L;
    private final Context b;
    private final jb c;
    private final ad d;
    private final agk e;
    private final p f;
    private final Object g = new Object();
    private final gm h;
    private final btx i;
    private boolean j;
    private int k;
    private List<String> l;
    private JSONObject m;
    private String n;

    public cez(Context context, ad ad2, jb jb2, agk agk2, gm gm2, btx btx2) {
        this.b = context;
        this.d = ad2;
        this.c = jb2;
        this.h = gm2;
        this.e = agk2;
        this.i = btx2;
        this.f = ad2.G();
        this.j = false;
        this.k = -2;
        this.l = null;
        this.n = null;
    }

    static /* synthetic */ ad a(cez cez2) {
        return cez2.d;
    }

    /*
     * Loose catch block
     * Enabled aggressive block sorting
     * Enabled unnecessary exception pruning
     * Enabled aggressive exception aggregation
     * Lifted jumps to return sites
     */
    private final gl a() {
        Object object;
        Object object2;
        Object object3;
        String string2;
        block17 : {
            block15 : {
                block19 : {
                    block20 : {
                        boolean bl2;
                        block18 : {
                            boolean bl3;
                            block16 : {
                                block11 : {
                                    block10 : {
                                        block14 : {
                                            String string3;
                                            void var3_8;
                                            try {
                                                block13 : {
                                                    block12 : {
                                                        string2 = this.d.h_();
                                                        if (this.b()) break block10;
                                                        new lq();
                                                        new cey();
                                                        object3 = new JSONObject(this.h.b.b);
                                                        object2 = new JSONObject(this.h.b.b);
                                                        if (object2.length() == 0) break block12;
                                                        object2 = (object2 = object2.optJSONArray("ads")) != null ? object2.optJSONObject(0) : null;
                                                        if (object2 != null && object2.length() != 0) break block13;
                                                    }
                                                    this.a(3);
                                                }
                                                if (!(object2 = this.f.a((JSONObject)object3).get(a, TimeUnit.SECONDS)).optBoolean("success", false)) break block10;
                                                object3 = object2.getJSONObject("json").optJSONArray("ads").getJSONObject(0);
                                                break block11;
                                            }
                                            catch (Exception exception) {
                                                string3 = "Error occured while doing native ads initialization.";
                                            }
                                            catch (TimeoutException timeoutException) {
                                                string3 = "Timeout when loading native ad.";
                                            }
                                            catch (JSONException jSONException) {
                                                string3 = "Malformed native JSON response.";
                                            }
                                            he.c(string3, (Throwable)var3_8);
                                            break block14;
                                            catch (InterruptedException | CancellationException | ExecutionException exception) {}
                                        }
                                        if (this.j) return this.a((bva)null);
                                        this.a(0);
                                        return this.a((bva)null);
                                    }
                                    object3 = null;
                                }
                                if (this.b() || object3 == null) break block15;
                                object2 = object3.getString("template_id");
                                bl2 = this.h.a.y != null ? this.h.a.y.b : false;
                                bl3 = this.h.a.y != null ? this.h.a.y.d : false;
                                if (!"2".equals(object2)) break block16;
                                object2 = new q(bl2, bl3, this.h.j);
                                break block17;
                            }
                            if (!"1".equals(object2)) break block18;
                            object2 = new r(bl2, bl3, this.h.j);
                            break block17;
                        }
                        if (!"3".equals(object2)) break block19;
                        object2 = object3.getString("custom_template_id");
                        object = new lq();
                        hs.a.post((Runnable)new cfa(this, (lq)object, (String)object2));
                        if (object.get(a, TimeUnit.SECONDS) == null) break block20;
                        object2 = new s(bl2);
                        break block17;
                    }
                    object2 = String.valueOf(object3.getString("custom_template_id"));
                    object2 = object2.length() != 0 ? "No handler for custom template: ".concat((String)object2) : new String("No handler for custom template: ");
                    he.c((String)object2);
                    break block15;
                }
                this.a(0);
            }
            object2 = null;
        }
        if (!this.b() && object2 != null && object3 != null) {
            JSONObject jSONObject = object3.getJSONObject("tracking_urls_and_actions");
            object = cez.c(jSONObject, "impression_tracking_urls");
            object = object == null ? null : Arrays.asList(object);
            this.l = object;
            this.m = jSONObject.optJSONObject("active_view");
            this.n = object3.optString("debug_signals");
            object2 = object2.a(this, (JSONObject)object3);
            object2.a(new bvc(this.b, this.d, this.f, this.e, (JSONObject)object3, (bva)object2, this.h.a.k, string2));
        } else {
            object2 = null;
        }
        if (!(object2 instanceof bur)) return this.a((bva)object2);
        object = (String[])object2;
        object3 = new cey();
        object = new c(this, (bur)object);
        object3.a = object;
        this.f.a("/nativeAdCustomClick", object);
        return this.a((bva)object2);
    }

    /*
     * Enabled aggressive block sorting
     * Enabled unnecessary exception pruning
     * Enabled aggressive exception aggregation
     * Converted monitor instructions to comments
     * Lifted jumps to return sites
     */
    private final gl a(bva bva2) {
        Object object = this.g;
        // MONITORENTER : object
        int n2 = this.k;
        if (bva2 == null && this.k == -2) {
            n2 = 0;
        }
        // MONITOREXIT : object
        if (n2 == -2) return new gl(this.h.a.c, null, this.h.b.c, n2, this.h.b.e, this.l, this.h.b.k, this.h.b.j, this.h.a.i, false, null, null, null, null, null, 0L, this.h.d, this.h.b.f, this.h.f, this.h.g, this.h.b.n, this.m, bva2, null, null, null, this.h.b.D, this.h.b.E, null, this.h.b.H, this.n, this.h.i, this.h.b.O, this.h.j);
        bva2 = null;
        return new gl(this.h.a.c, null, this.h.b.c, n2, this.h.b.e, this.l, this.h.b.k, this.h.b.j, this.h.a.i, false, null, null, null, null, null, 0L, this.h.d, this.h.b.f, this.h.f, this.h.g, this.h.b.n, this.m, bva2, null, null, null, this.h.b.D, this.h.b.E, null, this.h.b.H, this.n, this.h.i, this.h.b.O, this.h.j);
    }

    private final lf<bum> a(JSONObject jSONObject, boolean bl2, boolean bl3) {
        String string2 = bl2 ? jSONObject.getString("url") : jSONObject.optString("url");
        double d2 = jSONObject.optDouble("scale", 1.0);
        boolean bl4 = jSONObject.optBoolean("is_transparent", true);
        if (TextUtils.isEmpty((CharSequence)string2)) {
            this.a(0, bl2);
            return ku.a(null);
        }
        if (bl3) {
            return ku.a(new bum(null, Uri.parse((String)string2), d2));
        }
        return this.c.a(string2, new e(this, bl2, d2, bl4, string2));
    }

    static nu a(lf<nu> object) {
        try {
            bsz<Integer> bsz2 = btk.bV;
            object = object.get(bqj.f().a(bsz2).intValue(), TimeUnit.SECONDS);
            return object;
        }
        catch (CancellationException | ExecutionException | TimeoutException exception) {
            he.c("Exception occurred while waiting for video to load", exception);
        }
        catch (InterruptedException interruptedException) {
            he.c("InterruptedException occurred while waiting for video to load", interruptedException);
            Thread.currentThread().interrupt();
        }
        return null;
    }

    static /* synthetic */ List a(List list) {
        return cez.c(list);
    }

    /*
     * Enabled aggressive block sorting
     * Enabled unnecessary exception pruning
     * Enabled aggressive exception aggregation
     */
    private final void a(int n2) {
        Object object = this.g;
        synchronized (object) {
            this.j = true;
            this.k = n2;
            return;
        }
    }

    /*
     * Enabled force condition propagation
     * Lifted jumps to return sites
     */
    private final void a(bwt bwt2, String string2) {
        Object object;
        try {
            object = this.d.b(bwt2.l());
            if (object == null) return;
        }
        catch (RemoteException remoteException) {
            object = new StringBuilder(String.valueOf(string2).length() + 40);
            object.append("Failed to call onCustomClick for asset ");
            object.append(string2);
            object.append(".");
            he.c(object.toString(), (Throwable)remoteException);
            return;
        }
        object.a(bwt2, string2);
    }

    static /* synthetic */ void a(cez cez2, bwt bwt2, String string2) {
        cez2.a(bwt2, string2);
    }

    private static <V> lf<List<V>> b(List<lf<V>> list) {
        lq<List<V>> lq2 = new lq<List<V>>();
        int n2 = list.size();
        AtomicInteger atomicInteger = new AtomicInteger(0);
        Iterator<lf<V>> iterator = list.iterator();
        while (iterator.hasNext()) {
            iterator.next().a(new f(atomicInteger, n2, lq2, list), hm.a);
        }
        return lq2;
    }

    /*
     * Enabled force condition propagation
     * Lifted jumps to return sites
     */
    private static Integer b(JSONObject jSONObject, String string2) {
        int n2;
        try {
            jSONObject = jSONObject.getJSONObject(string2);
            n2 = Color.rgb((int)jSONObject.getInt("r"), (int)jSONObject.getInt("g"), (int)jSONObject.getInt("b"));
        }
        catch (JSONException jSONException) {
            return null;
        }
        return n2;
    }

    /*
     * Enabled aggressive block sorting
     * Enabled unnecessary exception pruning
     * Enabled aggressive exception aggregation
     */
    private final boolean b() {
        Object object = this.g;
        synchronized (object) {
            return this.j;
        }
    }

    private static <V> List<V> c(List<lf<V>> object) {
        ArrayList arrayList = new ArrayList();
        object = object.iterator();
        while (object.hasNext()) {
            Object v2 = ((lf)object.next()).get();
            if (v2 == null) continue;
            arrayList.add(v2);
        }
        return arrayList;
    }

    private static String[] c(JSONObject jSONObject, String arrstring) {
        if ((jSONObject = jSONObject.optJSONArray((String)arrstring)) == null) {
            return null;
        }
        arrstring = new String[jSONObject.length()];
        for (int i2 = 0; i2 < jSONObject.length(); ++i2) {
            arrstring[i2] = jSONObject.getString(i2);
        }
        return arrstring;
    }

    public final lf<buk> a(JSONObject object) {
        JSONObject jSONObject = object.optJSONObject("attribution");
        if (jSONObject == null) {
            return ku.a(null);
        }
        String string2 = jSONObject.optString("text");
        int n2 = jSONObject.optInt("text_size", -1);
        Integer n3 = cez.b(jSONObject, "text_color");
        Integer n4 = cez.b(jSONObject, "bg_color");
        int n5 = jSONObject.optInt("animation_ms", 1000);
        int n6 = jSONObject.optInt("presentation_ms", 4000);
        int n7 = this.h.a.y != null && this.h.a.y.a >= 2 ? this.h.a.y.e : 1;
        boolean bl2 = jSONObject.optBoolean("allow_pub_rendering");
        object = new ArrayList();
        if (jSONObject.optJSONArray("images") != null) {
            object = this.a(jSONObject, "images", false, false, true);
        } else {
            object.add(this.a(jSONObject, "image", false, false));
        }
        return ku.a(cez.b(object), new d(this, string2, n4, n3, n2, n6, n5, n7, bl2), (Executor)hm.a);
    }

    public final lf<nu> a(JSONObject jSONObject, String object) {
        if ((jSONObject = jSONObject.optJSONObject((String)object)) == null) {
            return ku.a(null);
        }
        if (TextUtils.isEmpty((CharSequence)jSONObject.optString("vast_xml"))) {
            he.e("Required field 'vast_xml' is missing");
            return ku.a(null);
        }
        object = new h(this.b, this.e, this.h, this.i, this.d);
        lq<nu> lq2 = new lq<nu>();
        lk.a.execute(new i((h)object, jSONObject, lq2));
        return lq2;
    }

    public final lf<bum> a(JSONObject jSONObject, String string2, boolean bl2, boolean bl3) {
        jSONObject = bl2 ? jSONObject.getJSONObject(string2) : jSONObject.optJSONObject(string2);
        string2 = jSONObject;
        if (jSONObject == null) {
            string2 = new JSONObject();
        }
        return this.a((JSONObject)string2, bl2, bl3);
    }

    public final List<lf<bum>> a(JSONObject object, String string2, boolean bl2, boolean bl3, boolean bl4) {
        JSONArray jSONArray = object.optJSONArray(string2);
        ArrayList<lf<bum>> arrayList = new ArrayList<lf<bum>>();
        if (jSONArray != null && jSONArray.length() != 0) {
            int n2 = bl4 ? jSONArray.length() : 1;
            for (int i2 = 0; i2 < n2; ++i2) {
                string2 = jSONArray.getJSONObject(i2);
                object = string2;
                if (string2 == null) {
                    object = new JSONObject();
                }
                arrayList.add(this.a((JSONObject)object, false, bl3));
            }
            return arrayList;
        }
        this.a(0, false);
        return arrayList;
    }

    public final Future<bum> a(JSONObject object, String string2, boolean bl2) {
        string2 = object.getJSONObject(string2);
        boolean bl3 = string2.optBoolean("require", true);
        object = string2;
        if (string2 == null) {
            object = new JSONObject();
        }
        return this.a((JSONObject)object, bl3, bl2);
    }

    public final void a(int n2, boolean bl2) {
        if (bl2) {
            this.a(n2);
        }
    }

    @Override
    public final /* synthetic */ Object call() {
        return this.a();
    }
}

