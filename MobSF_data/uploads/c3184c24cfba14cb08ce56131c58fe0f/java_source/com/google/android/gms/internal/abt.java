/*
 * Decompiled with CFR 0_132.
 * 
 * Could not load the following classes:
 *  android.content.BroadcastReceiver
 *  android.content.BroadcastReceiver$PendingResult
 *  android.content.ComponentName
 *  android.content.Context
 *  android.content.Intent
 *  android.content.pm.ActivityInfo
 *  android.content.pm.PackageManager
 *  android.content.pm.PackageManager$NameNotFoundException
 *  android.net.Uri
 *  android.os.Bundle
 */
package com.google.android.gms.internal;

import android.content.BroadcastReceiver;
import android.content.ComponentName;
import android.content.Context;
import android.content.Intent;
import android.content.pm.ActivityInfo;
import android.content.pm.PackageManager;
import android.net.Uri;
import android.os.Bundle;
import com.google.android.gms.common.internal.ah;
import com.google.android.gms.internal.abb;
import com.google.android.gms.internal.abd;
import com.google.android.gms.internal.abu;
import com.google.android.gms.internal.abv;
import com.google.android.gms.internal.abx;
import com.google.android.gms.internal.acc;
import com.google.android.gms.internal.afk;

public final class abt {
    private final abv a;

    public abt(abv abv2) {
        ah.a(abv2);
        this.a = abv2;
    }

    public static boolean a(Context context) {
        block5 : {
            PackageManager packageManager;
            block4 : {
                ah.a(context);
                try {
                    packageManager = context.getPackageManager();
                    if (packageManager != null) break block4;
                    return false;
                }
                catch (PackageManager.NameNotFoundException nameNotFoundException) {
                    return false;
                }
            }
            context = packageManager.getReceiverInfo(new ComponentName(context, "com.google.android.gms.measurement.AppMeasurementReceiver"), 0);
            if (context == null) break block5;
            boolean bl2 = context.enabled;
            if (!bl2) break block5;
            return true;
        }
        return false;
    }

    public final void a(Context context, Intent intent) {
        acc acc2 = acc.a(context);
        abb abb2 = acc2.f();
        if (intent == null) {
            abb2.A().a("Receiver called with null intent");
            return;
        }
        String string2 = intent.getAction();
        abb2.E().a("Local receiver got", string2);
        if ("com.google.android.gms.measurement.UPLOAD".equals(string2)) {
            intent = new Intent().setClassName(context, "com.google.android.gms.measurement.AppMeasurementService");
            intent.setAction("com.google.android.gms.measurement.UPLOAD");
            abb2.E().a("Starting wakeful intent.");
            this.a.a(context, intent);
            return;
        }
        if ("com.android.vending.INSTALL_REFERRER".equals(string2)) {
            BroadcastReceiver.PendingResult pendingResult = this.a.a();
            String string3 = intent.getStringExtra("referrer");
            if (string3 == null) {
                abb2.E().a("Install referrer extras are null");
                if (pendingResult != null) {
                    pendingResult.finish();
                }
                return;
            }
            abb2.C().a("Install referrer extras are", string3);
            string2 = string3;
            if (!string3.contains("?")) {
                string2 = String.valueOf(string3);
                string2 = string2.length() != 0 ? "?".concat(string2) : new String("?");
            }
            string2 = Uri.parse((String)string2);
            string2 = acc2.o().a((Uri)string2);
            if (string2 == null) {
                abb2.E().a("No campaign defined in install referrer broadcast");
                if (pendingResult != null) {
                    pendingResult.finish();
                    return;
                }
            } else {
                long l2 = 1000L * intent.getLongExtra("referrer_timestamp_seconds", 0L);
                if (l2 == 0L) {
                    abb2.A().a("Install referrer is missing timestamp");
                }
                acc2.h().a(new abu(this, acc2, l2, (Bundle)string2, context, abb2, pendingResult));
            }
        }
    }
}

