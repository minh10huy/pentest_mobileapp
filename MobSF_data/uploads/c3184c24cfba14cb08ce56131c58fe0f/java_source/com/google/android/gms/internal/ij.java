/*
 * Decompiled with CFR 0_132.
 * 
 * Could not load the following classes:
 *  android.os.SystemClock
 */
package com.google.android.gms.internal;

import android.os.SystemClock;
import com.google.android.gms.internal.a;
import com.google.android.gms.internal.ac;
import com.google.android.gms.internal.bd;
import com.google.android.gms.internal.blf;
import com.google.android.gms.internal.bqh;
import com.google.android.gms.internal.brh;
import com.google.android.gms.internal.btb;
import com.google.android.gms.internal.buc;
import com.google.android.gms.internal.bvd;
import com.google.android.gms.internal.bwe;
import com.google.android.gms.internal.ce;
import com.google.android.gms.internal.df;
import com.google.android.gms.internal.eg;
import com.google.android.gms.internal.gh;
import com.google.android.gms.internal.hi;
import com.google.android.gms.internal.jk;
import com.google.android.gms.internal.op;
import com.google.android.gms.internal.pq;
import com.google.android.gms.internal.qp;
import com.google.android.gms.internal.th;
import com.google.android.gms.internal.yl;
import java.io.IOException;
import java.io.InputStream;
import java.net.MalformedURLException;
import java.net.SocketTimeoutException;
import java.util.ArrayList;
import java.util.Collection;
import java.util.Collections;
import java.util.Comparator;
import java.util.HashMap;
import java.util.Iterator;
import java.util.List;
import java.util.Map;
import java.util.Set;
import java.util.TreeSet;

public class ij
implements brh {
    private static boolean a = eg.a;
    @Deprecated
    private qp b;
    private final hi c;
    private jk d;

    public ij(hi hi2) {
        this(hi2, new jk(4096));
    }

    private ij(hi hi2, jk jk2) {
        this.c = hi2;
        this.b = hi2;
        this.d = jk2;
    }

    @Deprecated
    public ij(qp qp2) {
        this(qp2, new jk(4096));
    }

    @Deprecated
    private ij(qp qp2, jk jk2) {
        this.b = qp2;
        this.c = new gh(qp2);
        this.d = jk2;
    }

    private static List<bqh> a(List<bqh> list, yl iterator) {
        block6 : {
            TreeSet<String> treeSet;
            block5 : {
                treeSet = new TreeSet<String>(String.CASE_INSENSITIVE_ORDER);
                if (!list.isEmpty()) {
                    Iterator<bqh> entry = list.iterator();
                    while (entry.hasNext()) {
                        treeSet.add(entry.next().a());
                    }
                }
                list = new ArrayList<bqh>(list);
                if (iterator.h == null) break block5;
                if (iterator.h.isEmpty()) break block6;
                for (bqh bqh2 : iterator.h) {
                    if (treeSet.contains(bqh2.a())) continue;
                    list.add(bqh2);
                }
                break block6;
            }
            if (!iterator.g.isEmpty()) {
                for (Map.Entry entry : iterator.g.entrySet()) {
                    if (treeSet.contains(entry.getKey())) continue;
                    list.add(new bqh((String)entry.getKey(), (String)entry.getValue()));
                }
            }
        }
        return list;
    }

    private static void a(String string2, bwe<?> bwe2, df df2) {
        ac ac2 = bwe2.j();
        int n2 = bwe2.i();
        try {
            ac2.a(df2);
        }
        catch (df df3) {
            bwe2.b(String.format("%s-timeout-giveup [timeout=%s]", string2, n2));
            throw df3;
        }
        bwe2.b(String.format("%s-retry [timeout=%s]", string2, n2));
    }

    /*
     * Unable to fully structure code
     * Enabled aggressive block sorting
     * Enabled unnecessary exception pruning
     * Enabled aggressive exception aggregation
     * Lifted jumps to return sites
     */
    private final byte[] a(InputStream var1_1, int var2_4) {
        block15 : {
            block14 : {
                var6_5 = new th(this.d, var2_4);
                var5_6 = null;
                if (var1_1 != null) {
                    var4_7 = this.d.a(1024);
                    try {
                        while ((var2_4 = var1_1.read(var4_7)) != -1) {
                            var6_5.write(var4_7, 0, var2_4);
                        }
                        var3_8 = var6_5.toByteArray();
                        ** if (var1_1 == null) goto lbl-1000
                    }
                    catch (Throwable var3_9) {}
lbl-1000: // 1 sources:
                    {
                        var1_1.close();
                    }
lbl-1000: // 2 sources:
                    {
                        break block14;
                    }
                } else {
                    try {
                        throw new bd();
                    }
                    catch (Throwable var3_10) {
                        var4_7 = var5_6;
                    }
                }
                if (var1_1 != null) {
                    var1_1.close();
                }
                break block15;
                catch (IOException var1_2) {}
                eg.a("Error occurred when closing InputStream", new Object[0]);
            }
            this.d.a(var4_7);
            var6_5.close();
            return var3_8;
            catch (IOException var1_3) {}
            eg.a("Error occurred when closing InputStream", new Object[0]);
        }
        this.d.a(var4_7);
        var6_5.close();
        throw var3_11;
    }

    /*
     * Unable to fully structure code
     * Enabled aggressive block sorting
     * Enabled unnecessary exception pruning
     * Enabled aggressive exception aggregation
     * Lifted jumps to return sites
     */
    @Override
    public buc a(bwe<?> var1_1) {
        var3_2 = SystemClock.elapsedRealtime();
        do {
            block41 : {
                var7_5 /* !! */  = Collections.emptyList();
                try {
                    block37 : {
                        block39 : {
                            block38 : {
                                block34 : {
                                    block36 : {
                                        block35 : {
                                            block33 : {
                                                var9_13 = var1_1.f();
                                                if (var9_13 == null) {
                                                    var8_10 /* !! */  = Collections.emptyMap();
                                                } else {
                                                    var8_10 /* !! */  = new HashMap<String, String>();
                                                    if (var9_13.b != null) {
                                                        var8_10 /* !! */ .put((String)"If-None-Match", (String)var9_13.b);
                                                    }
                                                    if (var9_13.d > 0L) {
                                                        var8_10 /* !! */ .put((String)"If-Modified-Since", (String)op.a(var9_13.d));
                                                    }
                                                }
                                                var11_17 = this.c.a((bwe<?>)var1_1, (Map<String, String>)var8_10 /* !! */ );
                                                var2_3 = var11_17.a();
                                                var9_13 = var11_17.b();
                                                if (var2_3 != 304) break block33;
                                                var7_5 /* !! */  = var1_1.f();
                                                if (var7_5 /* !! */  == null) {
                                                    return new buc(304, null, true, SystemClock.elapsedRealtime() - var3_2, var9_13);
                                                }
                                                var8_10 /* !! */  = ij.a(var9_13, (yl)var7_5 /* !! */ );
                                                return new buc(304, var7_5 /* !! */ .a, true, SystemClock.elapsedRealtime() - var3_2, (List<bqh>)var8_10 /* !! */ );
                                            }
                                            var7_5 /* !! */  = var11_17.d();
                                            if (var7_5 /* !! */  == null) ** GOTO lbl37
                                            try {
                                                var7_5 /* !! */  = this.a((InputStream)var7_5 /* !! */ , var11_17.c());
                                                ** GOTO lbl39
                                            }
                                            catch (IOException var7_6) {
                                                block40 : {
                                                    var8_10 /* !! */  = null;
                                                    break block40;
lbl37: // 2 sources:
                                                    var7_5 /* !! */  = new byte[]{};
lbl39: // 3 sources:
                                                    var5_4 = SystemClock.elapsedRealtime() - var3_2;
                                                    if (!ij.a && var5_4 <= 3000L) break block34;
                                                    if (var7_5 /* !! */  == null) break block35;
                                                    try {
                                                        var8_10 /* !! */  = var7_5 /* !! */ .length;
                                                        break block36;
                                                    }
                                                    catch (IOException var10_15) {
                                                        var8_10 /* !! */  = var7_5 /* !! */ ;
                                                        var7_5 /* !! */  = var10_15;
                                                    }
                                                }
                                                var10_14 = var11_17;
                                                break block37;
                                            }
                                        }
                                        var8_10 /* !! */  = "null";
                                    }
                                    eg.b("HTTP response for request=<%s> [lifetime=%d], [size=%s], [rc=%d], [retryCount=%s]", new Object[]{var1_1, var5_4, var8_10 /* !! */ , var2_3, var1_1.j().b()});
                                }
                                if (var2_3 < 200) throw new IOException();
                                if (var2_3 > 299) throw new IOException();
                                var5_4 = SystemClock.elapsedRealtime();
                                try {
                                    return new buc(var2_3, var7_5 /* !! */ , false, var5_4 - var3_2, var9_13);
                                }
                                catch (IOException var8_11) {
                                    break block38;
                                }
                                catch (IOException var8_12) {
                                    // empty catch block
                                }
                            }
                            var10_14 = var7_5 /* !! */ ;
                            var7_5 /* !! */  = var8_10 /* !! */ ;
                            var8_10 /* !! */  = var10_14;
                            break block39;
                            catch (IOException var7_7) {
                                var8_10 /* !! */  = null;
                            }
                        }
                        var10_14 = var11_17;
                        break block37;
                        catch (IOException var10_16) {
                            var9_13 = var7_5 /* !! */ ;
                            var8_10 /* !! */  = null;
                            var7_5 /* !! */  = var10_16;
                            var10_14 = var11_17;
                        }
                        break block37;
                        catch (IOException var11_18) {
                            var8_10 /* !! */  = var10_14 = null;
                            var9_13 = var7_5 /* !! */ ;
                            var7_5 /* !! */  = var11_18;
                        }
                    }
                    if (var10_14 == null) throw new bvd((Throwable)var7_5 /* !! */ );
                    var2_3 = var10_14.a();
                }
                catch (MalformedURLException var7_8) {
                    var1_1 = String.valueOf(var1_1.e());
                    if (var1_1.length() != 0) {
                        var1_1 = "Bad URL ".concat((String)var1_1);
                        throw new RuntimeException((String)var1_1, var7_8);
                    }
                    var1_1 = new String("Bad URL ");
                    throw new RuntimeException((String)var1_1, var7_8);
                }
                catch (SocketTimeoutException var7_9) {}
                eg.c("Unexpected response code %d for %s", new Object[]{var2_3, var1_1.e()});
                if (var8_10 /* !! */  != null) {
                    var7_5 /* !! */  = new buc(var2_3, var8_10 /* !! */ , false, SystemClock.elapsedRealtime() - var3_2, var9_13);
                    if (var2_3 != 401 && var2_3 != 403) {
                        if (var2_3 >= 400) {
                            if (var2_3 <= 499) throw new blf((buc)var7_5 /* !! */ );
                        }
                        if (var2_3 < 500) throw new bd((buc)var7_5 /* !! */ );
                        if (var2_3 > 599) throw new bd((buc)var7_5 /* !! */ );
                        throw new bd((buc)var7_5 /* !! */ );
                    }
                    ij.a("auth", var1_1, new a((buc)var7_5 /* !! */ ));
                    continue;
                }
                var7_5 /* !! */  = "network";
                var8_10 /* !! */  = new btb();
                break block41;
                var7_5 /* !! */  = "socket";
                var8_10 /* !! */  = new ce();
            }
            ij.a((String)var7_5 /* !! */ , var1_1, var8_10 /* !! */ );
        } while (true);
    }
}

