/*
 * Decompiled with CFR 0_132.
 * 
 * Could not load the following classes:
 *  android.os.Handler
 *  android.os.Looper
 */
package com.google.android.gms.internal;

import android.os.Handler;
import android.os.Looper;
import com.google.android.gms.internal.aii;
import com.google.android.gms.internal.b;
import com.google.android.gms.internal.bnh;
import com.google.android.gms.internal.brh;
import com.google.android.gms.internal.bsh;
import com.google.android.gms.internal.bwe;
import com.google.android.gms.internal.cbh;
import com.google.android.gms.internal.ua;
import java.util.ArrayList;
import java.util.Collection;
import java.util.HashSet;
import java.util.Iterator;
import java.util.List;
import java.util.Set;
import java.util.concurrent.BlockingQueue;
import java.util.concurrent.PriorityBlockingQueue;
import java.util.concurrent.atomic.AtomicInteger;

public final class cag {
    private final AtomicInteger a = new AtomicInteger();
    private final Set<bwe<?>> b = new HashSet();
    private final PriorityBlockingQueue<bwe<?>> c = new PriorityBlockingQueue();
    private final PriorityBlockingQueue<bwe<?>> d = new PriorityBlockingQueue();
    private final ua e;
    private final brh f;
    private final b g;
    private final bsh[] h;
    private aii i;
    private final List<cbh> j = new ArrayList<cbh>();

    public cag(ua ua2, brh brh2) {
        this(ua2, brh2, 4);
    }

    private cag(ua ua2, brh brh2, int n2) {
        this(ua2, brh2, 4, new bnh(new Handler(Looper.getMainLooper())));
    }

    private cag(ua ua2, brh brh2, int n2, b b2) {
        this.e = ua2;
        this.f = brh2;
        this.h = new bsh[4];
        this.g = b2;
    }

    /*
     * Enabled aggressive block sorting
     * Enabled unnecessary exception pruning
     * Enabled aggressive exception aggregation
     */
    public final <T> bwe<T> a(bwe<T> bwe2) {
        bwe2.a(this);
        Collection<bwe<?>> collection = this.b;
        synchronized (collection) {
            this.b.add(bwe2);
        }
        bwe2.a(this.a.incrementAndGet());
        bwe2.b("add-to-queue");
        collection = !bwe2.h() ? this.d : this.c;
        collection.add(bwe2);
        return bwe2;
    }

    public final void a() {
        int n2;
        if (this.i != null) {
            this.i.a();
        }
        Object object = this.h;
        int n3 = ((bsh[])object).length;
        int n4 = 0;
        for (n2 = 0; n2 < n3; ++n2) {
            bsh bsh2 = object[n2];
            if (bsh2 == null) continue;
            bsh2.a();
        }
        this.i = new aii(this.c, this.d, this.e, this.g);
        this.i.start();
        for (n2 = n4; n2 < this.h.length; ++n2) {
            this.h[n2] = object = new bsh(this.d, this.f, this.e, this.g);
            object.start();
        }
    }

    /*
     * Enabled aggressive block sorting
     * Enabled unnecessary exception pruning
     * Enabled aggressive exception aggregation
     */
    final <T> void b(bwe<T> bwe2) {
        Collection<Object> collection = this.b;
        synchronized (collection) {
            this.b.remove(bwe2);
        }
        collection = this.j;
        synchronized (collection) {
            Iterator<cbh> iterator = this.j.iterator();
            while (iterator.hasNext()) {
                iterator.next().a(bwe2);
            }
            return;
        }
    }
}

