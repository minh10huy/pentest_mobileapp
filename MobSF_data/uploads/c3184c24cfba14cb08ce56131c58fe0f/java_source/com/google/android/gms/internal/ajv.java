/*
 * Decompiled with CFR 0_132.
 * 
 * Could not load the following classes:
 *  android.content.Context
 *  android.net.ConnectivityManager
 *  android.net.NetworkInfo
 *  android.os.Build
 *  android.os.Build$VERSION
 */
package com.google.android.gms.internal;

import android.content.Context;
import android.net.ConnectivityManager;
import android.net.NetworkInfo;
import android.os.Build;
import com.google.android.gms.internal.aib;
import com.google.android.gms.internal.aif;
import com.google.android.gms.internal.aiv;
import com.google.android.gms.internal.aix;
import com.google.android.gms.internal.ajw;
import com.google.android.gms.internal.ajx;
import com.google.android.gms.internal.ajy;
import java.io.BufferedOutputStream;
import java.io.BufferedReader;
import java.io.IOException;
import java.io.InputStream;
import java.io.InputStreamReader;
import java.io.OutputStream;
import java.io.Reader;
import java.io.Serializable;
import java.net.HttpURLConnection;
import java.net.MalformedURLException;
import java.net.URL;
import java.nio.charset.Charset;
import java.util.Iterator;
import java.util.List;
import java.util.Locale;
import java.util.Map;
import java.util.Set;

final class ajv
implements aib {
    private final String a;
    private final Context b;
    private final ajy c;
    private final ajx d;

    ajv(Context context, ajx ajx2) {
        this(new ajw(), context, ajx2);
    }

    private ajv(ajy object, Context context, ajx object2) {
        this.c = object;
        this.b = context.getApplicationContext();
        this.d = object2;
        object2 = Build.VERSION.RELEASE;
        Locale locale = Locale.getDefault();
        context = null;
        if (locale == null) {
            object = context;
        } else {
            object = context;
            if (locale.getLanguage() != null) {
                if (locale.getLanguage().length() == 0) {
                    object = context;
                } else {
                    object = new StringBuilder();
                    object.append(locale.getLanguage().toLowerCase());
                    if (locale.getCountry() != null && locale.getCountry().length() != 0) {
                        object.append("-");
                        object.append(locale.getCountry().toLowerCase());
                    }
                    object = object.toString();
                }
            }
        }
        this.a = String.format("%s/%s (Linux; U; Android %s; %s; %s Build/%s)", "GoogleTagManager", "5.06", object2, object, Build.MODEL, Build.ID);
    }

    /*
     * Enabled aggressive block sorting
     * Enabled unnecessary exception pruning
     * Enabled aggressive exception aggregation
     */
    private static URL a(aif object) {
        object = object.c();
        try {
            return new URL((String)object);
        }
        catch (MalformedURLException malformedURLException) {}
        aiv.a("Error trying to parse the GTM url.");
        return null;
    }

    /*
     * Unable to fully structure code
     * Enabled aggressive block sorting
     * Enabled unnecessary exception pruning
     * Enabled aggressive exception aggregation
     * Lifted jumps to return sites
     */
    @Override
    public final void a(List<aif> var1_1) {
        block36 : {
            block37 : {
                var6_2 = Math.min(var1_1.size(), 40);
                var5_3 = 0;
                var3_4 = 1;
                while (var5_3 < var6_2) {
                    block39 : {
                        block34 : {
                            block35 : {
                                block43 : {
                                    block40 : {
                                        block41 : {
                                            block42 : {
                                                block38 : {
                                                    var10_16 = var1_1.get(var5_3);
                                                    var11_17 = ajv.a(var10_16);
                                                    var8_13 = var10_16.d();
                                                    var13_19 = var10_16.e();
                                                    var7_7 = var10_16.f();
                                                    if (var11_17 != null) break block38;
                                                    aiv.b("No destination: discarding hit.");
                                                    this.d.b(var10_16);
                                                    var2_5 = var3_4;
                                                    break block39;
                                                }
                                                var4_6 = var3_4;
                                                var12_18 = this.c.a((URL)var11_17);
                                                var9_14 = null;
                                                var2_5 = var3_4;
                                                if (var3_4 == 0) ** GOTO lbl25
                                                aix.a(this.b);
                                                var2_5 = 0;
lbl25: // 2 sources:
                                                var3_4 = var2_5;
                                                var12_18.setRequestProperty("User-Agent", this.a);
                                                if (var13_19 != null) {
                                                    var3_4 = var2_5;
                                                    var13_19 = var13_19.entrySet().iterator();
                                                    do {
                                                        var3_4 = var2_5;
                                                        if (!var13_19.hasNext()) break;
                                                        var3_4 = var2_5;
                                                        var14_20 = (Map.Entry)var13_19.next();
                                                        var3_4 = var2_5;
                                                        var12_18.setRequestProperty((String)var14_20.getKey(), (String)var14_20.getValue());
                                                    } while (true);
                                                }
                                                if (var8_13 == null) {
                                                    var3_4 = var2_5;
                                                    aiv.b(String.format("Hit %d retrieved from the store has null HTTP method.", new Object[]{var10_16.a()}));
                                                    var3_4 = var2_5;
                                                    this.d.b(var10_16);
                                                    break block34;
                                                }
                                                var3_4 = var2_5;
                                                if (!var8_13.equals("GET")) {
                                                    var3_4 = var2_5;
                                                    if (!var8_13.equals("HEAD")) {
                                                        var3_4 = var2_5;
                                                        if (!var8_13.equals("POST")) {
                                                            var3_4 = var2_5;
                                                            if (!var8_13.equals("PUT")) {
                                                                var3_4 = var2_5;
                                                                aiv.b(String.format("Unrecongnized HTTP method %s. Supported methods are GET, HEAD, PUT and/or POST", new Object[]{var8_13}));
                                                                var3_4 = var2_5;
                                                                this.d.b(var10_16);
                                                                break block34;
                                                            }
                                                        }
                                                    }
                                                }
                                                var3_4 = var2_5;
                                                var4_6 = var8_13.hashCode();
                                                if (var4_6 == 70454) break block40;
                                                if (var4_6 == 79599) break block41;
                                                if (var4_6 == 2213344) break block42;
                                                if (var4_6 != 2461856) ** GOTO lbl-1000
                                                var3_4 = var2_5;
                                                if (!var8_13.equals("POST")) ** GOTO lbl-1000
                                                var3_4 = 2;
                                                break block43;
                                            }
                                            var3_4 = var2_5;
                                            if (!var8_13.equals("HEAD")) ** GOTO lbl-1000
                                            var3_4 = 1;
                                            break block43;
                                        }
                                        var3_4 = var2_5;
                                        if (!var8_13.equals("PUT")) ** GOTO lbl-1000
                                        var3_4 = 3;
                                        break block43;
                                    }
                                    var3_4 = var2_5;
                                    if (var8_13.equals("GET")) {
                                        var3_4 = 0;
                                    } else lbl-1000: // 5 sources:
                                    {
                                        var3_4 = -1;
                                    }
                                }
                                switch (var3_4) {
                                    case 2: 
                                    case 3: {
                                        var3_4 = var2_5;
                                        var12_18.setRequestMethod((String)var8_13);
                                        if (var7_7 == null) break;
                                        var3_4 = var2_5;
                                        var12_18.setDoOutput(true);
                                        var3_4 = var2_5;
                                        var7_7 = var7_7.getBytes(Charset.forName("UTF-8"));
                                        var3_4 = var2_5;
                                        var12_18.setFixedLengthStreamingMode(((byte[])var7_7).length);
                                        var3_4 = var2_5;
                                        var13_19 = new BufferedOutputStream(var12_18.getOutputStream());
                                        var3_4 = var2_5;
                                        var13_19.write((byte[])var7_7);
                                        var3_4 = var2_5;
                                        var13_19.flush();
                                        var3_4 = var2_5;
                                        var13_19.close();
                                        break;
                                    }
                                    case 0: 
                                    case 1: {
                                        if (var7_7 != null) {
                                            var3_4 = var2_5;
                                            aiv.b(String.format("Body of %s hit is ignored: %s.", new Object[]{var8_13, var7_7}));
                                        }
                                        var3_4 = var2_5;
                                        var12_18.setRequestMethod((String)var8_13);
                                        break;
                                    }
                                }
                                var3_4 = var2_5;
                                var4_6 = var12_18.getResponseCode();
                                if (var4_6 == 200) ** GOTO lbl146
                                var3_4 = var2_5;
                                var7_7 = String.valueOf(var11_17);
                                var3_4 = var2_5;
                                var8_13 = new StringBuilder(String.valueOf(var7_7).length() + 39);
                                var3_4 = var2_5;
                                var8_13.append("Bad response received for ");
                                var3_4 = var2_5;
                                var8_13.append((String)var7_7);
                                var3_4 = var2_5;
                                var8_13.append(": ");
                                var3_4 = var2_5;
                                var8_13.append(var4_6);
                                var3_4 = var2_5;
                                aiv.b(var8_13.toString());
                                var3_4 = var2_5;
                                var7_7 = new StringBuilder();
                                var8_13 = new BufferedReader(new InputStreamReader(var12_18.getErrorStream()));
                                while ((var13_19 = var8_13.readLine()) != null) {
                                    var7_7.append((String)var13_19);
                                }
                                var7_7 = (var7_7 = String.valueOf(var7_7.toString())).length() != 0 ? "Error Message: ".concat((String)var7_7) : new String("Error Message: ");
                                aiv.b((String)var7_7);
                                var3_4 = var2_5;
                                var8_13.close();
                                var3_4 = var2_5;
                                this.d.c(var10_16);
                                var7_7 = null;
                                break block35;
lbl146: // 1 sources:
                                var3_4 = var2_5;
                                var7_7 = var12_18.getInputStream();
                                var9_14 = String.valueOf(var11_17);
                                var13_19 = new StringBuilder(String.valueOf(var9_14).length() + 23 + String.valueOf(var8_13).length());
                                var13_19.append("Hit sent to ");
                                var13_19.append(var9_14);
                                var13_19.append("(method = ");
                                var13_19.append((String)var8_13);
                                var13_19.append(")");
                                aiv.d(var13_19.toString());
                                this.d.a(var10_16);
                            }
                            if (var7_7 != null) {
                                var4_6 = var2_5;
                                var7_7.close();
                            }
                        }
                        var4_6 = var2_5;
                        try {
                            var12_18.disconnect();
                        }
                        catch (IOException var7_9) {
                            var8_13 = String.valueOf(var11_17);
                            var9_14 = var7_9.getClass().getSimpleName();
                            var11_17 = new StringBuilder(String.valueOf(var8_13).length() + 27 + String.valueOf(var9_14).length());
                            var11_17.append("Exception sending hit to ");
                            var11_17.append((String)var8_13);
                            var11_17.append(": ");
                            var11_17.append(var9_14);
                            aiv.b(var11_17.toString());
                            aiv.b(var7_9.getMessage());
                            this.d.c(var10_16);
                            var2_5 = var4_6;
                        }
                    }
                    ++var5_3;
                    var3_4 = var2_5;
                }
                return;
                catch (Throwable var7_10) {
                    var2_5 = var3_4;
                    var8_13 = var9_14;
                    break block36;
                }
                catch (Throwable var7_11) {
                    break block37;
                }
                catch (Throwable var7_12) {
                    var8_13 = null;
                }
            }
            if (var8_13 != null) {
                var3_4 = var2_5;
                var8_13.close();
            }
            var3_4 = var2_5;
            throw var7_8;
            catch (Throwable var9_15) {
                var8_13 = var7_7;
                var7_7 = var9_15;
            }
        }
        if (var8_13 != null) {
            var4_6 = var2_5;
            var8_13.close();
        }
        var4_6 = var2_5;
        var12_18.disconnect();
        var4_6 = var2_5;
        throw var7_7;
    }

    @Override
    public final boolean a() {
        NetworkInfo networkInfo = ((ConnectivityManager)this.b.getSystemService("connectivity")).getActiveNetworkInfo();
        if (networkInfo != null && networkInfo.isConnected()) {
            return true;
        }
        aiv.d("...no network connectivity");
        return false;
    }
}

