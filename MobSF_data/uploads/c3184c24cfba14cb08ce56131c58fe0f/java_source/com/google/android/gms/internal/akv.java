/*
 * Decompiled with CFR 0_132.
 * 
 * Could not load the following classes:
 *  android.content.ComponentName
 *  android.content.Context
 *  android.content.Intent
 *  android.content.ServiceConnection
 *  android.os.Bundle
 *  android.os.IBinder
 *  android.os.IInterface
 *  android.os.RemoteException
 */
package com.google.android.gms.internal;

import android.content.ComponentName;
import android.content.Context;
import android.content.Intent;
import android.content.ServiceConnection;
import android.os.Bundle;
import android.os.IBinder;
import android.os.IInterface;
import android.os.RemoteException;
import com.google.android.gms.common.stats.a;
import com.google.android.gms.internal.aio;
import com.google.android.gms.internal.air;
import com.google.android.gms.internal.ait;
import com.google.android.gms.internal.aiv;
import com.google.android.gms.tagmanager.TagManagerService;

public final class akv
implements ServiceConnection {
    private final Context a;
    private final a b;
    private volatile boolean c = false;
    private volatile boolean d = false;
    private air e;

    public akv(Context context) {
        this(context, a.a());
    }

    private akv(Context context, a a2) {
        this.a = context;
        this.b = a2;
    }

    /*
     * Enabled aggressive block sorting
     * Enabled unnecessary exception pruning
     * Enabled aggressive exception aggregation
     */
    private final boolean c() {
        if (this.c) {
            return true;
        }
        synchronized (this) {
            if (this.c) {
                return true;
            }
            if (!this.d) {
                Intent intent = new Intent(this.a, TagManagerService.class);
                if (!this.b.a(this.a, intent, this, 1)) {
                    return false;
                }
                this.d = true;
            }
            boolean bl2;
            while (bl2 = this.d) {
                try {
                    this.wait();
                    this.d = false;
                }
                catch (InterruptedException interruptedException) {
                    aiv.b("Error connecting to TagManagerService", interruptedException);
                    this.d = false;
                    continue;
                }
                break;
            }
            return this.c;
        }
    }

    public final void a(String string2, Bundle bundle, String string3, long l2, boolean bl2) {
        if (this.c()) {
            try {
                this.e.a(string2, bundle, string3, l2, bl2);
                return;
            }
            catch (RemoteException remoteException) {
                aiv.b("Error calling service to emit event", (Throwable)remoteException);
            }
        }
    }

    public final void a(String string2, String string3, String string4, aio aio2) {
        if (this.c()) {
            try {
                this.e.a(string2, string3, string4, aio2);
                return;
            }
            catch (RemoteException remoteException) {
                aiv.b("Error calling service to load container", (Throwable)remoteException);
            }
        }
        if (aio2 != null) {
            try {
                aio2.a(false, string2);
                return;
            }
            catch (RemoteException remoteException) {
                aiv.a("Error - local callback should not throw RemoteException", (Throwable)remoteException);
            }
        }
    }

    public final boolean a() {
        if (this.c()) {
            try {
                this.e.a();
                return true;
            }
            catch (RemoteException remoteException) {
                aiv.b("Error in resetting service", (Throwable)remoteException);
            }
        }
        return false;
    }

    public final void b() {
        if (this.c()) {
            try {
                this.e.b();
                return;
            }
            catch (RemoteException remoteException) {
                aiv.b("Error calling service to dispatch pending events", (Throwable)remoteException);
            }
        }
    }

    /*
     * Enabled aggressive block sorting
     * Enabled unnecessary exception pruning
     * Enabled aggressive exception aggregation
     */
    public final void onServiceConnected(ComponentName object, IBinder iBinder) {
        synchronized (this) {
            object = iBinder == null ? null : ((object = iBinder.queryLocalInterface("com.google.android.gms.tagmanager.internal.ITagManagerService")) instanceof air ? (air)object : new ait(iBinder));
            this.e = object;
            this.c = true;
            this.d = false;
            this.notifyAll();
            return;
        }
    }

    /*
     * Enabled aggressive block sorting
     * Enabled unnecessary exception pruning
     * Enabled aggressive exception aggregation
     */
    public final void onServiceDisconnected(ComponentName componentName) {
        synchronized (this) {
            this.e = null;
            this.c = false;
            this.d = false;
            return;
        }
    }
}

