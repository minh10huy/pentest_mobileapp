/*
 * Decompiled with CFR 0_132.
 * 
 * Could not load the following classes:
 *  android.content.Context
 *  android.graphics.Bitmap
 *  android.graphics.Color
 *  android.os.Bundle
 *  android.text.TextUtils
 */
package com.google.android.gms.internal;

import android.content.Context;
import android.graphics.Bitmap;
import android.graphics.Color;
import android.os.Bundle;
import android.text.TextUtils;
import com.google.android.gms.ads.internal.av;
import com.google.android.gms.internal.ak;
import com.google.android.gms.internal.bqj;
import com.google.android.gms.internal.bsz;
import com.google.android.gms.internal.btk;
import com.google.android.gms.internal.btq;
import com.google.android.gms.internal.btv;
import com.google.android.gms.internal.btx;
import com.google.android.gms.internal.he;
import com.google.android.gms.internal.ix;
import com.google.android.gms.internal.iz;
import com.google.android.gms.internal.ja;
import com.google.android.gms.internal.km;
import com.google.android.gms.internal.mm;
import java.util.List;
import java.util.concurrent.TimeUnit;

@ak
public final class nc {
    private final Context a;
    private final String b;
    private final km c;
    private final btv d;
    private final btx e;
    private final ix f = new ja().a("min_1", Double.MIN_VALUE, 1.0).a("1_5", 1.0, 5.0).a("5_10", 5.0, 10.0).a("10_20", 10.0, 20.0).a("20_30", 20.0, 30.0).a("30_max", 30.0, Double.MAX_VALUE).a();
    private final long[] g;
    private final String[] h;
    private boolean i = false;
    private boolean j = false;
    private boolean k = false;
    private boolean l = false;
    private boolean m;
    private mm n;
    private boolean o;
    private boolean p;
    private long q = -1L;

    public nc(Context arrstring, km km2, String string2, btx btx2, btv btv2) {
        this.a = arrstring;
        this.c = km2;
        this.b = string2;
        this.e = btx2;
        this.d = btv2;
        arrstring = btk.q;
        arrstring = (String)bqj.f().a(arrstring);
        if (arrstring == null) {
            this.h = new String[0];
            this.g = new long[0];
            return;
        }
        arrstring = TextUtils.split((String)arrstring, (String)",");
        this.h = new String[arrstring.length];
        this.g = new long[arrstring.length];
        for (int i2 = 0; i2 < arrstring.length; ++i2) {
            try {
                this.g[i2] = Long.parseLong(arrstring[i2]);
                continue;
            }
            catch (NumberFormatException numberFormatException) {
                he.c("Unable to parse frame hash target time number.", numberFormatException);
                this.g[i2] = -1L;
            }
        }
    }

    public final void a() {
        if (this.i) {
            if (this.j) {
                return;
            }
            btq.a(this.e, this.d, "vfr2");
            this.j = true;
        }
    }

    public final void a(mm mm2) {
        btq.a(this.e, this.d, "vpc2");
        this.i = true;
        if (this.e != null) {
            this.e.a("vpn", mm2.a());
        }
        this.n = mm2;
    }

    public final void b() {
        Object object = btk.p;
        if (bqj.f().a(object).booleanValue() && !this.o) {
            Bundle bundle = new Bundle();
            bundle.putString("type", "native-player-metrics");
            bundle.putString("request", this.b);
            bundle.putString("player", this.n.a());
            for (iz object2 : this.f.a()) {
                object = String.valueOf("fps_c_");
                String string2 = String.valueOf(object2.a);
                object = string2.length() != 0 ? object.concat(string2) : new String((String)object);
                bundle.putString((String)object, Integer.toString(object2.c));
                object = String.valueOf("fps_p_");
                string2 = String.valueOf(object2.a);
                object = string2.length() != 0 ? object.concat(string2) : new String((String)object);
                bundle.putString((String)object, Double.toString(object2.b));
            }
            for (int i2 = 0; i2 < this.g.length; ++i2) {
                object = this.h[i2];
                if (object == null) continue;
                String string3 = String.valueOf((Object)this.g[i2]);
                StringBuilder stringBuilder = new StringBuilder(String.valueOf(string3).length() + 3);
                stringBuilder.append("fh_");
                stringBuilder.append(string3);
                bundle.putString(stringBuilder.toString(), (String)object);
            }
            av.e().a(this.a, this.c.a, "gmob-apps", bundle, true);
            this.o = true;
        }
    }

    public final void b(mm mm2) {
        if (this.k && !this.l) {
            btq.a(this.e, this.d, "vff2");
            this.l = true;
        }
        long l2 = av.l().c();
        if (this.m && this.p && this.q != -1L) {
            double d2 = (double)TimeUnit.SECONDS.toNanos(1L) / (double)(l2 - this.q);
            this.f.a(d2);
        }
        this.p = this.m;
        this.q = l2;
        String[] arrstring = btk.r;
        l2 = bqj.f().a(arrstring);
        long l3 = mm2.getCurrentPosition();
        for (int i2 = 0; i2 < this.h.length; ++i2) {
            if (this.h[i2] != null || l2 <= Math.abs(l3 - this.g[i2])) continue;
            arrstring = this.h;
            mm2 = mm2.getBitmap(8, 8);
            l3 = 63L;
            l2 = 0L;
            for (int i3 = 0; i3 < 8; ++i3) {
                long l4 = l3;
                int n2 = 0;
                l3 = l2;
                l2 = l4;
                while (n2 < 8) {
                    int n3 = mm2.getPixel(n2, i3);
                    l4 = Color.blue((int)n3) + Color.red((int)n3) + Color.green((int)n3) > 128 ? 1L : 0L;
                    l3 |= l4 << (int)l2;
                    ++n2;
                    --l2;
                }
                l4 = l2;
                l2 = l3;
                l3 = l4;
            }
            arrstring[i2] = String.format("%016X", l2);
            return;
        }
    }

    public final void c() {
        this.m = true;
        if (this.j && !this.k) {
            btq.a(this.e, this.d, "vfp2");
            this.k = true;
        }
    }

    public final void d() {
        this.m = false;
    }
}

