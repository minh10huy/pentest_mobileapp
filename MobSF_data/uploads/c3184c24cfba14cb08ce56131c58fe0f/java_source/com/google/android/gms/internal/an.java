/*
 * Decompiled with CFR 0_132.
 * 
 * Could not load the following classes:
 *  android.content.Context
 *  android.content.pm.PackageInfo
 *  android.content.res.Resources
 *  android.os.Bundle
 *  android.os.Handler
 *  android.text.TextUtils
 *  android.util.DisplayMetrics
 *  android.webkit.CookieManager
 *  org.json.JSONException
 *  org.json.JSONObject
 */
package com.google.android.gms.internal;

import android.content.Context;
import android.content.pm.PackageInfo;
import android.content.res.Resources;
import android.os.Bundle;
import android.os.Handler;
import android.text.TextUtils;
import android.util.DisplayMetrics;
import android.webkit.CookieManager;
import com.google.ads.mediation.admob.AdMobAdapter;
import com.google.android.gms.internal.ak;
import com.google.android.gms.internal.am;
import com.google.android.gms.internal.ao;
import com.google.android.gms.internal.ap;
import com.google.android.gms.internal.aq;
import com.google.android.gms.internal.ar;
import com.google.android.gms.internal.as;
import com.google.android.gms.internal.at;
import com.google.android.gms.internal.au;
import com.google.android.gms.internal.av;
import com.google.android.gms.internal.aw;
import com.google.android.gms.internal.ax;
import com.google.android.gms.internal.az;
import com.google.android.gms.internal.ba;
import com.google.android.gms.internal.bg;
import com.google.android.gms.internal.bh;
import com.google.android.gms.internal.bj;
import com.google.android.gms.internal.bk;
import com.google.android.gms.internal.bn;
import com.google.android.gms.internal.boc;
import com.google.android.gms.internal.bod;
import com.google.android.gms.internal.boe;
import com.google.android.gms.internal.boh;
import com.google.android.gms.internal.bor;
import com.google.android.gms.internal.bot;
import com.google.android.gms.internal.bpe;
import com.google.android.gms.internal.bpu;
import com.google.android.gms.internal.bpy;
import com.google.android.gms.internal.bqj;
import com.google.android.gms.internal.bsz;
import com.google.android.gms.internal.btk;
import com.google.android.gms.internal.cax;
import com.google.android.gms.internal.cx;
import com.google.android.gms.internal.gm;
import com.google.android.gms.internal.ha;
import com.google.android.gms.internal.he;
import com.google.android.gms.internal.hg;
import com.google.android.gms.internal.hm;
import com.google.android.gms.internal.hs;
import com.google.android.gms.internal.il;
import com.google.android.gms.internal.js;
import com.google.android.gms.internal.jz;
import com.google.android.gms.internal.km;
import com.google.android.gms.internal.ls;
import com.google.android.gms.internal.lw;
import java.util.List;
import org.json.JSONException;
import org.json.JSONObject;

@ak
public final class an
extends ha
implements ba {
    il a;
    private final am b;
    private final bk c;
    private final Object d = new Object();
    private final Context e;
    private final boc f;
    private final boh g;
    private bj h;
    private Runnable i;
    private bn j;
    private cax k;

    /*
     * Enabled aggressive block sorting
     */
    public an(Context object, bk object2, am am2, boh boh2) {
        void var1_5;
        void var4_11;
        bod bod2;
        void var3_10;
        this.b = var3_10;
        this.e = object;
        this.c = bod2;
        this.g = var4_11;
        this.f = new boc(this.g);
        this.f.a(new ao(this));
        bpe bpe2 = new bpe();
        bpe2.a = this.c.j.b;
        bpe2.b = this.c.j.c;
        int n2 = this.c.j.d ? 0 : 2;
        bpe2.c = n2;
        this.f.a(new ap(bpe2));
        if (this.c.f != null) {
            this.f.a(new aq(this));
        }
        bpy bpy2 = this.c.c;
        if (bpy2.d && "interstitial_mb".equals(bpy2.a)) {
            boc boc2 = this.f;
            bod2 = ar.a;
        } else if (bpy2.d && "reward_mb".equals(bpy2.a)) {
            boc boc3 = this.f;
            bod2 = as.a;
        } else if (!bpy2.h && !bpy2.d) {
            boc boc4 = this.f;
            bod2 = at.a;
        } else {
            boc boc5 = this.f;
            bod2 = au.a;
        }
        var1_5.a(bod2);
        this.f.a(boe.a.b.a);
    }

    /*
     * Enabled aggressive block sorting
     * Enabled unnecessary exception pruning
     * Enabled aggressive exception aggregation
     */
    private final bpy a(bj object) {
        int n2;
        int n3;
        int n4;
        int n5;
        Object[] arrobject;
        block10 : {
            n5 = this.h != null && this.h.V != null && this.h.V.size() > 1 ? 1 : 0;
            if (n5 != 0 && this.k != null && !this.k.s) {
                return null;
            }
            if (this.j.y) {
                for (bpy bpy2 : object.d.g) {
                    if (!bpy2.i) continue;
                    return new bpy(bpy2, object.d.g);
                }
            }
            if (this.j.l == null) throw new ax("The ad response must specify one of the supported ad sizes.", 0);
            arrobject = this.j.l.split("x");
            if (arrobject.length != 2) {
                object = String.valueOf(this.j.l);
                if (object.length() != 0) {
                    object = "Invalid ad size format from the ad response: ".concat((String)object);
                    throw new ax((String)object, 0);
                }
                object = new String("Invalid ad size format from the ad response: ");
                throw new ax((String)object, 0);
            }
            try {
                n3 = Integer.parseInt((String)arrobject[0]);
                n4 = Integer.parseInt((String)arrobject[1]);
                arrobject = object.d.g;
            }
            catch (NumberFormatException numberFormatException) {}
            n2 = arrobject.length;
            break block10;
            String string2 = String.valueOf(this.j.l);
            if (string2.length() != 0) {
                string2 = "Invalid ad size number from the ad response: ".concat(string2);
                throw new ax(string2, 0);
            }
            string2 = new String("Invalid ad size number from the ad response: ");
            throw new ax(string2, 0);
        }
        for (n5 = 0; n5 < n2; ++n5) {
            Object object2 = arrobject[n5];
            float f2 = this.e.getResources().getDisplayMetrics().density;
            int n6 = object2.e == -1 ? (int)((float)object2.f / f2) : object2.e;
            int n7 = object2.b == -2 ? (int)((float)object2.c / f2) : object2.b;
            if (n3 != n6 || n4 != n7 || object2.i) continue;
            return new bpy((bpy)object2, object.d.g);
        }
        object = String.valueOf(this.j.l);
        if (object.length() != 0) {
            object = "The ad size from the ad response was not one of the requested sizes: ".concat((String)object);
            throw new ax((String)object, 0);
        }
        object = new String("The ad size from the ad response was not one of the requested sizes: ");
        throw new ax((String)object, 0);
    }

    static /* synthetic */ Object a(an an2) {
        return an2.d;
    }

    /*
     * Enabled aggressive block sorting
     */
    private final void a(int n2, String object) {
        if (n2 != 3 && n2 != -1) {
            he.e((String)object);
        } else {
            he.d((String)object);
        }
        object = this.j == null ? new bn(n2) : new bn(n2, this.j.j);
        this.j = object;
        object = this.h != null ? this.h : new bj(this.c, -1L, null, null, null);
        object = new gm((bj)object, this.j, this.k, null, n2, -1L, this.j.m, null, this.f, null);
        this.b.a((gm)object);
    }

    static /* synthetic */ void a(an an2, int n2, String string2) {
        an2.a(n2, string2);
    }

    static /* synthetic */ bk b(an an2) {
        return an2.c;
    }

    static /* synthetic */ Runnable c(an an2) {
        return an2.i;
    }

    final il a(km object, ls<bj> ls2) {
        Context context = this.e;
        if (new az(context).a((km)object)) {
            he.b("Fetching ad response from local ad request service.");
            object = new bg(context, ls2, this);
            object.d();
            return object;
        }
        he.b("Fetching ad response from remote ad request service.");
        bqj.a();
        if (!jz.c(context)) {
            he.e("Failed to connect to remote ad request service.");
            return null;
        }
        return new bh(context, (km)object, ls2, this);
    }

    @Override
    public final void a() {
        he.b("AdLoaderBackgroundTask started.");
        this.i = new av(this);
        Object object = hs.a;
        Object object2 = this.i;
        Object object3 = btk.bs;
        object.postDelayed((Runnable)object2, bqj.f().a(object3).longValue());
        long l2 = com.google.android.gms.ads.internal.av.l().b();
        object = btk.bq;
        if (((Boolean)bqj.f().a(object)).booleanValue() && this.c.b.c != null && (object = this.c.b.c.getString("_ad")) != null) {
            this.h = new bj(this.c, l2, null, null, null);
            this.a(cx.a(this.e, this.h, (String)object));
            return;
        }
        object = new lw();
        hm.a(new aw(this, (ls)object));
        object2 = com.google.android.gms.ads.internal.av.A().h(this.e);
        object3 = com.google.android.gms.ads.internal.av.A().i(this.e);
        String string2 = com.google.android.gms.ads.internal.av.A().j(this.e);
        com.google.android.gms.ads.internal.av.A().f(this.e, string2);
        this.h = new bj(this.c, l2, (String)object2, (String)object3, string2);
        object.a(this.h);
    }

    /*
     * Enabled aggressive block sorting
     * Enabled unnecessary exception pruning
     * Enabled aggressive exception aggregation
     */
    @Override
    public final void a(bn object) {
        JSONObject jSONObject;
        long l2;
        Object object2;
        block26 : {
            he.b("Received ad response.");
            this.j = object;
            l2 = com.google.android.gms.ads.internal.av.l().b();
            object2 = this.d;
            synchronized (object2) {
                object = null;
                this.a = null;
            }
            com.google.android.gms.ads.internal.av.i().l().d(this.j.F);
            object2 = btk.aL;
            if (bqj.f().a(object2).booleanValue()) {
                if (this.j.N) {
                    com.google.android.gms.ads.internal.av.i().l().c(this.h.e);
                } else {
                    com.google.android.gms.ads.internal.av.i().l().d(this.h.e);
                }
            }
            try {
                if (this.j.d != -2 && this.j.d != -3) {
                    int n2 = this.j.d;
                    object = new StringBuilder(66);
                    object.append("There was a problem getting an ad response. ErrorCode: ");
                    object.append(n2);
                    throw new ax(object.toString(), this.j.d);
                }
                if (this.j.d != -3) {
                    if (TextUtils.isEmpty((CharSequence)this.j.b)) throw new ax("No fill from ad server.", 3);
                    com.google.android.gms.ads.internal.av.i().l().a(this.j.t);
                    boolean bl2 = this.j.g;
                    if (bl2) {
                        try {
                            this.k = new cax(this.j.b);
                            com.google.android.gms.ads.internal.av.i().a(this.k.g);
                        }
                        catch (JSONException jSONException) {
                            he.b("Could not parse mediation config.", (Throwable)jSONException);
                            String string2 = String.valueOf(this.j.b);
                            if (string2.length() != 0) {
                                string2 = "Could not parse mediation config: ".concat(string2);
                                throw new ax(string2, 0);
                            }
                            string2 = new String("Could not parse mediation config: ");
                            throw new ax(string2, 0);
                        }
                    } else {
                        com.google.android.gms.ads.internal.av.i().a(this.j.I);
                    }
                    if (!TextUtils.isEmpty((CharSequence)this.j.G)) {
                        object2 = btk.cs;
                        if (bqj.f().a(object2).booleanValue()) {
                            he.b("Received cookie from server. Setting webview cookie in CookieManager.");
                            object2 = com.google.android.gms.ads.internal.av.g().c(this.e);
                            if (object2 != null) {
                                object2.setCookie("googleads.g.doubleclick.net", this.j.G);
                            }
                        }
                    }
                }
                object2 = this.h.d.g != null ? this.a(this.h) : null;
                com.google.android.gms.ads.internal.av.i().l().b(this.j.u);
                com.google.android.gms.ads.internal.av.i().l().c(this.j.M);
            }
            catch (ax ax2) {
                this.a(ax2.a(), ax2.getMessage());
            }
            if (!TextUtils.isEmpty((CharSequence)this.j.q)) {
                try {
                    jSONObject = new JSONObject(this.j.q);
                    break block26;
                }
                catch (Exception exception) {
                    he.b("Error parsing the JSON for Active View.", exception);
                }
            }
            jSONObject = null;
        }
        if (this.j.P == 2) {
            Boolean bl3 = true;
            object = this.h.c;
            object = object.m != null ? object.m : new Bundle();
            if (object.getBundle(AdMobAdapter.class.getName()) != null) {
                object = object.getBundle(AdMobAdapter.class.getName());
            } else {
                Bundle bundle = new Bundle();
                object.putBundle(AdMobAdapter.class.getName(), bundle);
                object = bundle;
            }
            object.putBoolean("render_test_label", true);
            object = bl3;
        }
        if (this.j.P == 1) {
            object = false;
        }
        if (this.j.P == 0) {
            object = js.a(this.h.c);
        }
        object = new gm(this.h, this.j, this.k, (bpy)object2, -2, l2, this.j.m, jSONObject, this.f, (Boolean)object);
        this.b.a((gm)object);
        hs.a.removeCallbacks(this.i);
    }

    final /* synthetic */ void a(bot bot2) {
        bot2.c.a = this.c.f.packageName;
    }

    /*
     * Enabled aggressive block sorting
     * Enabled unnecessary exception pruning
     * Enabled aggressive exception aggregation
     */
    @Override
    public final void b() {
        Object object = this.d;
        synchronized (object) {
            if (this.a != null) {
                this.a.c();
            }
            return;
        }
    }

    final /* synthetic */ void b(bot bot2) {
        bot2.a = this.c.v;
    }
}

