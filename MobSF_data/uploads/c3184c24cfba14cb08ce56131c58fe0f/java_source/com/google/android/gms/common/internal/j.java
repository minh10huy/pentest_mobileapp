/*
 * Decompiled with CFR 0_132.
 * 
 * Could not load the following classes:
 *  android.content.ComponentName
 *  android.content.Context
 *  android.content.ServiceConnection
 *  android.os.Handler
 *  android.os.Handler$Callback
 *  android.os.IBinder
 *  android.os.Looper
 *  android.os.Message
 *  android.util.Log
 */
package com.google.android.gms.common.internal;

import android.content.ComponentName;
import android.content.Context;
import android.content.ServiceConnection;
import android.os.Handler;
import android.os.IBinder;
import android.os.Looper;
import android.os.Message;
import android.util.Log;
import com.google.android.gms.common.internal.ah;
import com.google.android.gms.common.internal.h;
import com.google.android.gms.common.internal.i;
import com.google.android.gms.common.internal.k;
import com.google.android.gms.common.stats.a;
import java.util.HashMap;

final class j
extends h
implements Handler.Callback {
    private final HashMap<i, k> a = new HashMap();
    private final Context b;
    private final Handler c;
    private final a d;
    private final long e;
    private final long f;

    j(Context context) {
        this.b = context.getApplicationContext();
        this.c = new Handler(context.getMainLooper(), (Handler.Callback)this);
        this.d = a.a();
        this.e = 5000L;
        this.f = 300000L;
    }

    static /* synthetic */ HashMap a(j j2) {
        return j2.a;
    }

    static /* synthetic */ Handler b(j j2) {
        return j2.c;
    }

    static /* synthetic */ Context c(j j2) {
        return j2.b;
    }

    static /* synthetic */ a d(j j2) {
        return j2.d;
    }

    static /* synthetic */ long e(j j2) {
        return j2.f;
    }

    /*
     * Enabled aggressive block sorting
     * Enabled unnecessary exception pruning
     * Enabled aggressive exception aggregation
     */
    @Override
    protected final boolean a(i object, ServiceConnection object2, String string2) {
        ah.a(object2, (Object)"ServiceConnection must not be null");
        HashMap<i, k> hashMap = this.a;
        synchronized (hashMap) {
            k k2 = this.a.get(object);
            if (k2 == null) {
                k2 = new k(this, (i)object);
                k2.a((ServiceConnection)object2, string2);
                k2.a(string2);
                this.a.put((i)object, k2);
                object = k2;
                return object.a();
            } else {
                this.c.removeMessages(0, object);
                if (k2.a((ServiceConnection)object2)) {
                    object = String.valueOf(object);
                    object2 = new StringBuilder(String.valueOf(object).length() + 81);
                    object2.append("Trying to bind a GmsServiceConnection that was already connected before.  config=");
                    object2.append((String)object);
                    throw new IllegalStateException(object2.toString());
                }
                k2.a((ServiceConnection)object2, string2);
                switch (k2.b()) {
                    case 2: {
                        k2.a(string2);
                        object = k2;
                        return object.a();
                    }
                    case 1: {
                        object2.onServiceConnected(k2.e(), k2.d());
                        object = k2;
                        return object.a();
                    }
                    default: {
                        object = k2;
                    }
                }
            }
            return object.a();
        }
    }

    /*
     * Enabled aggressive block sorting
     * Enabled unnecessary exception pruning
     * Enabled aggressive exception aggregation
     */
    @Override
    protected final void b(i object, ServiceConnection object2, String string2) {
        ah.a(object2, (Object)"ServiceConnection must not be null");
        HashMap<i, k> hashMap = this.a;
        synchronized (hashMap) {
            k k2 = this.a.get(object);
            if (k2 == null) {
                object = String.valueOf(object);
                object2 = new StringBuilder(String.valueOf(object).length() + 50);
                object2.append("Nonexistent connection status for service config: ");
                object2.append((String)object);
                throw new IllegalStateException(object2.toString());
            }
            if (!k2.a((ServiceConnection)object2)) {
                object = String.valueOf(object);
                object2 = new StringBuilder(String.valueOf(object).length() + 76);
                object2.append("Trying to unbind a GmsServiceConnection  that was not bound before.  config=");
                object2.append((String)object);
                throw new IllegalStateException(object2.toString());
            }
            k2.b((ServiceConnection)object2, string2);
            if (k2.c()) {
                object = this.c.obtainMessage(0, object);
                this.c.sendMessageDelayed((Message)object, this.e);
            }
            return;
        }
    }

    /*
     * Enabled aggressive block sorting
     * Enabled unnecessary exception pruning
     * Enabled aggressive exception aggregation
     */
    public final boolean handleMessage(Message object) {
        switch (object.what) {
            default: {
                return false;
            }
            case 1: {
                HashMap<i, k> hashMap = this.a;
                synchronized (hashMap) {
                    i i2 = (i)object.obj;
                    k k2 = this.a.get(i2);
                    if (k2 != null && k2.b() == 3) {
                        object = String.valueOf(i2);
                        StringBuilder stringBuilder = new StringBuilder(String.valueOf(object).length() + 47);
                        stringBuilder.append("Timeout waiting for ServiceConnection callback ");
                        stringBuilder.append((String)object);
                        Log.wtf((String)"GmsClientSupervisor", (String)stringBuilder.toString(), (Throwable)new Exception());
                        stringBuilder = k2.e();
                        object = stringBuilder;
                        if (stringBuilder == null) {
                            object = i2.b();
                        }
                        stringBuilder = object;
                        if (object == null) {
                            stringBuilder = new ComponentName(i2.a(), "unknown");
                        }
                        k2.onServiceDisconnected((ComponentName)stringBuilder);
                    }
                    return true;
                }
            }
            case 0: 
        }
        HashMap<i, k> hashMap = this.a;
        synchronized (hashMap) {
            object = (i)object.obj;
            k k3 = this.a.get(object);
            if (k3 != null && k3.c()) {
                if (k3.a()) {
                    k3.b("GmsClientSupervisor");
                }
                this.a.remove(object);
            }
            return true;
        }
    }
}

