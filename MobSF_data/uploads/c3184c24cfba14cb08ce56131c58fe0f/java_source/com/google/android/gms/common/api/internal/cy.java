/*
 * Decompiled with CFR 0_132.
 * 
 * Could not load the following classes:
 *  android.app.PendingIntent
 *  android.content.Context
 *  android.content.Intent
 *  android.os.Bundle
 *  android.os.Handler
 *  android.os.Looper
 *  android.util.Log
 */
package com.google.android.gms.common.api.internal;

import android.app.PendingIntent;
import android.content.Context;
import android.content.Intent;
import android.os.Bundle;
import android.os.Handler;
import android.os.Looper;
import android.util.Log;
import com.google.android.gms.common.api.Status;
import com.google.android.gms.common.api.a;
import com.google.android.gms.common.api.internal.aa;
import com.google.android.gms.common.api.internal.ai;
import com.google.android.gms.common.api.internal.bb;
import com.google.android.gms.common.api.internal.bc;
import com.google.android.gms.common.api.internal.bp;
import com.google.android.gms.common.api.internal.cp;
import com.google.android.gms.common.api.internal.cw;
import com.google.android.gms.common.api.internal.cz;
import com.google.android.gms.common.api.internal.da;
import com.google.android.gms.common.api.internal.db;
import com.google.android.gms.common.api.k;
import com.google.android.gms.common.internal.ah;
import com.google.android.gms.common.internal.bd;
import com.google.android.gms.common.m;
import com.google.android.gms.internal.agr;
import com.google.android.gms.internal.ags;
import java.io.FileDescriptor;
import java.io.PrintWriter;
import java.util.ArrayList;
import java.util.Collections;
import java.util.Iterator;
import java.util.Map;
import java.util.Set;
import java.util.WeakHashMap;
import java.util.concurrent.locks.Lock;

final class cy
implements bb {
    private final Context a;
    private final aa b;
    private final Looper c;
    private final ai d;
    private final ai e;
    private final Map<a.d<?>, ai> f;
    private final Set<bp> g = Collections.newSetFromMap(new WeakHashMap());
    private final a.f h;
    private Bundle i;
    private com.google.android.gms.common.a j = null;
    private com.google.android.gms.common.a k = null;
    private boolean l = false;
    private final Lock m;
    private int n = 0;

    private cy(Context object, aa iterator, Lock lock, Looper looper, m m2, Map<a.d<?>, a.f> map, Map<a.d<?>, a.f> map2, bd bd2, a.b<? extends agr, ags> b2, a.f f2, ArrayList<cw> arrayList, ArrayList<cw> arrayList2, Map<a<?>, Boolean> map3, Map<a<?>, Boolean> map4) {
        this.a = object;
        this.b = iterator;
        this.m = lock;
        this.c = looper;
        this.h = f2;
        this.d = new ai((Context)object, this.b, lock, looper, m2, map2, null, map4, null, arrayList2, new da(this, null));
        this.e = new ai((Context)object, this.b, lock, looper, m2, map, bd2, map3, b2, arrayList, new db(this, null));
        object = new android.support.v4.g.a();
        iterator = map2.keySet().iterator();
        while (iterator.hasNext()) {
            object.put((a.d)iterator.next(), this.d);
        }
        iterator = map.keySet().iterator();
        while (iterator.hasNext()) {
            object.put(iterator.next(), this.e);
        }
        this.f = Collections.unmodifiableMap(object);
    }

    static /* synthetic */ com.google.android.gms.common.a a(cy cy2, com.google.android.gms.common.a a2) {
        cy2.j = a2;
        return a2;
    }

    public static cy a(Context context, aa aa2, Lock lock, Looper looper, m m2, Map<a.d<?>, a.f> object, bd bd2, Map<a<?>, Boolean> object2, a.b<? extends agr, ags> b2, ArrayList<cw> arrayList) {
        Object object4;
        Object object3;
        android.support.v4.g.a a2 = new android.support.v4.g.a();
        android.support.v4.g.a a3 = new android.support.v4.g.a();
        Object object5 = object.entrySet().iterator();
        object = null;
        while (object5.hasNext()) {
            object4 = object5.next();
            object3 = (a.f)object4.getValue();
            if (object3.c()) {
                object = object3;
            }
            if (object3.i()) {
                a2.put((a.d)object4.getKey(), (a.f)object3);
                continue;
            }
            a3.put((a.d)object4.getKey(), (a.f)object3);
        }
        ah.a(a2.isEmpty() ^ true, (Object)"CompositeGoogleApiClient should not be used without any APIs that require sign-in.");
        object3 = new android.support.v4.g.a();
        object5 = new android.support.v4.g.a();
        for (a object6 : object2.keySet()) {
            a.d<?> d2 = object6.c();
            if (a2.containsKey(d2)) {
                object3.put(object6, (Boolean)object2.get(object6));
                continue;
            }
            if (a3.containsKey(d2)) {
                object5.put(object6, (Boolean)object2.get(object6));
                continue;
            }
            throw new IllegalStateException("Each API in the isOptionalMap must have a corresponding client in the clients map.");
        }
        object2 = new ArrayList<cw>();
        object4 = new ArrayList<cw>();
        int n2 = arrayList.size();
        for (int i2 = 0; i2 < n2; ++i2) {
            cw cw2 = arrayList.get(i2);
            cw cw3 = cw2;
            if (object3.containsKey(cw3.a)) {
                object2.add(cw3);
                continue;
            }
            if (object5.containsKey(cw3.a)) {
                object4.add((cw)cw3);
                continue;
            }
            throw new IllegalStateException("Each ClientCallbacks must have a corresponding API in the isOptionalMap");
        }
        return new cy(context, aa2, lock, looper, m2, a2, a3, bd2, b2, (a.f)object, object2, (ArrayList<cw>)object4, (Map<a<?>, Boolean>)object3, (Map<a<?>, Boolean>)object5);
    }

    static /* synthetic */ Lock a(cy cy2) {
        return cy2.m;
    }

    private final void a(int n2, boolean bl2) {
        this.b.a(n2, bl2);
        this.k = null;
        this.j = null;
    }

    private final void a(Bundle bundle) {
        if (this.i == null) {
            this.i = bundle;
            return;
        }
        if (bundle != null) {
            this.i.putAll(bundle);
        }
    }

    private final void a(com.google.android.gms.common.a a2) {
        switch (this.n) {
            default: {
                Log.wtf((String)"CompositeGAC", (String)"Attempted to call failure callbacks in CONNECTION_MODE_NONE. Callbacks should be disabled via GmsClientSupervisor", (Throwable)new Exception());
                break;
            }
            case 2: {
                this.b.a(a2);
            }
            case 1: {
                this.i();
            }
        }
        this.n = 0;
    }

    static /* synthetic */ void a(cy cy2, int n2, boolean bl2) {
        cy2.a(n2, bl2);
    }

    static /* synthetic */ void a(cy cy2, Bundle bundle) {
        cy2.a(bundle);
    }

    static /* synthetic */ boolean a(cy cy2, boolean bl2) {
        cy2.l = bl2;
        return bl2;
    }

    static /* synthetic */ com.google.android.gms.common.a b(cy cy2, com.google.android.gms.common.a a2) {
        cy2.k = a2;
        return a2;
    }

    static /* synthetic */ void b(cy cy2) {
        cy2.h();
    }

    private static boolean b(com.google.android.gms.common.a a2) {
        if (a2 != null && a2.b()) {
            return true;
        }
        return false;
    }

    private final boolean b(cp<? extends k, ? extends a.c> object) {
        object = object.g();
        ah.b(this.f.containsKey(object), "GoogleApiClient is not configured to use the API required for this call.");
        return this.f.get(object).equals(this.e);
    }

    static /* synthetic */ boolean c(cy cy2) {
        return cy2.l;
    }

    static /* synthetic */ com.google.android.gms.common.a d(cy cy2) {
        return cy2.k;
    }

    static /* synthetic */ ai e(cy cy2) {
        return cy2.e;
    }

    static /* synthetic */ ai f(cy cy2) {
        return cy2.d;
    }

    /*
     * Enabled force condition propagation
     * Lifted jumps to return sites
     */
    private final void h() {
        if (cy.b(this.j)) {
            if (!cy.b(this.k) && !this.j()) {
                if (this.k == null) return;
                if (this.n == 1) {
                    this.i();
                    return;
                }
                this.a(this.k);
                this.d.c();
                return;
            }
            switch (this.n) {
                default: {
                    Log.wtf((String)"CompositeGAC", (String)"Attempted to call success callbacks in CONNECTION_MODE_NONE. Callbacks should be disabled via GmsClientSupervisor", (Throwable)((Object)new AssertionError()));
                    break;
                }
                case 2: {
                    this.b.a(this.i);
                }
                case 1: {
                    this.i();
                }
            }
            this.n = 0;
            return;
        }
        if (this.j != null && cy.b(this.k)) {
            this.e.c();
            this.a(this.j);
            return;
        }
        if (this.j == null || this.k == null) return;
        com.google.android.gms.common.a a2 = this.j;
        if (this.e.c < this.d.c) {
            a2 = this.k;
        }
        this.a(a2);
    }

    private final void i() {
        Iterator<bp> iterator = this.g.iterator();
        while (iterator.hasNext()) {
            iterator.next().v();
        }
        this.g.clear();
    }

    private final boolean j() {
        if (this.k != null && this.k.c() == 4) {
            return true;
        }
        return false;
    }

    private final PendingIntent k() {
        if (this.h == null) {
            return null;
        }
        return PendingIntent.getActivity((Context)this.a, (int)System.identityHashCode(this.b), (Intent)this.h.d(), (int)134217728);
    }

    @Override
    public final <A extends a.c, T extends cp<? extends k, A>> T a(T t2) {
        if (this.b((cp<? extends k, ? extends a.c>)t2)) {
            if (this.j()) {
                t2.b(new Status(4, null, this.k()));
                return t2;
            }
            return this.e.a(t2);
        }
        return this.d.a(t2);
    }

    @Override
    public final void a() {
        this.n = 2;
        this.l = false;
        this.k = null;
        this.j = null;
        this.d.a();
        this.e.a();
    }

    @Override
    public final void a(String string2, FileDescriptor fileDescriptor, PrintWriter printWriter, String[] arrstring) {
        printWriter.append(string2).append("authClient").println(":");
        this.e.a(String.valueOf(string2).concat("  "), fileDescriptor, printWriter, arrstring);
        printWriter.append(string2).append("anonClient").println(":");
        this.d.a(String.valueOf(string2).concat("  "), fileDescriptor, printWriter, arrstring);
    }

    @Override
    public final boolean a(bp bp2) {
        this.m.lock();
        try {
            if ((this.e() || this.d()) && !this.e.d()) {
                this.g.add(bp2);
                if (this.n == 0) {
                    this.n = 1;
                }
                this.k = null;
                this.e.a();
                return true;
            }
            return false;
        }
        finally {
            this.m.unlock();
        }
    }

    @Override
    public final com.google.android.gms.common.a b() {
        throw new UnsupportedOperationException();
    }

    @Override
    public final void c() {
        this.k = null;
        this.j = null;
        this.n = 0;
        this.d.c();
        this.e.c();
        this.i();
    }

    @Override
    public final boolean d() {
        boolean bl2;
        block5 : {
            block4 : {
                boolean bl3;
                this.m.lock();
                try {
                    bl2 = this.d.d();
                    bl3 = true;
                    if (!bl2) break block4;
                    bl2 = bl3;
                }
                catch (Throwable throwable) {
                    this.m.unlock();
                    throw throwable;
                }
                if (this.e.d()) break block5;
                bl2 = bl3;
                if (this.j()) break block5;
                int n2 = this.n;
                if (n2 != 1) break block4;
                bl2 = bl3;
                break block5;
            }
            bl2 = false;
        }
        this.m.unlock();
        return bl2;
    }

    public final boolean e() {
        this.m.lock();
        try {
            int n2 = this.n;
            boolean bl2 = n2 == 2;
            this.m.unlock();
            return bl2;
        }
        catch (Throwable throwable) {
            this.m.unlock();
            throw throwable;
        }
    }

    @Override
    public final void f() {
        this.m.lock();
        try {
            boolean bl2 = this.e();
            this.e.c();
            this.k = new com.google.android.gms.common.a(4);
            if (bl2) {
                new Handler(this.c).post((Runnable)new cz(this));
            } else {
                this.i();
            }
            return;
        }
        finally {
            this.m.unlock();
        }
    }

    @Override
    public final void g() {
        this.d.g();
        this.e.g();
    }
}

