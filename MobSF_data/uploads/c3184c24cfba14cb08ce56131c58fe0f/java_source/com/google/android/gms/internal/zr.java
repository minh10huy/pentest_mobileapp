/*
 * Decompiled with CFR 0_132.
 * 
 * Could not load the following classes:
 *  android.content.Context
 *  android.os.Bundle
 */
package com.google.android.gms.internal;

import android.content.Context;
import android.os.Bundle;
import android.support.v4.g.a;
import com.google.android.gms.common.internal.ah;
import com.google.android.gms.common.util.f;
import com.google.android.gms.internal.aab;
import com.google.android.gms.internal.aac;
import com.google.android.gms.internal.aai;
import com.google.android.gms.internal.aaw;
import com.google.android.gms.internal.aax;
import com.google.android.gms.internal.aaz;
import com.google.android.gms.internal.abb;
import com.google.android.gms.internal.abd;
import com.google.android.gms.internal.abm;
import com.google.android.gms.internal.abw;
import com.google.android.gms.internal.abx;
import com.google.android.gms.internal.acc;
import com.google.android.gms.internal.adb;
import com.google.android.gms.internal.ade;
import com.google.android.gms.internal.adt;
import com.google.android.gms.internal.adv;
import com.google.android.gms.internal.ady;
import com.google.android.gms.internal.adz;
import com.google.android.gms.internal.aez;
import com.google.android.gms.internal.afk;
import com.google.android.gms.internal.zs;
import com.google.android.gms.internal.zt;
import com.google.android.gms.internal.zy;
import java.util.Map;
import java.util.Set;

public final class zr
extends adb {
    private final Map<String, Long> a = new a<String, Long>();
    private final Map<String, Integer> b = new a<String, Integer>();
    private long c;

    public zr(acc acc2) {
        super(acc2);
    }

    private final void a(long l2, adt adt2) {
        if (adt2 == null) {
            this.t().E().a("Not logging ad exposure. No active activity");
            return;
        }
        if (l2 < 1000L) {
            this.t().E().a("Not logging ad exposure. Less than 1000 ms. exposure", l2);
            return;
        }
        Bundle bundle = new Bundle();
        bundle.putLong("_xt", l2);
        adv.a(adt2, bundle, true);
        this.f().a("am", "_xa", bundle);
    }

    static /* synthetic */ void a(zr zr2, long l2) {
        zr2.b(l2);
    }

    static /* synthetic */ void a(zr zr2, String string2, long l2) {
        zr2.a(string2, l2);
    }

    private final void a(String string2, long l2) {
        Integer n2;
        this.c();
        ah.a(string2);
        if (this.b.isEmpty()) {
            this.c = l2;
        }
        if ((n2 = this.b.get(string2)) != null) {
            this.b.put(string2, n2 + 1);
            return;
        }
        if (this.b.size() >= 100) {
            this.t().A().a("Too many ads visible");
            return;
        }
        this.b.put(string2, 1);
        this.a.put(string2, l2);
    }

    private final void a(String string2, long l2, adt adt2) {
        if (adt2 == null) {
            this.t().E().a("Not logging ad unit exposure. No active activity");
            return;
        }
        if (l2 < 1000L) {
            this.t().E().a("Not logging ad unit exposure. Less than 1000 ms. exposure", l2);
            return;
        }
        Bundle bundle = new Bundle();
        bundle.putString("_ai", string2);
        bundle.putLong("_xt", l2);
        adv.a(adt2, bundle, true);
        this.f().a("am", "_xu", bundle);
    }

    private final void b(long l2) {
        for (String string2 : this.a.keySet()) {
            this.a.put(string2, l2);
        }
        if (!this.a.isEmpty()) {
            this.c = l2;
        }
    }

    static /* synthetic */ void b(zr zr2, String string2, long l2) {
        zr2.b(string2, l2);
    }

    private final void b(String string2, long l2) {
        this.c();
        ah.a(string2);
        Number number = this.b.get(string2);
        if (number != null) {
            ady ady2 = this.j().y();
            int n2 = number.intValue() - 1;
            if (n2 == 0) {
                this.b.remove(string2);
                number = this.a.get(string2);
                if (number == null) {
                    this.t().y().a("First ad unit exposure time was never set");
                } else {
                    long l3 = number.longValue();
                    this.a.remove(string2);
                    this.a(string2, l2 - l3, ady2);
                }
                if (this.b.isEmpty()) {
                    if (this.c == 0L) {
                        this.t().y().a("First ad exposure time was never set");
                        return;
                    }
                    this.a(l2 - this.c, ady2);
                    this.c = 0L;
                }
                return;
            }
            this.b.put(string2, n2);
            return;
        }
        this.t().y().a("Call to endAdUnitExposure for unknown ad unit id", string2);
    }

    public final void a(long l2) {
        ady ady2 = this.j().y();
        for (String string2 : this.a.keySet()) {
            this.a(string2, l2 - this.a.get(string2), ady2);
        }
        if (!this.a.isEmpty()) {
            this.a(l2 - this.c, ady2);
        }
        this.b(l2);
    }

    public final void a(String string2) {
        if (string2 != null && string2.length() != 0) {
            long l2 = this.k().b();
            this.s().a(new zs(this, string2, l2));
            return;
        }
        this.t().y().a("Ad unit id must be a non-empty string");
    }

    public final void b(String string2) {
        if (string2 != null && string2.length() != 0) {
            long l2 = this.k().b();
            this.s().a(new zt(this, string2, l2));
            return;
        }
        this.t().y().a("Ad unit id must be a non-empty string");
    }
}

