/*
 * Decompiled with CFR 0_132.
 * 
 * Could not load the following classes:
 *  android.content.SharedPreferences
 *  android.content.SharedPreferences$Editor
 *  android.util.Pair
 */
package com.google.android.gms.internal;

import android.content.SharedPreferences;
import android.util.Pair;
import com.google.android.gms.common.internal.ah;
import com.google.android.gms.common.util.f;
import com.google.android.gms.internal.abm;
import com.google.android.gms.internal.abn;
import com.google.android.gms.internal.afk;
import java.security.SecureRandom;

public final class abq {
    private String a;
    private final String b;
    private final String c;
    private final long d;
    private /* synthetic */ abm e;

    private abq(abm abm2, String string2, long l2) {
        this.e = abm2;
        ah.a(string2);
        boolean bl2 = l2 > 0L;
        ah.b(bl2);
        this.a = String.valueOf(string2).concat(":start");
        this.b = String.valueOf(string2).concat(":count");
        this.c = String.valueOf(string2).concat(":value");
        this.d = l2;
    }

    /* synthetic */ abq(abm abm2, String string2, long l2, abn abn2) {
        this(abm2, string2, l2);
    }

    private final void b() {
        this.e.c();
        long l2 = this.e.k().a();
        SharedPreferences.Editor editor = abm.a(this.e).edit();
        editor.remove(this.b);
        editor.remove(this.c);
        editor.putLong(this.a, l2);
        editor.apply();
    }

    private final long c() {
        return abm.a(this.e).getLong(this.a, 0L);
    }

    public final Pair<String, Long> a() {
        this.e.c();
        this.e.c();
        long l2 = this.c();
        if (l2 == 0L) {
            this.b();
            l2 = 0L;
        } else {
            l2 = Math.abs(l2 - this.e.k().a());
        }
        if (l2 < this.d) {
            return null;
        }
        if (l2 > this.d << 1) {
            this.b();
            return null;
        }
        String string2 = abm.a(this.e).getString(this.c, null);
        l2 = abm.a(this.e).getLong(this.b, 0L);
        this.b();
        if (string2 != null && l2 > 0L) {
            return new Pair((Object)string2, (Object)l2);
        }
        return abm.a;
    }

    public final void a(String string2, long l2) {
        long l3;
        this.e.c();
        if (this.c() == 0L) {
            this.b();
        }
        String string3 = string2;
        if (string2 == null) {
            string3 = "";
        }
        if ((l3 = abm.a(this.e).getLong(this.b, 0L)) <= 0L) {
            string2 = abm.a(this.e).edit();
            string2.putString(this.c, string3);
            string2.putLong(this.b, 1L);
            string2.apply();
            return;
        }
        l2 = this.e.p().z().nextLong();
        boolean bl2 = (l2 & Long.MAX_VALUE) < Long.MAX_VALUE / ++l3;
        string2 = abm.a(this.e).edit();
        if (bl2) {
            string2.putString(this.c, string3);
        }
        string2.putLong(this.b, l3);
        string2.apply();
    }
}

