/*
 * Decompiled with CFR 0_132.
 */
package com.google.android.gms.internal;

import com.google.android.gms.internal.axx;
import com.google.android.gms.internal.ayg;
import com.google.android.gms.internal.ayh;
import com.google.android.gms.internal.ayi;
import com.google.android.gms.internal.ayk;
import com.google.android.gms.internal.ayw;
import java.io.Serializable;
import java.math.BigInteger;
import java.security.GeneralSecurityException;
import java.security.PrivateKey;
import java.security.PublicKey;
import java.security.interfaces.ECPrivateKey;
import java.security.interfaces.ECPublicKey;
import java.security.spec.ECParameterSpec;
import java.security.spec.ECPoint;
import java.security.spec.EllipticCurve;

public final class ayf {
    private ECPublicKey a;

    public ayf(ECPublicKey eCPublicKey) {
        this.a = eCPublicKey;
    }

    public final ayg a(String string2, byte[] object, byte[] arrby, int n2, ayk arrby2) {
        Serializable serializable = ayh.a(this.a.getParams());
        byte[] arrby3 = (ECPublicKey)serializable.getPublic();
        serializable = (ECPrivateKey)serializable.getPrivate();
        byte[] arrby4 = this.a;
        ECParameterSpec eCParameterSpec = arrby4.getParams();
        ECParameterSpec eCParameterSpec2 = serializable.getParams();
        if (eCParameterSpec.getCurve().equals(eCParameterSpec2.getCurve()) && eCParameterSpec.getGenerator().equals(eCParameterSpec2.getGenerator()) && eCParameterSpec.getOrder().equals(eCParameterSpec2.getOrder()) && eCParameterSpec.getCofactor() == eCParameterSpec2.getCofactor()) {
            serializable = ayh.a((ECPrivateKey)serializable, arrby4.getW());
            arrby4 = arrby3.getParams().getCurve();
            arrby3 = arrby3.getW();
            ayh.a((ECPoint)arrby3, (EllipticCurve)arrby4);
            int n3 = ayh.a((EllipticCurve)arrby4);
            switch (ayi.a[arrby2.ordinal()]) {
                default: {
                    string2 = String.valueOf(arrby2);
                    object = new StringBuilder(String.valueOf(string2).length() + 15);
                    object.append("invalid format:");
                    object.append(string2);
                    throw new GeneralSecurityException(object.toString());
                }
                case 2: {
                    arrby2 = new byte[++n3];
                    arrby4 = arrby3.getAffineX().toByteArray();
                    System.arraycopy(arrby4, 0, arrby2, n3 - arrby4.length, arrby4.length);
                    n3 = arrby3.getAffineY().testBit(0) ? 3 : 2;
                    arrby2[0] = (byte)n3;
                    break;
                }
                case 1: {
                    int n4 = n3 * 2 + 1;
                    arrby2 = new byte[n4];
                    arrby4 = arrby3.getAffineX().toByteArray();
                    arrby3 = arrby3.getAffineY().toByteArray();
                    System.arraycopy(arrby3, 0, arrby2, n4 - arrby3.length, arrby3.length);
                    System.arraycopy(arrby4, 0, arrby2, n3 + 1 - arrby4.length, arrby4.length);
                    arrby2[0] = 4;
                }
            }
            return new ayg(arrby2, ayw.a(string2, axx.a(new byte[][]{arrby2, serializable}), (byte[])object, arrby, n2));
        }
        throw new GeneralSecurityException("invalid public key spec");
    }
}

