/*
 * Decompiled with CFR 0_132.
 * 
 * Could not load the following classes:
 *  android.content.Context
 *  android.os.Bundle
 *  android.os.Handler
 *  android.os.RemoteException
 *  android.os.SystemClock
 *  android.text.TextUtils
 *  org.json.JSONException
 *  org.json.JSONObject
 */
package com.google.android.gms.internal;

import android.content.Context;
import android.os.Bundle;
import android.os.Handler;
import android.os.RemoteException;
import android.os.SystemClock;
import android.text.TextUtils;
import com.google.ads.mediation.AdUrlAdapter;
import com.google.ads.mediation.admob.AdMobAdapter;
import com.google.android.gms.a.a;
import com.google.android.gms.a.m;
import com.google.android.gms.ads.b.d;
import com.google.android.gms.ads.internal.av;
import com.google.android.gms.ads.mediation.b;
import com.google.android.gms.internal.ak;
import com.google.android.gms.internal.bpu;
import com.google.android.gms.internal.bpy;
import com.google.android.gms.internal.bqj;
import com.google.android.gms.internal.bsz;
import com.google.android.gms.internal.btk;
import com.google.android.gms.internal.bvl;
import com.google.android.gms.internal.caw;
import com.google.android.gms.internal.cax;
import com.google.android.gms.internal.caz;
import com.google.android.gms.internal.cbb;
import com.google.android.gms.internal.cbc;
import com.google.android.gms.internal.cbd;
import com.google.android.gms.internal.cbe;
import com.google.android.gms.internal.cbn;
import com.google.android.gms.internal.cbq;
import com.google.android.gms.internal.cbt;
import com.google.android.gms.internal.cbw;
import com.google.android.gms.internal.ccl;
import com.google.android.gms.internal.he;
import com.google.android.gms.internal.hs;
import com.google.android.gms.internal.km;
import com.google.android.gms.internal.zzxx;
import java.util.ArrayList;
import java.util.Collection;
import java.util.List;
import org.json.JSONException;
import org.json.JSONObject;

@ak
public final class cba
implements cbe {
    private final String a;
    private final cbn b;
    private final long c;
    private final cax d;
    private final caw e;
    private bpu f;
    private final bpy g;
    private final Context h;
    private final Object i;
    private final km j;
    private final boolean k;
    private final bvl l;
    private final List<String> m;
    private final List<String> n;
    private final List<String> o;
    private final boolean p;
    private final boolean q;
    private cbq r;
    private int s;
    private cbw t;

    /*
     * Enabled aggressive block sorting
     */
    public cba(Context context, String string2, cbn cbn2, cax cax2, caw caw2, bpu bpu2, bpy bpy2, km km2, boolean bl2, boolean bl3, bvl bvl2, List<String> list, List<String> list2, List<String> list3, boolean bl4) {
        String string3 = string2;
        this.i = new Object();
        this.s = -2;
        this.h = context;
        this.b = cbn2;
        this.e = caw2;
        if ("com.google.ads.mediation.customevent.CustomEventAdapter".equals(string2)) {
            string3 = this.b();
        }
        this.a = string3;
        this.d = cax2;
        long l2 = caw2.s != -1L ? caw2.s : (cax2.b != -1L ? cax2.b : 10000L);
        this.c = l2;
        this.f = bpu2;
        this.g = bpy2;
        this.j = km2;
        this.k = bl2;
        this.p = bl3;
        this.l = bvl2;
        this.m = list;
        this.n = list2;
        this.o = list3;
        this.q = bl4;
    }

    private static cbq a(b b2) {
        return new ccl(b2);
    }

    static /* synthetic */ cbq a(cba cba2, cbq cbq2) {
        cba2.r = cbq2;
        return cbq2;
    }

    static /* synthetic */ Object a(cba cba2) {
        return cba2.i;
    }

    /*
     * Enabled aggressive block sorting
     * Enabled unnecessary exception pruning
     * Enabled aggressive exception aggregation
     */
    private final String a(String string2) {
        if (string2 == null) return string2;
        if (!this.e()) return string2;
        if (this.b(2)) {
            return string2;
        }
        try {
            JSONObject jSONObject = new JSONObject(string2);
            jSONObject.remove("cpm_floor_cents");
            return jSONObject.toString();
        }
        catch (JSONException jSONException) {}
        he.e("Could not remove field. Returning the original value");
        return string2;
    }

    /*
     * Enabled aggressive block sorting
     * Enabled unnecessary exception pruning
     * Enabled aggressive exception aggregation
     */
    private final void a(caz caz2) {
        String string2 = this.a(this.e.j);
        try {
            if (this.j.c < 4100000) {
                if (this.g.d) {
                    this.r.a(m.a(this.h), this.f, string2, caz2);
                    return;
                }
                this.r.a(m.a(this.h), this.g, this.f, string2, (cbt)caz2);
                return;
            }
            if (!this.k && !this.e.b()) {
                if (this.g.d) {
                    this.r.a(m.a(this.h), this.f, string2, this.e.a, (cbt)caz2);
                    return;
                }
                if (!this.p) {
                    this.r.a(m.a(this.h), this.g, this.f, string2, this.e.a, caz2);
                    return;
                }
                if (this.e.n != null) {
                    this.r.a(m.a(this.h), this.f, string2, this.e.a, caz2, new bvl(cba.b(this.e.r)), this.e.q);
                    return;
                }
                this.r.a(m.a(this.h), this.g, this.f, string2, this.e.a, caz2);
                return;
            }
            ArrayList<String> arrayList = new ArrayList<String>(this.m);
            if (this.n != null) {
                for (String string3 : this.n) {
                    CharSequence charSequence = ":false";
                    String string4 = charSequence;
                    if (this.o != null) {
                        string4 = charSequence;
                        if (this.o.contains(string3)) {
                            string4 = ":true";
                        }
                    }
                    charSequence = new StringBuilder(String.valueOf(string3).length() + 7 + String.valueOf(string4).length());
                    charSequence.append("custom:");
                    charSequence.append(string3);
                    charSequence.append(string4);
                    arrayList.add(charSequence.toString());
                }
            }
            this.r.a(m.a(this.h), this.f, string2, this.e.a, caz2, this.l, arrayList);
            return;
        }
        catch (RemoteException remoteException) {
            he.c("Could not request ad from mediation adapter.", (Throwable)remoteException);
            this.a(5);
            return;
        }
    }

    static /* synthetic */ void a(cba cba2, caz caz2) {
        cba2.a(caz2);
    }

    static /* synthetic */ boolean a(cba cba2, int n2) {
        return cba2.b(1);
    }

    static /* synthetic */ int b(cba cba2) {
        return cba2.s;
    }

    /*
     * Enabled aggressive block sorting
     * Enabled unnecessary exception pruning
     * Enabled aggressive exception aggregation
     */
    private static d b(String string2) {
        d.a a2;
        int n2;
        block5 : {
            block6 : {
                a2 = new d.a();
                if (string2 == null) {
                    return a2.a();
                }
                try {
                    string2 = new JSONObject(string2);
                    n2 = 0;
                    a2.b(string2.optBoolean("multiple_images", false));
                    a2.a(string2.optBoolean("only_urls", false));
                    string2 = string2.optString("native_image_orientation", "any");
                    if ("landscape".equals(string2)) {
                        n2 = 2;
                        break block5;
                    }
                    if ("portrait".equals(string2)) {
                        n2 = 1;
                        break block5;
                    }
                    if (!"any".equals(string2)) break block6;
                    break block5;
                }
                catch (JSONException jSONException) {
                    he.c("Exception occurred when creating native ad options", (Throwable)jSONException);
                }
                return a2.a();
            }
            n2 = -1;
        }
        a2.a(n2);
        return a2.a();
    }

    /*
     * Enabled aggressive block sorting
     * Enabled unnecessary exception pruning
     * Enabled aggressive exception aggregation
     */
    private final String b() {
        try {
            if (TextUtils.isEmpty((CharSequence)this.e.e)) return "com.google.ads.mediation.customevent.CustomEventAdapter";
            if (!this.b.b(this.e.e)) return "com.google.ads.mediation.customevent.CustomEventAdapter";
            return "com.google.android.gms.ads.mediation.customevent.CustomEventAdapter";
        }
        catch (RemoteException remoteException) {}
        he.e("Fail to determine the custom event's version, assuming the old one.");
        return "com.google.ads.mediation.customevent.CustomEventAdapter";
    }

    /*
     * Enabled aggressive block sorting
     * Enabled unnecessary exception pruning
     * Enabled aggressive exception aggregation
     */
    private final boolean b(int n2) {
        Bundle bundle;
        try {
            bundle = this.k ? this.r.l() : (this.g.d ? this.r.k() : this.r.j());
        }
        catch (RemoteException remoteException) {}
        if (bundle != null && (bundle.getInt("capabilities", 0) & n2) == n2) {
            return true;
        }
        return false;
        he.e("Could not get adapter info. Returning false");
        return false;
    }

    static /* synthetic */ cbq c(cba cba2) {
        return cba2.d();
    }

    /*
     * Enabled aggressive block sorting
     * Enabled unnecessary exception pruning
     * Enabled aggressive exception aggregation
     */
    private final cbw c() {
        if (this.s != 0) return null;
        if (!this.e()) {
            return null;
        }
        try {
            if (!this.b(4)) return new cbc(this.f());
            if (this.t == null) return new cbc(this.f());
            if (this.t.a() == 0) return new cbc(this.f());
            return this.t;
        }
        catch (RemoteException remoteException) {}
        he.e("Could not get cpm value from MediationResponseMetadata");
        return new cbc(this.f());
    }

    private final cbq d() {
        Object object = String.valueOf(this.a);
        object = object.length() != 0 ? "Instantiating mediation adapter: ".concat((String)object) : new String("Instantiating mediation adapter: ");
        he.d((String)object);
        if (!this.k && !this.e.b()) {
            object = btk.bo;
            if (((Boolean)bqj.f().a(object)).booleanValue() && "com.google.ads.mediation.admob.AdMobAdapter".equals(this.a)) {
                return cba.a(new AdMobAdapter());
            }
            object = btk.bp;
            if (((Boolean)bqj.f().a(object)).booleanValue() && "com.google.ads.mediation.AdUrlAdapter".equals(this.a)) {
                return cba.a(new AdUrlAdapter());
            }
            if ("com.google.ads.mediation.admob.AdMobCustomTabsAdapter".equals(this.a)) {
                return new ccl(new zzxx());
            }
        }
        try {
            object = this.b.a(this.a);
            return object;
        }
        catch (RemoteException remoteException) {
            object = String.valueOf(this.a);
            object = object.length() != 0 ? "Could not instantiate mediation adapter: ".concat((String)object) : new String("Could not instantiate mediation adapter: ");
            he.a((String)object, (Throwable)remoteException);
            return null;
        }
    }

    static /* synthetic */ cbq d(cba cba2) {
        return cba2.r;
    }

    private final boolean e() {
        if (this.d.l != -1) {
            return true;
        }
        return false;
    }

    static /* synthetic */ boolean e(cba cba2) {
        return cba2.e();
    }

    /*
     * Enabled aggressive block sorting
     * Enabled unnecessary exception pruning
     * Enabled aggressive exception aggregation
     */
    private final int f() {
        JSONObject jSONObject;
        if (this.e.j == null) {
            return 0;
        }
        try {
            jSONObject = new JSONObject(this.e.j);
        }
        catch (JSONException jSONException) {}
        if ("com.google.ads.mediation.admob.AdMobAdapter".equals(this.a)) {
            return jSONObject.optInt("cpm_cents", 0);
        }
        int n2 = this.b(2) ? jSONObject.optInt("cpm_floor_cents", 0) : 0;
        int n3 = n2;
        if (n2 != 0) return n3;
        return jSONObject.optInt("penalized_average_cpm_cents", 0);
        he.e("Could not convert to json. Returning 0");
        return 0;
    }

    static /* synthetic */ String f(cba cba2) {
        return cba2.a;
    }

    /*
     * Loose catch block
     * Enabled aggressive block sorting
     * Enabled unnecessary exception pruning
     * Enabled aggressive exception aggregation
     * Converted monitor instructions to comments
     * Lifted jumps to return sites
     */
    public final cbd a(long l2, long l3) {
        Object object = this.i;
        // MONITORENTER : object
        long l4 = SystemClock.elapsedRealtime();
        Object caz2 = new caz();
        hs.a.post((Runnable)new cbb(this, (caz)caz2));
        long l5 = this.c;
        do {
            if (this.s != -2) {
                l2 = av.l().b();
                caz2 = new cbd(this.e, this.r, this.a, (caz)caz2, this.s, this.c(), l2 - l4);
                // MONITOREXIT : object
                return caz2;
            }
            long l6 = SystemClock.elapsedRealtime();
            long l7 = l5 - (l6 - l4);
            l6 = l3 - (l6 - l2);
            if (l7 > 0L && l6 > 0L) {
                this.i.wait(Math.min(l7, l6));
                continue;
            }
            he.d("Timed out waiting for adapter.");
            this.s = 3;
            continue;
            catch (InterruptedException interruptedException) {}
            this.s = 5;
        } while (true);
    }

    /*
     * Loose catch block
     * Enabled aggressive block sorting
     * Enabled unnecessary exception pruning
     * Enabled aggressive exception aggregation
     * Converted monitor instructions to comments
     * Lifted jumps to return sites
     */
    public final void a() {
        block6 : {
            Object object = this.i;
            // MONITORENTER : object
            if (this.r != null) {
                this.r.c();
            }
            break block6;
            catch (RemoteException remoteException) {
                he.c("Could not destroy mediation adapter.", (Throwable)remoteException);
            }
        }
        this.s = -1;
        this.i.notify();
        // MONITOREXIT : object
    }

    /*
     * Enabled aggressive block sorting
     * Enabled unnecessary exception pruning
     * Enabled aggressive exception aggregation
     */
    @Override
    public final void a(int n2) {
        Object object = this.i;
        synchronized (object) {
            this.s = n2;
            this.i.notify();
            return;
        }
    }

    /*
     * Enabled aggressive block sorting
     * Enabled unnecessary exception pruning
     * Enabled aggressive exception aggregation
     */
    @Override
    public final void a(int n2, cbw cbw2) {
        Object object = this.i;
        synchronized (object) {
            this.s = 0;
            this.t = cbw2;
            this.i.notify();
            return;
        }
    }
}

