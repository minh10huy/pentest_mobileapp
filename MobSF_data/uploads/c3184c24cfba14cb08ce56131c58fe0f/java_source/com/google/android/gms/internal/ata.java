/*
 * Decompiled with CFR 0_132.
 * 
 * Could not load the following classes:
 *  android.content.BroadcastReceiver
 *  android.content.Context
 *  android.content.Intent
 *  android.content.IntentFilter
 *  android.content.pm.PackageInfo
 *  android.content.pm.PackageManager
 *  android.os.Build
 *  android.os.Build$VERSION
 *  android.util.Log
 *  android.util.Pair
 *  dalvik.system.DexClassLoader
 */
package com.google.android.gms.internal;

import android.content.BroadcastReceiver;
import android.content.Context;
import android.content.Intent;
import android.content.IntentFilter;
import android.content.pm.PackageInfo;
import android.content.pm.PackageManager;
import android.os.Build;
import android.util.Log;
import android.util.Pair;
import com.google.android.gms.common.d;
import com.google.android.gms.common.e;
import com.google.android.gms.common.m;
import com.google.android.gms.internal.age;
import com.google.android.gms.internal.agm;
import com.google.android.gms.internal.agn;
import com.google.android.gms.internal.ars;
import com.google.android.gms.internal.atb;
import com.google.android.gms.internal.atc;
import com.google.android.gms.internal.ate;
import com.google.android.gms.internal.ath;
import com.google.android.gms.internal.bfj;
import com.google.android.gms.internal.bjy;
import com.google.android.gms.internal.bqj;
import com.google.android.gms.internal.bsz;
import com.google.android.gms.internal.btk;
import com.google.android.gms.internal.ub;
import com.google.android.gms.internal.vz;
import com.google.android.gms.internal.wq;
import com.google.android.gms.internal.yi;
import com.google.android.gms.internal.zd;
import dalvik.system.DexClassLoader;
import java.io.File;
import java.io.FileInputStream;
import java.io.FileNotFoundException;
import java.io.FileOutputStream;
import java.io.IOException;
import java.lang.reflect.Method;
import java.security.NoSuchAlgorithmException;
import java.security.SecureRandom;
import java.util.Arrays;
import java.util.HashMap;
import java.util.Map;
import java.util.concurrent.ExecutionException;
import java.util.concurrent.ExecutorService;
import java.util.concurrent.Executors;
import java.util.concurrent.Future;
import java.util.concurrent.TimeUnit;
import java.util.concurrent.TimeoutException;

public class ata {
    private static final String b = "ata";
    protected Context a;
    private ExecutorService c;
    private DexClassLoader d;
    private agm e;
    private byte[] f;
    private volatile com.google.android.gms.ads.c.a g = null;
    private volatile boolean h = false;
    private Future i = null;
    private boolean j;
    private volatile ub k = null;
    private Future l = null;
    private age m;
    private boolean n = false;
    private boolean o = false;
    private Map<Pair<String, String>, bfj> p;
    private boolean q = false;
    private boolean r;
    private boolean s;

    private ata(Context context) {
        boolean bl2 = true;
        this.r = true;
        this.s = false;
        Context context2 = context.getApplicationContext();
        if (context2 == null) {
            bl2 = false;
        }
        this.j = bl2;
        if (this.j) {
            context = context2;
        }
        this.a = context;
        this.p = new HashMap<Pair<String, String>, bfj>();
    }

    /*
     * Loose catch block
     * Enabled aggressive block sorting
     * Enabled unnecessary exception pruning
     * Enabled aggressive exception aggregation
     * Lifted jumps to return sites
     */
    public static ata a(Context object, String object2, String arrby, boolean bl2) {
        ata ata2 = new ata((Context)object);
        try {
            block21 : {
                ata2.c = Executors.newCachedThreadPool();
                ata2.h = bl2;
                if (bl2) {
                    ata2.i = ata2.c.submit(new atb(ata2));
                }
                ata2.c.execute(new ate(ata2));
                try {
                    object = m.b();
                    bl2 = m.d(ata2.a) > 0;
                }
                catch (Throwable throwable) {
                    break block21;
                }
                ata2.n = bl2;
                bl2 = object.a(ata2.a) == 0;
                ata2.o = bl2;
            }
            ata2.a(0, true);
            if (ath.a()) {
                object = btk.bF;
                if ((Boolean)bqj.f().a(object) != false) throw new IllegalStateException("Task Context initialization must not be called from the UI thread.");
            }
            ata2.e = new agm(null);
            ata2.f = ata2.e.a((String)object2);
            object = object2 = ata2.a.getCacheDir();
            if (object2 == null) {
                object = ata2.a.getDir("dex", 0);
                if (object == null) throw new ars();
            }
            if (!(object2 = new File(String.format("%s/%s.jar", object, "1510898742191"))).exists()) {
                arrby = ata2.e.a(ata2.f, (String)arrby);
                object2.createNewFile();
                FileOutputStream fileOutputStream = new FileOutputStream((File)object2);
                fileOutputStream.write(arrby, 0, arrby.length);
                fileOutputStream.close();
            }
            ata2.b((File)object, "1510898742191");
            ata2.d = new DexClassLoader(object2.getAbsolutePath(), object.getAbsolutePath(), null, ata2.a.getClassLoader());
            {
                catch (Throwable throwable) {
                    try {
                        ata.a((File)object2);
                        ata2.a((File)object, "1510898742191");
                        ata.a(String.format("%s/%s.dex", object, "1510898742191"));
                        throw throwable;
                    }
                    catch (NullPointerException nullPointerException) {
                        throw new ars(nullPointerException);
                    }
                    catch (agn agn2) {
                        throw new ars(agn2);
                    }
                    catch (IOException iOException) {
                        throw new ars(iOException);
                    }
                    catch (FileNotFoundException fileNotFoundException) {
                        throw new ars(fileNotFoundException);
                    }
                }
            }
            ata.a((File)object2);
            ata2.a((File)object, "1510898742191");
            ata.a(String.format("%s/%s.dex", object, "1510898742191"));
            object = btk.bx;
            if (((Boolean)bqj.f().a(object)).booleanValue() && !ata2.s) {
                object = new IntentFilter();
                object.addAction("android.intent.action.USER_PRESENT");
                object.addAction("android.intent.action.SCREEN_OFF");
                ata2.a.registerReceiver((BroadcastReceiver)new a(ata2, null), (IntentFilter)object);
                ata2.s = true;
            }
            ata2.m = new age(ata2);
            ata2.q = true;
            return ata2;
            catch (agn agn3) {
                throw new ars(agn3);
            }
        }
        catch (ars ars2) {
            return ata2;
        }
    }

    static /* synthetic */ ub a(ata ata2, ub ub2) {
        ata2.k = ub2;
        return ub2;
    }

    static /* synthetic */ void a(ata ata2) {
        ata2.o();
    }

    private static void a(File file) {
        if (!file.exists()) {
            Log.d((String)b, (String)String.format("File %s not found. No need for deletion", file.getAbsolutePath()));
            return;
        }
        file.delete();
    }

    /*
     * Loose catch block
     * Enabled aggressive block sorting
     * Enabled unnecessary exception pruning
     * Enabled aggressive exception aggregation
     * Lifted jumps to return sites
     */
    private final void a(File object, String object2) {
        File file;
        block40 : {
            block39 : {
                block33 : {
                    block35 : {
                        block32 : {
                            void var6_22;
                            Object var6_17;
                            block34 : {
                                byte[] arrby;
                                File file2;
                                Object var7_25;
                                block31 : {
                                    file2 = new File(String.format("%s/%s.tmp", object, object2));
                                    if (file2.exists()) {
                                        return;
                                    }
                                    file = new File(String.format("%s/%s.dex", object, object2));
                                    if (!file.exists()) {
                                        return;
                                    }
                                    long l2 = file.length();
                                    if (l2 <= 0L) {
                                        return;
                                    }
                                    arrby = new byte[(int)l2];
                                    var6_17 = null;
                                    var7_25 = null;
                                    object = new FileInputStream(file);
                                    int n2 = object.read(arrby);
                                    if (n2 > 0) break block31;
                                    try {
                                        object.close();
                                        break block32;
                                    }
                                    catch (IOException iOException) {}
                                }
                                vz vz2 = new vz();
                                vz2.d = Build.VERSION.SDK.getBytes();
                                vz2.c = object2.getBytes();
                                object2 = this.e.a(this.f, arrby).getBytes();
                                vz2.a = object2;
                                vz2.b = yi.a((byte[])object2);
                                file2.createNewFile();
                                object2 = new FileOutputStream(file2);
                                byte[] arrby2 = bjy.a(vz2);
                                object2.write(arrby2, 0, arrby2.length);
                                object2.close();
                                try {
                                    object.close();
                                    break block33;
                                }
                                catch (IOException iOException) {}
                                catch (Throwable throwable) {
                                    Object object3 = object;
                                    object = throwable;
                                    break block34;
                                }
                                catch (Throwable throwable) {
                                    object2 = var7_25;
                                    Object object4 = object;
                                    object = throwable;
                                    break block34;
                                }
                                catch (Throwable throwable) {
                                    Object var6_21 = null;
                                    object2 = var7_25;
                                }
                            }
                            if (var6_22 != null) {
                                var6_22.close();
                            }
                            break block39;
                            catch (agn | IOException | NoSuchAlgorithmException exception) {}
                            object = null;
                            object2 = var6_17;
                            break block35;
                            catch (agn | IOException | NoSuchAlgorithmException exception) {
                                object2 = var6_17;
                                break block35;
                            }
                        }
                        ata.a(file);
                        return;
                        catch (agn | IOException | NoSuchAlgorithmException exception) {}
                    }
                    if (object != null) {
                        object.close();
                    }
                    break block40;
                }
                try {
                    object2.close();
                }
                catch (IOException iOException) {}
                ata.a(file);
                return;
                catch (IOException iOException) {}
            }
            if (object2 != null) {
                try {
                    object2.close();
                }
                catch (IOException iOException) {}
            }
            ata.a(file);
            throw object;
            catch (IOException iOException) {}
        }
        if (object2 != null) {
            try {
                object2.close();
            }
            catch (IOException iOException) {}
        }
        ata.a(file);
    }

    private static void a(String string2) {
        ata.a(new File(string2));
    }

    static /* synthetic */ boolean a(int n2, ub ub2) {
        return ata.b(n2, ub2);
    }

    private static boolean b(int n2, ub ub2) {
        if (n2 < 4) {
            if (ub2 == null) {
                return true;
            }
            bsz<Boolean> bsz2 = btk.bI;
            if (bqj.f().a(bsz2).booleanValue() && (ub2.n == null || ub2.n.equals("0000000000000000000000000000000000000000000000000000000000000000"))) {
                return true;
            }
            bsz2 = btk.bJ;
            if (bqj.f().a(bsz2).booleanValue() && (ub2.W == null || ub2.W.a == null || ub2.W.a == -2L)) {
                return true;
            }
        }
        return false;
    }

    /*
     * Loose catch block
     * Enabled aggressive block sorting
     * Enabled unnecessary exception pruning
     * Enabled aggressive exception aggregation
     * Lifted jumps to return sites
     */
    private final boolean b(File object, String object2) {
        block38 : {
            Object object3;
            block37 : {
                block34 : {
                    block36 : {
                        Object var6_16;
                        block35 : {
                            byte[] arrby;
                            block33 : {
                                byte[] arrby2;
                                File file;
                                block32 : {
                                    arrby = new byte[](String.format("%s/%s.tmp", object, object2));
                                    if (!arrby.exists()) {
                                        return false;
                                    }
                                    file = new File(String.format("%s/%s.dex", object, object2));
                                    if (file.exists()) {
                                        return false;
                                    }
                                    var6_16 = null;
                                    object3 = null;
                                    long l2 = arrby.length();
                                    if (l2 <= 0L) {
                                        ata.a((File)arrby);
                                        return false;
                                    }
                                    arrby2 = new byte[(int)l2];
                                    object = new FileInputStream((File)arrby);
                                    if (object.read(arrby2) > 0) break block32;
                                    Log.d((String)b, (String)"Cannot read the cache data.");
                                    ata.a((File)arrby);
                                    try {
                                        object.close();
                                        return false;
                                    }
                                    catch (IOException iOException) {
                                        return false;
                                    }
                                }
                                vz vz2 = bjy.a(new vz(), arrby2);
                                if (!object2.equals(new String(vz2.c)) || !Arrays.equals(vz2.b, yi.a(vz2.a)) || !Arrays.equals(vz2.d, Build.VERSION.SDK.getBytes())) break block33;
                                arrby = this.e.a(this.f, new String(vz2.a));
                                file.createNewFile();
                                object2 = new FileOutputStream(file);
                                object2.write(arrby, 0, arrby.length);
                                try {
                                    object.close();
                                    break block34;
                                }
                                catch (IOException iOException) {}
                                catch (Throwable throwable) {
                                    object3 = object2;
                                    object2 = object;
                                    object = throwable;
                                    break block35;
                                }
                            }
                            ata.a((File)arrby);
                            try {
                                object.close();
                                return false;
                            }
                            catch (IOException iOException) {
                                return false;
                            }
                            catch (Throwable throwable) {
                                object2 = object;
                                object = throwable;
                                break block35;
                            }
                            catch (Throwable throwable) {
                                object2 = null;
                            }
                        }
                        if (object2 != null) {
                            object2.close();
                        }
                        break block37;
                        catch (agn | IOException | NoSuchAlgorithmException exception) {}
                        object = null;
                        object2 = var6_16;
                        break block36;
                        catch (agn | IOException | NoSuchAlgorithmException exception) {
                            object2 = var6_16;
                            break block36;
                        }
                        catch (agn | IOException | NoSuchAlgorithmException exception) {}
                    }
                    if (object != null) {
                        object.close();
                    }
                    break block38;
                }
                try {
                    object2.close();
                    return true;
                }
                catch (IOException iOException) {
                    return true;
                }
                catch (IOException iOException) {}
            }
            if (object3 == null) throw object;
            try {
                object3.close();
            }
            catch (IOException iOException) {
                throw object;
            }
            throw object;
            catch (IOException iOException) {}
        }
        if (object2 == null) return false;
        try {
            object2.close();
            return false;
        }
        catch (IOException iOException) {
            return false;
        }
    }

    /*
     * Enabled aggressive block sorting
     * Enabled unnecessary exception pruning
     * Enabled aggressive exception aggregation
     */
    private final void o() {
        try {
            if (this.g == null && this.j) {
                com.google.android.gms.ads.c.a a2 = new com.google.android.gms.ads.c.a(this.a);
                a2.a();
                this.g = a2;
            }
            return;
        }
        catch (d | e | IOException exception) {}
        this.g = null;
    }

    /*
     * Enabled force condition propagation
     * Lifted jumps to return sites
     */
    private final ub p() {
        try {
            PackageInfo packageInfo = this.a.getPackageManager().getPackageInfo(this.a.getPackageName(), 0);
            return zd.a(this.a, this.a.getPackageName(), Integer.toString(packageInfo.versionCode));
        }
        catch (Throwable throwable) {
            return null;
        }
    }

    public final Context a() {
        return this.a;
    }

    public final Method a(String object, String string2) {
        if ((object = this.p.get((Object)new Pair(object, (Object)string2))) == null) {
            return null;
        }
        return object.a();
    }

    final void a(int n2, boolean bl2) {
        if (!this.o) {
            return;
        }
        Future<?> future = this.c.submit(new atc(this, n2, bl2));
        if (n2 == 0) {
            this.l = future;
        }
    }

    public final /* varargs */ boolean a(String string2, String string3, Class<?> ... arrclass) {
        if (!this.p.containsKey((Object)new Pair((Object)string2, (Object)string3))) {
            this.p.put((Pair<String, String>)new Pair((Object)string2, (Object)string3), new bfj(this, string2, string3, arrclass));
            return true;
        }
        return false;
    }

    /*
     * Enabled aggressive block sorting
     * Enabled unnecessary exception pruning
     * Enabled aggressive exception aggregation
     */
    final ub b(int n2, boolean bl2) {
        if (n2 <= 0) return this.p();
        if (!bl2) return this.p();
        long l2 = n2 * 1000;
        try {
            Thread.sleep(l2);
            return this.p();
        }
        catch (InterruptedException interruptedException) {
            return this.p();
        }
    }

    public final boolean b() {
        return this.q;
    }

    public final ExecutorService c() {
        return this.c;
    }

    public final DexClassLoader d() {
        return this.d;
    }

    public final agm e() {
        return this.e;
    }

    public final byte[] f() {
        return this.f;
    }

    public final boolean g() {
        return this.n;
    }

    public final age h() {
        return this.m;
    }

    public final boolean i() {
        return this.o;
    }

    public final boolean j() {
        return this.r;
    }

    public final ub k() {
        return this.k;
    }

    public final Future l() {
        return this.l;
    }

    /*
     * Enabled aggressive block sorting
     * Enabled unnecessary exception pruning
     * Enabled aggressive exception aggregation
     */
    public final com.google.android.gms.ads.c.a m() {
        if (!this.h) {
            return null;
        }
        if (this.g != null) {
            return this.g;
        }
        if (this.i == null) return this.g;
        try {
            this.i.get(2000L, TimeUnit.MILLISECONDS);
            this.i = null;
            return this.g;
        }
        catch (InterruptedException | ExecutionException exception) {
            return this.g;
        }
        catch (TimeoutException timeoutException) {}
        this.i.cancel(true);
        return this.g;
    }

    public final int n() {
        if (this.m != null) {
            return age.a();
        }
        return Integer.MIN_VALUE;
    }

    final class a
    extends BroadcastReceiver {
        private /* synthetic */ ata a;

        private a(ata ata2) {
            this.a = ata2;
        }

        /* synthetic */ a(ata ata2, atb atb2) {
            this(ata2);
        }

        public final void onReceive(Context context, Intent intent) {
            if ("android.intent.action.USER_PRESENT".equals(intent.getAction())) {
                this.a.r = true;
                return;
            }
            if ("android.intent.action.SCREEN_OFF".equals(intent.getAction())) {
                this.a.r = false;
            }
        }
    }

}

