/*
 * Decompiled with CFR 0_132.
 * 
 * Could not load the following classes:
 *  android.accounts.Account
 *  android.app.PendingIntent
 *  android.content.Context
 *  android.content.Intent
 *  android.content.ServiceConnection
 *  android.os.Bundle
 *  android.os.DeadObjectException
 *  android.os.Handler
 *  android.os.IBinder
 *  android.os.IInterface
 *  android.os.Looper
 *  android.os.Message
 *  android.os.RemoteException
 *  android.text.TextUtils
 *  android.util.Log
 */
package com.google.android.gms.common.internal;

import android.accounts.Account;
import android.app.PendingIntent;
import android.content.Context;
import android.content.Intent;
import android.content.ServiceConnection;
import android.os.Bundle;
import android.os.DeadObjectException;
import android.os.Handler;
import android.os.IBinder;
import android.os.IInterface;
import android.os.Looper;
import android.os.Message;
import android.os.RemoteException;
import android.text.TextUtils;
import android.util.Log;
import com.google.android.gms.common.a;
import com.google.android.gms.common.api.Scope;
import com.google.android.gms.common.api.d;
import com.google.android.gms.common.internal.ah;
import com.google.android.gms.common.internal.ar;
import com.google.android.gms.common.internal.as;
import com.google.android.gms.common.internal.at;
import com.google.android.gms.common.internal.au;
import com.google.android.gms.common.internal.av;
import com.google.android.gms.common.internal.aw;
import com.google.android.gms.common.internal.ax;
import com.google.android.gms.common.internal.ay;
import com.google.android.gms.common.internal.az;
import com.google.android.gms.common.internal.ba;
import com.google.android.gms.common.internal.bb;
import com.google.android.gms.common.internal.bk;
import com.google.android.gms.common.internal.h;
import com.google.android.gms.common.internal.i;
import com.google.android.gms.common.internal.n;
import com.google.android.gms.common.internal.o;
import com.google.android.gms.common.internal.v;
import com.google.android.gms.common.internal.x;
import com.google.android.gms.common.k;
import com.google.android.gms.common.m;
import java.io.FileDescriptor;
import java.io.PrintWriter;
import java.text.SimpleDateFormat;
import java.util.ArrayList;
import java.util.Collections;
import java.util.Date;
import java.util.Locale;
import java.util.Set;
import java.util.concurrent.atomic.AtomicInteger;

public abstract class ap<T extends IInterface> {
    private static String[] A = new String[]{"service_esmobile", "service_googleme"};
    final Handler a;
    protected av b;
    protected AtomicInteger c = new AtomicInteger(0);
    private int d;
    private long e;
    private long f;
    private int g;
    private long h;
    private n i;
    private final Context j;
    private final Looper k;
    private final h l;
    private final m m;
    private final Object n = new Object();
    private final Object o = new Object();
    private x p;
    private T q;
    private final ArrayList<au<?>> r = new ArrayList();
    private ax s;
    private int t = 1;
    private final ar u;
    private final as v;
    private final int w;
    private final String x;
    private a y = null;
    private boolean z = false;

    protected ap(Context context, Looper looper, int n2, ar ar2, as as2, String string2) {
        this(context, looper, h.a(context), m.b(), n2, ah.a(ar2), ah.a(as2), null);
    }

    protected ap(Context context, Looper looper, h h2, m m2, int n2, ar ar2, as as2, String string2) {
        this.j = ah.a(context, (Object)"Context must not be null");
        this.k = ah.a(looper, (Object)"Looper must not be null");
        this.l = ah.a(h2, (Object)"Supervisor must not be null");
        this.m = ah.a(m2, (Object)"API availability must not be null");
        this.a = new at(this, looper);
        this.w = n2;
        this.u = ar2;
        this.v = as2;
        this.x = string2;
    }

    static /* synthetic */ a a(ap ap2, a a2) {
        ap2.y = a2;
        return a2;
    }

    static /* synthetic */ x a(ap ap2, x x2) {
        ap2.p = x2;
        return x2;
    }

    static /* synthetic */ Object a(ap ap2) {
        return ap2.o;
    }

    static /* synthetic */ void a(ap ap2, int n2) {
        ap2.c(16);
    }

    static /* synthetic */ void a(ap ap2, int n2, IInterface iInterface) {
        ap2.b(n2, null);
    }

    /*
     * Enabled aggressive block sorting
     * Enabled unnecessary exception pruning
     * Enabled aggressive exception aggregation
     */
    private final boolean a(int n2, int n3, T t2) {
        Object object = this.n;
        synchronized (object) {
            if (this.t != n2) {
                return false;
            }
            this.b(n3, t2);
            return true;
        }
    }

    static /* synthetic */ boolean a(ap ap2, int n2, int n3, IInterface iInterface) {
        return ap2.a(n2, n3, (T)iInterface);
    }

    /*
     * Enabled aggressive block sorting
     * Enabled unnecessary exception pruning
     * Enabled aggressive exception aggregation
     */
    private final void b(int n2, T object) {
        boolean bl2 = true;
        boolean bl3 = n2 == 4;
        boolean bl4 = object != null;
        if (bl3 != bl4) {
            bl2 = false;
        }
        ah.b(bl2);
        Object object2 = this.n;
        synchronized (object2) {
            this.t = n2;
            this.q = object;
            this.a(n2, object);
            switch (n2) {
                case 4: {
                    this.a(object);
                    break;
                }
                case 2: 
                case 3: {
                    CharSequence charSequence;
                    ax ax2;
                    String string2;
                    String string3;
                    if (this.s != null && this.i != null) {
                        object = this.i.a();
                        string3 = this.i.b();
                        charSequence = new StringBuilder(String.valueOf(object).length() + 70 + String.valueOf(string3).length());
                        charSequence.append("Calling connect() while still connected, missing disconnect() for ");
                        charSequence.append((String)object);
                        charSequence.append(" on ");
                        charSequence.append(string3);
                        Log.e((String)"GmsClient", (String)charSequence.toString());
                        this.l.a(this.i.a(), this.i.b(), this.i.c(), this.s, this.e());
                        this.c.incrementAndGet();
                    }
                    this.s = new ax(this, this.c.get());
                    this.i = new n(this.r(), this.j_(), false, 129);
                    object = this.l;
                    string3 = this.i.a();
                    if (object.a(new i(string3, (String)(charSequence = this.i.b()), n2 = this.i.c()), ax2 = this.s, string2 = this.e())) break;
                    object = this.i.a();
                    string3 = this.i.b();
                    charSequence = new StringBuilder(String.valueOf(object).length() + 34 + String.valueOf(string3).length());
                    charSequence.append("unable to connect to service: ");
                    charSequence.append((String)object);
                    charSequence.append(" on ");
                    charSequence.append(string3);
                    Log.e((String)"GmsClient", (String)charSequence.toString());
                    this.a(16, null, this.c.get());
                    break;
                }
                case 1: {
                    if (this.s == null) break;
                    this.l.a(this.j_(), this.r(), 129, this.s, this.e());
                    this.s = null;
                    break;
                }
            }
            return;
        }
    }

    static /* synthetic */ boolean b(ap ap2) {
        return ap2.z();
    }

    private final void c(int n2) {
        if (this.o()) {
            n2 = 5;
            this.z = true;
        } else {
            n2 = 4;
        }
        this.a.sendMessage(this.a.obtainMessage(n2, this.c.get(), 16));
    }

    static /* synthetic */ boolean c(ap ap2) {
        return ap2.z;
    }

    static /* synthetic */ a d(ap ap2) {
        return ap2.y;
    }

    static /* synthetic */ ar e(ap ap2) {
        return ap2.u;
    }

    private final String e() {
        if (this.x == null) {
            return this.j.getClass().getName();
        }
        return this.x;
    }

    static /* synthetic */ ArrayList f(ap ap2) {
        return ap2.r;
    }

    static /* synthetic */ as g(ap ap2) {
        return ap2.v;
    }

    /*
     * Enabled aggressive block sorting
     * Enabled unnecessary exception pruning
     * Enabled aggressive exception aggregation
     */
    private final boolean o() {
        Object object = this.n;
        synchronized (object) {
            if (this.t != 3) return false;
            return true;
        }
    }

    private final boolean z() {
        if (this.z) {
            return false;
        }
        if (TextUtils.isEmpty((CharSequence)this.b())) {
            return false;
        }
        if (TextUtils.isEmpty(null)) {
            return false;
        }
        try {
            Class.forName(this.b());
            return true;
        }
        catch (ClassNotFoundException classNotFoundException) {
            return false;
        }
    }

    public Bundle a() {
        return null;
    }

    protected abstract T a(IBinder var1);

    protected void a(int n2) {
        this.d = n2;
        this.e = System.currentTimeMillis();
    }

    protected final void a(int n2, Bundle bundle, int n3) {
        this.a.sendMessage(this.a.obtainMessage(7, n3, -1, (Object)new ba(this, n2, null)));
    }

    protected void a(int n2, IBinder iBinder, Bundle bundle, int n3) {
        this.a.sendMessage(this.a.obtainMessage(1, n3, -1, (Object)new az(this, n2, iBinder, bundle)));
    }

    void a(int n2, T t2) {
    }

    protected void a(T t2) {
        this.f = System.currentTimeMillis();
    }

    protected void a(a a2) {
        this.g = a2.c();
        this.h = System.currentTimeMillis();
    }

    public void a(av av2) {
        this.b = ah.a(av2, (Object)"Connection progress callbacks cannot be null.");
        this.b(2, null);
    }

    protected final void a(av av2, int n2, PendingIntent pendingIntent) {
        this.b = ah.a(av2, (Object)"Connection progress callbacks cannot be null.");
        this.a.sendMessage(this.a.obtainMessage(3, this.c.get(), n2, (Object)pendingIntent));
    }

    public void a(bb bb2) {
        bb2.a();
    }

    /*
     * Enabled aggressive block sorting
     * Enabled unnecessary exception pruning
     * Enabled aggressive exception aggregation
     * Converted monitor instructions to comments
     * Lifted jumps to return sites
     */
    public final void a(o object, Set<Scope> account) {
        block12 : {
            Bundle bundle = this.v();
            bk bk2 = new bk(this.w);
            bk2.a = this.j.getPackageName();
            bk2.d = bundle;
            if (account != null) {
                bk2.c = account.toArray(new Scope[account.size()]);
            }
            if (this.i()) {
                account = this.t_() != null ? this.t_() : new Account("<<default account>>", "com.google");
                bk2.e = account;
                if (object != null) {
                    bk2.b = object.asBinder();
                }
            } else if (this.y()) {
                bk2.e = this.t_();
            }
            bk2.f = this.q();
            try {
                object = this.o;
                // MONITORENTER : object
                if (this.p == null) break block12;
            }
            catch (RemoteException | RuntimeException runtimeException) {
                Log.w((String)"GmsClient", (String)"IGmsServiceBroker.getService failed", (Throwable)runtimeException);
                this.a(8, null, null, this.c.get());
                return;
            }
            catch (SecurityException securityException) {
                throw securityException;
            }
            catch (DeadObjectException deadObjectException) {
                Log.w((String)"GmsClient", (String)"IGmsServiceBroker.getService failed", (Throwable)deadObjectException);
                this.b(1);
                return;
            }
            this.p.a(new aw(this, this.c.get()), bk2);
            return;
        }
        Log.w((String)"GmsClient", (String)"mServiceBroker is null, client disconnected");
        // MONITOREXIT : object
        return;
    }

    /*
     * Unable to fully structure code
     * Enabled aggressive block sorting
     * Enabled unnecessary exception pruning
     * Enabled aggressive exception aggregation
     * Converted monitor instructions to comments
     * Lifted jumps to return sites
     */
    public final void a(String var1_1, FileDescriptor var2_2, PrintWriter var3_3, String[] var4_4) {
        var2_2 = this.n;
        // MONITORENTER : var2_2
        var5_5 = this.t;
        var4_4 = this.q;
        // MONITOREXIT : var2_2
        var2_2 = this.o;
        // MONITORENTER : var2_2
        var8_6 = this.p;
        // MONITOREXIT : var2_2
        var3_3.append((CharSequence)var1_1).append("mConnectState=");
        switch (var5_5) {
            default: {
                var2_2 = "UNKNOWN";
                break;
            }
            case 5: {
                var2_2 = "DISCONNECTING";
                break;
            }
            case 4: {
                var2_2 = "CONNECTED";
                break;
            }
            case 3: {
                var2_2 = "LOCAL_CONNECTING";
                break;
            }
            case 2: {
                var2_2 = "REMOTE_CONNECTING";
                break;
            }
            case 1: {
                var2_2 = "DISCONNECTED";
            }
        }
        var3_3.print((String)var2_2);
        ** break;
lbl31: // 1 sources:
        var3_3.append(" mService=");
        if (var4_4 == null) {
            var3_3.append("null");
        } else {
            var3_3.append(this.b()).append("@").append(Integer.toHexString(System.identityHashCode((Object)var4_4.asBinder())));
        }
        var3_3.append(" mServiceBroker=");
        if (var8_6 == null) {
            var3_3.println("null");
        } else {
            var3_3.append("IGmsServiceBroker@").println(Integer.toHexString(System.identityHashCode((Object)var8_6.asBinder())));
        }
        var4_4 = new SimpleDateFormat("yyyy-MM-dd HH:mm:ss.SSS", Locale.US);
        if (this.f > 0L) {
            var2_2 = var3_3.append((CharSequence)var1_1).append("lastConnectedTime=");
            var6_7 = this.f;
            var8_6 = var4_4.format(new Date(this.f));
            var9_8 = new StringBuilder(String.valueOf(var8_6).length() + 21);
            var9_8.append(var6_7);
            var9_8.append(" ");
            var9_8.append((String)var8_6);
            var2_2.println(var9_8.toString());
        }
        if (this.e > 0L) {
            var3_3.append((CharSequence)var1_1).append("lastSuspendedCause=");
            switch (this.d) {
                default: {
                    var2_2 = String.valueOf(this.d);
                    break;
                }
                case 2: {
                    var2_2 = "CAUSE_NETWORK_LOST";
                    break;
                }
                case 1: {
                    var2_2 = "CAUSE_SERVICE_DISCONNECTED";
                }
            }
            var3_3.append((CharSequence)var2_2);
            ** break;
lbl64: // 1 sources:
            var2_2 = var3_3.append(" lastSuspendedTime=");
            var6_7 = this.e;
            var8_6 = var4_4.format(new Date(this.e));
            var9_8 = new StringBuilder(String.valueOf(var8_6).length() + 21);
            var9_8.append(var6_7);
            var9_8.append(" ");
            var9_8.append((String)var8_6);
            var2_2.println(var9_8.toString());
        }
        if (this.h <= 0L) return;
        var3_3.append((CharSequence)var1_1).append("lastFailedStatus=").append(d.a(this.g));
        var1_1 = var3_3.append(" lastFailedTime=");
        var6_7 = this.h;
        var2_2 = var4_4.format(new Date(this.h));
        var3_3 = new StringBuilder(String.valueOf(var2_2).length() + 21);
        var3_3.append(var6_7);
        var3_3.append(" ");
        var3_3.append((String)var2_2);
        var1_1.println(var3_3.toString());
    }

    protected abstract String b();

    public final void b(int n2) {
        this.a.sendMessage(this.a.obtainMessage(6, this.c.get(), n2));
    }

    public boolean c() {
        return false;
    }

    public Intent d() {
        throw new UnsupportedOperationException("Not a sign in API");
    }

    /*
     * Enabled aggressive block sorting
     * Enabled unnecessary exception pruning
     * Enabled aggressive exception aggregation
     */
    public void f() {
        this.c.incrementAndGet();
        Object object = this.r;
        synchronized (object) {
            int n2 = this.r.size();
            int n3 = 0;
            do {
                if (n3 >= n2) {
                    this.r.clear();
                    // MONITOREXIT [5, 7, 8] lbl9 : MonitorExitStatement: MONITOREXIT : var3_1
                    object = this.o;
                    synchronized (object) {
                        this.p = null;
                    }
                    this.b(1, null);
                    return;
                }
                this.r.get(n3).e();
                ++n3;
            } while (true);
        }
    }

    /*
     * Enabled aggressive block sorting
     * Enabled unnecessary exception pruning
     * Enabled aggressive exception aggregation
     */
    public final boolean g() {
        Object object = this.n;
        synchronized (object) {
            if (this.t != 4) return false;
            return true;
        }
    }

    /*
     * Enabled aggressive block sorting
     * Enabled unnecessary exception pruning
     * Enabled aggressive exception aggregation
     */
    public final boolean h() {
        Object object = this.n;
        synchronized (object) {
            if (this.t == 2) return true;
            if (this.t != 3) return false;
            return true;
        }
    }

    public boolean i() {
        return false;
    }

    public boolean j() {
        return true;
    }

    protected abstract String j_();

    /*
     * Enabled aggressive block sorting
     * Enabled unnecessary exception pruning
     * Enabled aggressive exception aggregation
     */
    public final IBinder k() {
        Object object = this.o;
        synchronized (object) {
            if (this.p != null) return this.p.asBinder();
            return null;
        }
    }

    public final String l() {
        if (this.g() && this.i != null) {
            return this.i.b();
        }
        throw new RuntimeException("Failed to connect when checking package");
    }

    protected Set<Scope> p() {
        return Collections.EMPTY_SET;
    }

    public k[] q() {
        return new k[0];
    }

    protected String r() {
        return "com.google.android.gms";
    }

    public final void s() {
        int n2 = this.m.a(this.j);
        if (n2 != 0) {
            this.b(1, null);
            this.a(new ay(this), n2, null);
            return;
        }
        this.a(new ay(this));
    }

    public final Context t() {
        return this.j;
    }

    public Account t_() {
        return null;
    }

    public final Looper u() {
        return this.k;
    }

    protected Bundle v() {
        return new Bundle();
    }

    protected final void w() {
        if (this.g()) {
            return;
        }
        throw new IllegalStateException("Not connected. Call connect() and wait for onConnected() to be called.");
    }

    /*
     * Enabled aggressive block sorting
     * Enabled unnecessary exception pruning
     * Enabled aggressive exception aggregation
     */
    public final T x() {
        Object object = this.n;
        synchronized (object) {
            if (this.t == 5) {
                throw new DeadObjectException();
            }
            this.w();
            boolean bl2 = this.q != null;
            ah.a(bl2, (Object)"Client is connected but service is null");
            T t2 = this.q;
            return t2;
        }
    }

    public boolean y() {
        return false;
    }
}

