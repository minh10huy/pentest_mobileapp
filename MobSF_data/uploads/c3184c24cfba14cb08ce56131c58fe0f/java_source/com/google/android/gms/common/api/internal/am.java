/*
 * Decompiled with CFR 0_132.
 * 
 * Could not load the following classes:
 *  android.app.Application
 *  android.app.PendingIntent
 *  android.content.Context
 *  android.content.Intent
 *  android.os.Handler
 *  android.os.Handler$Callback
 *  android.os.HandlerThread
 *  android.os.Looper
 *  android.os.Message
 *  android.util.Log
 */
package com.google.android.gms.common.api.internal;

import android.app.Application;
import android.app.PendingIntent;
import android.content.Context;
import android.content.Intent;
import android.os.Handler;
import android.os.HandlerThread;
import android.os.Looper;
import android.os.Message;
import android.support.v4.g.b;
import android.util.Log;
import com.google.android.gms.c.e;
import com.google.android.gms.c.f;
import com.google.android.gms.common.api.Status;
import com.google.android.gms.common.api.a;
import com.google.android.gms.common.api.internal.a;
import com.google.android.gms.common.api.internal.an;
import com.google.android.gms.common.api.internal.ao;
import com.google.android.gms.common.api.internal.ba;
import com.google.android.gms.common.api.internal.bk;
import com.google.android.gms.common.api.internal.bu;
import com.google.android.gms.common.api.internal.by;
import com.google.android.gms.common.api.internal.ch;
import com.google.android.gms.common.api.internal.ck;
import com.google.android.gms.common.api.internal.cm;
import com.google.android.gms.common.api.internal.cn;
import com.google.android.gms.common.api.internal.co;
import com.google.android.gms.common.api.internal.cp;
import com.google.android.gms.common.api.internal.i;
import com.google.android.gms.common.api.k;
import com.google.android.gms.common.c;
import com.google.android.gms.common.internal.ah;
import com.google.android.gms.internal.agr;
import java.util.Collection;
import java.util.Iterator;
import java.util.Map;
import java.util.Set;
import java.util.concurrent.ConcurrentHashMap;
import java.util.concurrent.atomic.AtomicInteger;

public final class am
implements Handler.Callback {
    public static final Status a = new Status(4, "Sign-out occurred while this API call was in progress.");
    private static final Status b = new Status(4, "The user must be signed in to make this API call.");
    private static final Object f = new Object();
    private static am g;
    private long c = 5000L;
    private long d = 120000L;
    private long e = 10000L;
    private final Context h;
    private final c i;
    private int j = -1;
    private final AtomicInteger k = new AtomicInteger(1);
    private final AtomicInteger l = new AtomicInteger(0);
    private final Map<ck<?>, ao<?>> m = new ConcurrentHashMap(5, 0.75f, 1);
    private i n = null;
    private final Set<ck<?>> o = new b();
    private final Set<ck<?>> p = new b();
    private final Handler q;

    private am(Context context, Looper looper, c c2) {
        this.h = context;
        this.q = new Handler(looper, (Handler.Callback)this);
        this.i = c2;
        this.q.sendMessage(this.q.obtainMessage(6));
    }

    static /* synthetic */ int a(am am2, int n2) {
        am2.j = n2;
        return n2;
    }

    static /* synthetic */ Handler a(am am2) {
        return am2.q;
    }

    /*
     * Enabled aggressive block sorting
     * Enabled unnecessary exception pruning
     * Enabled aggressive exception aggregation
     */
    public static am a() {
        Object object = f;
        synchronized (object) {
            ah.a(g, (Object)"Must guarantee manager is non-null before using getInstance");
            return g;
        }
    }

    /*
     * Enabled aggressive block sorting
     * Enabled unnecessary exception pruning
     * Enabled aggressive exception aggregation
     */
    public static am a(Context object) {
        Object object2 = f;
        synchronized (object2) {
            if (g != null) return g;
            HandlerThread handlerThread = new HandlerThread("GoogleApiHandler", 9);
            handlerThread.start();
            handlerThread = handlerThread.getLooper();
            g = new am(object.getApplicationContext(), (Looper)handlerThread, c.a());
            return g;
        }
    }

    static /* synthetic */ int b(am am2) {
        return am2.j;
    }

    /*
     * Enabled aggressive block sorting
     * Enabled unnecessary exception pruning
     * Enabled aggressive exception aggregation
     */
    public static void b() {
        Object object = f;
        synchronized (object) {
            if (g != null) {
                am am2 = g;
                am2.l.incrementAndGet();
                am2.q.sendMessageAtFrontOfQueue(am2.q.obtainMessage(10));
            }
            return;
        }
    }

    private final void b(com.google.android.gms.common.api.e<?> e2) {
        ao ao2;
        ck<?> ck2 = e2.b();
        ao ao3 = ao2 = this.m.get(ck2);
        if (ao2 == null) {
            ao3 = new ao(this, e2);
            this.m.put(ck2, ao3);
        }
        if (ao3.k()) {
            this.p.add(ck2);
        }
        ao3.i();
    }

    static /* synthetic */ Context c(am am2) {
        return am2.h;
    }

    static /* synthetic */ long d(am am2) {
        return am2.c;
    }

    static /* synthetic */ long e(am am2) {
        return am2.d;
    }

    static /* synthetic */ Status f() {
        return b;
    }

    static /* synthetic */ i f(am am2) {
        return am2.n;
    }

    static /* synthetic */ Object g() {
        return f;
    }

    static /* synthetic */ Set g(am am2) {
        return am2.o;
    }

    static /* synthetic */ c h(am am2) {
        return am2.i;
    }

    private final void h() {
        for (ck<?> ck2 : this.p) {
            this.m.remove(ck2).a();
        }
        this.p.clear();
    }

    static /* synthetic */ long i(am am2) {
        return am2.e;
    }

    static /* synthetic */ Map j(am am2) {
        return am2.m;
    }

    final PendingIntent a(ck<?> object, int n2) {
        if ((object = this.m.get(object)) == null) {
            return null;
        }
        if ((object = object.m()) == null) {
            return null;
        }
        return PendingIntent.getActivity((Context)this.h, (int)n2, (Intent)object.d(), (int)134217728);
    }

    public final e<Map<ck<?>, String>> a(Iterable<? extends com.google.android.gms.common.api.e<?>> object) {
        cm cm2 = new cm((Iterable<? extends com.google.android.gms.common.api.e<?>>)object);
        object = object.iterator();
        while (object.hasNext()) {
            com.google.android.gms.common.api.e e2 = (com.google.android.gms.common.api.e)object.next();
            ao<?> ao2 = this.m.get(e2.b());
            if (ao2 != null && ao2.j()) {
                cm2.a(e2.b(), com.google.android.gms.common.a.a, ao2.b().l());
                continue;
            }
            this.q.sendMessage(this.q.obtainMessage(2, (Object)cm2));
            return cm2.b();
        }
        return cm2.b();
    }

    public final void a(com.google.android.gms.common.api.e<?> e2) {
        this.q.sendMessage(this.q.obtainMessage(7, e2));
    }

    public final <O extends a.a, TResult> void a(com.google.android.gms.common.api.e<O> e2, int n2, by<a.c, TResult> object, f<TResult> f2, bu bu2) {
        object = new ch<TResult>(n2, (by<a.c, TResult>)object, f2, bu2);
        this.q.sendMessage(this.q.obtainMessage(4, (Object)new bk((a)object, this.l.get(), e2)));
    }

    public final <O extends a.a> void a(com.google.android.gms.common.api.e<O> e2, int n2, cp<? extends k, a.c> object) {
        object = new ba<cp<? extends k, a.c>>(n2, (cp<? extends k, a.c>)object);
        this.q.sendMessage(this.q.obtainMessage(4, (Object)new bk((a)object, this.l.get(), e2)));
    }

    /*
     * Enabled aggressive block sorting
     * Enabled unnecessary exception pruning
     * Enabled aggressive exception aggregation
     */
    public final void a(i i2) {
        Object object = f;
        synchronized (object) {
            if (this.n != i2) {
                this.n = i2;
                this.o.clear();
                this.o.addAll(i2.g());
            }
            return;
        }
    }

    final boolean a(com.google.android.gms.common.a a2, int n2) {
        return this.i.a(this.h, a2, n2);
    }

    public final void b(com.google.android.gms.common.a a2, int n2) {
        if (!this.a(a2, n2)) {
            this.q.sendMessage(this.q.obtainMessage(5, n2, 0, (Object)a2));
        }
    }

    /*
     * Enabled aggressive block sorting
     * Enabled unnecessary exception pruning
     * Enabled aggressive exception aggregation
     */
    final void b(i i2) {
        Object object = f;
        synchronized (object) {
            if (this.n == i2) {
                this.n = null;
                this.o.clear();
            }
            return;
        }
    }

    public final int c() {
        return this.k.getAndIncrement();
    }

    public final void d() {
        this.q.sendMessage(this.q.obtainMessage(3));
    }

    final void e() {
        this.l.incrementAndGet();
        this.q.sendMessage(this.q.obtainMessage(10));
    }

    /*
     * Unable to fully structure code
     * Enabled aggressive block sorting
     * Lifted jumps to return sites
     */
    public final boolean handleMessage(Message var1_1) {
        var2_14 = var1_1.what;
        var3_15 = 300000L;
        switch (var2_14) {
            default: {
                var2_14 = var1_1.what;
                var1_2 = new StringBuilder(31);
                var1_2.append("Unknown message id: ");
                var1_2.append(var2_14);
                Log.w((String)"GoogleApiManager", (String)var1_2.toString());
                return false;
            }
            case 12: {
                if (this.m.containsKey(var1_1.obj) == false) return true;
                this.m.get(var1_1.obj).h();
                return true;
            }
            case 11: {
                if (this.m.containsKey(var1_1.obj) == false) return true;
                this.m.get(var1_1.obj).g();
                return true;
            }
            case 10: {
                this.h();
                return true;
            }
            case 9: {
                if (this.m.containsKey(var1_1.obj) == false) return true;
                this.m.get(var1_1.obj).f();
                return true;
            }
            case 7: {
                this.b((com.google.android.gms.common.api.e)var1_1.obj);
                return true;
            }
            case 6: {
                if (this.h.getApplicationContext() instanceof Application == false) return true;
                cn.a((Application)this.h.getApplicationContext());
                cn.a().a(new an(this));
                if (cn.a().a(true) != false) return true;
                this.e = 300000L;
                return true;
            }
            case 5: {
                var2_14 = var1_1.arg1;
                var5_16 = (com.google.android.gms.common.a)var1_1.obj;
                for (ao<?> var1_4 : this.m.values()) {
                    if (var1_4.l() != var2_14) continue;
                    ** GOTO lbl43
                }
                var1_5 = null;
lbl43: // 2 sources:
                if (var1_6 != null) {
                    var6_22 = this.i.b(var5_16.c());
                    var5_17 = var5_16.e();
                    var7_25 = new StringBuilder(String.valueOf(var6_22).length() + 69 + String.valueOf(var5_17).length());
                    var7_25.append("Error resolution was canceled by the user, original error message: ");
                    var7_25.append(var6_22);
                    var7_25.append(": ");
                    var7_25.append(var5_17);
                    var1_6.a(new Status(17, var7_25.toString()));
                    return true;
                }
                var1_7 = new StringBuilder(76);
                var1_7.append("Could not find API instance ");
                var1_7.append(var2_14);
                var1_7.append(" while trying to fail enqueued calls.");
                Log.wtf((String)"GoogleApiManager", (String)var1_7.toString(), (Throwable)new Exception());
                return true;
            }
            case 4: 
            case 8: 
            case 13: {
                var6_23 = (bk)var1_1.obj;
                var1_8 = var5_18 = this.m.get(var6_23.c.b());
                if (var5_18 == null) {
                    this.b(var6_23.c);
                    var1_9 = this.m.get(var6_23.c.b());
                }
                if (var1_10.k() && this.l.get() != var6_23.b) {
                    var6_23.a.a(am.a);
                    var1_10.a();
                    return true;
                }
                var1_10.a(var6_23.a);
                return true;
            }
            case 3: {
                var1_11 = this.m.values().iterator();
                while (var1_11.hasNext() != false) {
                    var5_19 = var1_11.next();
                    var5_19.d();
                    var5_19.i();
                }
                return true;
            }
            case 2: {
                var1_12 = (cm)var1_1.obj;
                var5_20 = var1_12.a().iterator();
                while (var5_20.hasNext() != false) {
                    var6_24 = var5_20.next();
                    var7_26 = this.m.get(var6_24);
                    if (var7_26 == null) {
                        var1_12.a(var6_24, new com.google.android.gms.common.a(13), null);
                        return true;
                    }
                    if (var7_26.j()) {
                        var1_12.a(var6_24, com.google.android.gms.common.a.a, var7_26.b().l());
                        continue;
                    }
                    if (var7_26.e() != null) {
                        var1_12.a(var6_24, var7_26.e(), null);
                        continue;
                    }
                    var7_26.a(var1_12);
                }
                return true;
            }
            case 1: 
        }
        if (((Boolean)var1_1.obj).booleanValue()) {
            var3_15 = 10000L;
        }
        this.e = var3_15;
        this.q.removeMessages(12);
        var1_13 = this.m.keySet().iterator();
        while (var1_13.hasNext() != false) {
            var5_21 = var1_13.next();
            this.q.sendMessageDelayed(this.q.obtainMessage(12, var5_21), this.e);
        }
        return true;
    }
}

