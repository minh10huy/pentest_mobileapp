/*
 * Decompiled with CFR 0_132.
 * 
 * Could not load the following classes:
 *  android.content.Context
 *  android.os.Binder
 *  android.text.TextUtils
 */
package com.google.android.gms.internal;

import android.content.Context;
import android.os.Binder;
import android.text.TextUtils;
import com.google.android.gms.common.aa;
import com.google.android.gms.common.internal.ah;
import com.google.android.gms.common.util.f;
import com.google.android.gms.common.util.v;
import com.google.android.gms.common.z;
import com.google.android.gms.internal.aao;
import com.google.android.gms.internal.aau;
import com.google.android.gms.internal.aaz;
import com.google.android.gms.internal.abb;
import com.google.android.gms.internal.abd;
import com.google.android.gms.internal.abx;
import com.google.android.gms.internal.acc;
import com.google.android.gms.internal.aci;
import com.google.android.gms.internal.acj;
import com.google.android.gms.internal.ack;
import com.google.android.gms.internal.acl;
import com.google.android.gms.internal.acm;
import com.google.android.gms.internal.acn;
import com.google.android.gms.internal.aco;
import com.google.android.gms.internal.acp;
import com.google.android.gms.internal.acq;
import com.google.android.gms.internal.acr;
import com.google.android.gms.internal.acs;
import com.google.android.gms.internal.acu;
import com.google.android.gms.internal.acv;
import com.google.android.gms.internal.acw;
import com.google.android.gms.internal.acx;
import com.google.android.gms.internal.acy;
import com.google.android.gms.internal.acz;
import com.google.android.gms.internal.ada;
import com.google.android.gms.internal.afh;
import com.google.android.gms.internal.afj;
import com.google.android.gms.internal.afk;
import com.google.android.gms.internal.zw;
import com.google.android.gms.internal.zz;
import java.util.ArrayList;
import java.util.Collections;
import java.util.Iterator;
import java.util.List;
import java.util.concurrent.Callable;
import java.util.concurrent.ExecutionException;
import java.util.concurrent.Future;

public final class ach
extends aau {
    private final acc a;
    private Boolean b;
    private String c;

    public ach(acc acc2) {
        this(acc2, null);
    }

    private ach(acc acc2, String string2) {
        ah.a(acc2);
        this.a = acc2;
        this.c = null;
    }

    static /* synthetic */ acc a(ach ach2) {
        return ach2.a;
    }

    /*
     * Unable to fully structure code
     * Enabled aggressive block sorting
     * Enabled unnecessary exception pruning
     * Enabled aggressive exception aggregation
     * Lifted jumps to return sites
     */
    private final void a(String var1_1, boolean var2_2) {
        if (TextUtils.isEmpty((CharSequence)var1_1)) {
            this.a.f().y().a("Measurement Service called without app package");
            throw new SecurityException("Measurement Service called without app package");
        }
        if (!var2_2) ** GOTO lbl12
        try {
            block8 : {
                block7 : {
                    block6 : {
                        block5 : {
                            if (this.b != null) break block5;
                            if (!"com.google.android.gms".equals(this.c) && !v.a(this.a.t(), Binder.getCallingUid()) && !aa.a(this.a.t()).a(Binder.getCallingUid())) break block6;
                            break block7;
                        }
lbl10: // 2 sources:
                        do {
                            if (this.b != false) return;
lbl12: // 2 sources:
                            if (this.c == null && z.a(this.a.t(), Binder.getCallingUid(), var1_1)) {
                                this.c = var1_1;
                            }
                            if (!var1_1.equals(this.c)) throw new SecurityException(String.format("Unknown calling package name '%s'.", new Object[]{var1_1}));
                            return;
                            break;
                        } while (true);
                    }
                    var2_2 = false;
                    break block8;
                }
                var2_2 = true;
            }
            this.b = var2_2;
            ** continue;
        }
        catch (SecurityException var3_3) {}
        this.a.f().y().a("Measurement Service called with invalid calling package. appId", abb.a(var1_1));
        throw var3_3;
    }

    private final void b(zw zw2, boolean bl2) {
        ah.a(zw2);
        this.a(zw2.a, false);
        this.a.o().e(zw2.b);
    }

    /*
     * Enabled aggressive block sorting
     * Enabled unnecessary exception pruning
     * Enabled aggressive exception aggregation
     */
    @Override
    public final List<afh> a(zw zw2, boolean bl2) {
        this.b(zw2, false);
        Object object = this.a.h().a(new acy(this, zw2));
        try {
            Object object2 = (List)object.get();
            object = new ArrayList(object2.size());
            object2 = object2.iterator();
            do {
                if (!object2.hasNext()) {
                    return object;
                }
                afj afj2 = (afj)object2.next();
                if (!bl2 && afk.h(afj2.c)) continue;
                object.add(new afh(afj2));
            } while (true);
        }
        catch (InterruptedException | ExecutionException exception) {
            this.a.f().y().a("Failed to get user attributes. appId", abb.a(zw2.a), exception);
            return null;
        }
    }

    @Override
    public final List<zz> a(String object, String string2, zw zw2) {
        this.b(zw2, false);
        object = this.a.h().a(new acp(this, zw2, (String)object, string2));
        try {
            object = (List)object.get();
            return object;
        }
        catch (InterruptedException | ExecutionException exception) {
            this.a.f().y().a("Failed to get conditional user properties", exception);
            return Collections.emptyList();
        }
    }

    @Override
    public final List<zz> a(String object, String string2, String string3) {
        this.a((String)object, true);
        object = this.a.h().a(new acq(this, (String)object, string2, string3));
        try {
            object = (List)object.get();
            return object;
        }
        catch (InterruptedException | ExecutionException exception) {
            this.a.f().y().a("Failed to get conditional user properties", exception);
            return Collections.emptyList();
        }
    }

    /*
     * Enabled aggressive block sorting
     * Enabled unnecessary exception pruning
     * Enabled aggressive exception aggregation
     */
    @Override
    public final List<afh> a(String string2, String arrayList, String iterator, boolean bl2) {
        this.a(string2, true);
        arrayList = this.a.h().a(new aco(this, string2, (String)((Object)arrayList), (String)((Object)iterator)));
        try {
            iterator = (List)arrayList.get();
            arrayList = new ArrayList<afh>(iterator.size());
            iterator = iterator.iterator();
            do {
                if (!iterator.hasNext()) {
                    return arrayList;
                }
                afj afj2 = (afj)iterator.next();
                if (!bl2 && afk.h(afj2.c)) continue;
                arrayList.add(new afh(afj2));
            } while (true);
        }
        catch (InterruptedException | ExecutionException exception) {
            this.a.f().y().a("Failed to get user attributes. appId", abb.a(string2), exception);
            return Collections.emptyList();
        }
    }

    /*
     * Enabled aggressive block sorting
     * Enabled unnecessary exception pruning
     * Enabled aggressive exception aggregation
     */
    @Override
    public final List<afh> a(String arrayList, String iterator, boolean bl2, zw zw2) {
        this.b(zw2, false);
        arrayList = this.a.h().a(new acn(this, zw2, (String)((Object)arrayList), (String)((Object)iterator)));
        try {
            iterator = (List)arrayList.get();
            arrayList = new ArrayList<afh>(iterator.size());
            iterator = iterator.iterator();
            do {
                if (!iterator.hasNext()) {
                    return arrayList;
                }
                afj afj2 = (afj)iterator.next();
                if (!bl2 && afk.h(afj2.c)) continue;
                arrayList.add(new afh(afj2));
            } while (true);
        }
        catch (InterruptedException | ExecutionException exception) {
            this.a.f().y().a("Failed to get user attributes. appId", abb.a(zw2.a), exception);
            return Collections.emptyList();
        }
    }

    @Override
    public final void a(long l2, String string2, String string3, String string4) {
        this.a.h().a(new ada(this, string3, string4, string2, l2));
    }

    @Override
    public final void a(aao aao2, zw zw2) {
        ah.a(aao2);
        this.b(zw2, false);
        this.a.h().a(new acs(this, aao2, zw2));
    }

    @Override
    public final void a(aao aao2, String string2, String string3) {
        ah.a(aao2);
        ah.a(string2);
        this.a(string2, true);
        this.a.h().a(new acu(this, aao2, string2));
    }

    /*
     * Enabled aggressive block sorting
     */
    @Override
    public final void a(afh object, zw object2) {
        ah.a(object);
        this.b((zw)object2, false);
        if (object.a() == null) {
            abx abx2 = this.a.h();
            object2 = new acw(this, (afh)object, (zw)object2);
            object = abx2;
        } else {
            abx abx3 = this.a.h();
            object2 = new acx(this, (afh)object, (zw)object2);
            object = abx3;
        }
        object.a((Runnable)object2);
    }

    @Override
    public final void a(zw object) {
        this.b((zw)object, false);
        object = new acz(this, (zw)object);
        if (this.a.h().z()) {
            object.run();
            return;
        }
        this.a.h().a((Runnable)object);
    }

    /*
     * Enabled aggressive block sorting
     */
    @Override
    public final void a(zz object) {
        abx abx2;
        ah.a(object);
        ah.a(object.c);
        this.a(object.a, true);
        zz zz2 = new zz((zz)object);
        if (object.c.a() == null) {
            abx2 = this.a.h();
            object = new acl(this, zz2);
        } else {
            abx2 = this.a.h();
            object = new acm(this, zz2);
        }
        abx2.a((Runnable)object);
    }

    /*
     * Enabled aggressive block sorting
     */
    @Override
    public final void a(zz object, zw object2) {
        ah.a(object);
        ah.a(object.c);
        this.b((zw)object2, false);
        zz zz2 = new zz((zz)object);
        zz2.a = object2.a;
        if (object.c.a() == null) {
            object = this.a.h();
            acj acj2 = new acj(this, zz2, (zw)object2);
            object2 = object;
            object = acj2;
        } else {
            abx abx2 = this.a.h();
            object = new ack(this, zz2, (zw)object2);
            object2 = abx2;
        }
        object2.a((Runnable)object);
    }

    /*
     * Enabled aggressive block sorting
     * Enabled unnecessary exception pruning
     * Enabled aggressive exception aggregation
     */
    @Override
    public final byte[] a(aao aao2, String string2) {
        ah.a(string2);
        ah.a(aao2);
        this.a(string2, true);
        this.a.f().D().a("Log and bundle. event", this.a.p().a(aao2.a));
        long l2 = this.a.u().c() / 1000000L;
        byte[] arrby = this.a.h().b(new acv(this, aao2, string2));
        try {
            byte[] arrby2;
            arrby = arrby2 = (byte[])arrby.get();
            if (arrby2 == null) {
                this.a.f().y().a("Log and bundle returned null. appId", abb.a(string2));
                arrby = new byte[]{};
            }
            long l3 = this.a.u().c() / 1000000L;
            this.a.f().D().a("Log and bundle processed. event, size, time_ms", this.a.p().a(aao2.a), arrby.length, l3 - l2);
            return arrby;
        }
        catch (InterruptedException | ExecutionException exception) {
            this.a.f().y().a("Failed to log and bundle. appId, event, error", abb.a(string2), this.a.p().a(aao2.a), exception);
            return null;
        }
    }

    @Override
    public final void b(zw zw2) {
        this.b(zw2, false);
        this.a.h().a(new aci(this, zw2));
    }

    @Override
    public final String c(zw zw2) {
        this.b(zw2, false);
        return this.a.a(zw2.a);
    }

    @Override
    public final void d(zw zw2) {
        this.a(zw2.a, false);
        this.a.h().a(new acr(this, zw2));
    }
}

