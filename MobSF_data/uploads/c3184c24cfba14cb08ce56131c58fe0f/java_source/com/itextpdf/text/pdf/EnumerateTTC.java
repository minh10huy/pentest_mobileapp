/*
 * Decompiled with CFR 0_132.
 */
package com.itextpdf.text.pdf;

import com.itextpdf.text.DocumentException;
import com.itextpdf.text.error_messages.MessageLocalization;
import com.itextpdf.text.pdf.RandomAccessFileOrArray;
import com.itextpdf.text.pdf.TrueTypeFont;
import java.util.HashMap;

class EnumerateTTC
extends TrueTypeFont {
    protected String[] names;

    EnumerateTTC(String string2) {
        this.fileName = string2;
        this.rf = new RandomAccessFileOrArray(string2);
        this.findNames();
    }

    EnumerateTTC(byte[] arrby) {
        this.fileName = "Byte array TTC";
        this.rf = new RandomAccessFileOrArray(arrby);
        this.findNames();
    }

    void findNames() {
        block11 : {
            this.tables = new HashMap();
            if (!this.readStandardString(4).equals("ttcf")) break block11;
            this.rf.skipBytes(4);
            int n2 = this.rf.readInt();
            this.names = new String[n2];
            int n3 = (int)this.rf.getFilePointer();
            for (int i2 = 0; i2 < n2; ++i2) {
                block12 : {
                    this.tables.clear();
                    this.rf.seek(n3);
                    this.rf.skipBytes(i2 * 4);
                    this.directoryOffset = this.rf.readInt();
                    this.rf.seek(this.directoryOffset);
                    if (this.rf.readInt() != 65536) break block12;
                    int n4 = this.rf.readUnsignedShort();
                    this.rf.skipBytes(6);
                    for (int i3 = 0; i3 < n4; ++i3) {
                        String string2 = this.readStandardString(4);
                        this.rf.skipBytes(4);
                        int n5 = this.rf.readInt();
                        int n6 = this.rf.readInt();
                        this.tables.put(string2, new int[]{n5, n6});
                    }
                    this.names[i2] = this.getBaseFont();
                    continue;
                }
                throw new DocumentException(MessageLocalization.getComposedMessage("1.is.not.a.valid.ttf.file", this.fileName));
            }
            if (this.rf != null) {
                this.rf.close();
            }
            return;
        }
        try {
            throw new DocumentException(MessageLocalization.getComposedMessage("1.is.not.a.valid.ttc.file", this.fileName));
        }
        catch (Throwable throwable) {
            if (this.rf != null) {
                this.rf.close();
            }
            throw throwable;
        }
    }

    String[] getNames() {
        return this.names;
    }
}

