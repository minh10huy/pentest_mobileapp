/*
 * Decompiled with CFR 0_132.
 */
package com.itextpdf.text.pdf;

import com.itextpdf.text.ExceptionConverter;
import com.itextpdf.text.Image;
import com.itextpdf.text.pdf.codec.CCITTG4Encoder;
import com.itextpdf.text.pdf.qrcode.ByteMatrix;
import com.itextpdf.text.pdf.qrcode.EncodeHintType;
import com.itextpdf.text.pdf.qrcode.QRCodeWriter;
import com.itextpdf.text.pdf.qrcode.WriterException;
import java.util.Map;

public class BarcodeQRCode {
    ByteMatrix bm;

    public BarcodeQRCode(String string2, int n2, int n3, Map<EncodeHintType, Object> map) {
        try {
            this.bm = new QRCodeWriter().encode(string2, n2, n3, map);
            return;
        }
        catch (WriterException writerException) {
            throw new ExceptionConverter(writerException);
        }
    }

    private byte[] getBitMatrix() {
        int n2 = this.bm.getWidth();
        int n3 = this.bm.getHeight();
        int n4 = (n2 + 7) / 8;
        byte[] arrby = new byte[n4 * n3];
        byte[][] arrby2 = this.bm.getArray();
        for (int i2 = 0; i2 < n3; ++i2) {
            byte[] arrby3 = arrby2[i2];
            for (int i3 = 0; i3 < n2; ++i3) {
                if (arrby3[i3] == 0) continue;
                int n5 = n4 * i2 + i3 / 8;
                arrby[n5] = (byte)(arrby[n5] | (byte)(128 >> i3 % 8));
            }
        }
        return arrby;
    }

    public Image getImage() {
        byte[] arrby = CCITTG4Encoder.compress(this.getBitMatrix(), this.bm.getWidth(), this.bm.getHeight());
        return Image.getInstance(this.bm.getWidth(), this.bm.getHeight(), false, 256, 1, arrby, null);
    }
}

