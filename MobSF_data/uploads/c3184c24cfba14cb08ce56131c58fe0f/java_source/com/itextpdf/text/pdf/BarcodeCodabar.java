/*
 * Decompiled with CFR 0_132.
 */
package com.itextpdf.text.pdf;

import com.itextpdf.text.BaseColor;
import com.itextpdf.text.ExceptionConverter;
import com.itextpdf.text.Rectangle;
import com.itextpdf.text.error_messages.MessageLocalization;
import com.itextpdf.text.pdf.Barcode;
import com.itextpdf.text.pdf.BaseFont;
import com.itextpdf.text.pdf.PdfContentByte;

public class BarcodeCodabar
extends Barcode {
    private static final byte[][] BARS;
    private static final String CHARS = "0123456789-$:/.+ABCD";
    private static final int START_STOP_IDX = 16;

    static {
        byte[] arrby = new byte[]{0, 0, 0, 0, 1, 1, 0};
        byte[] arrby2 = new byte[]{0, 0, 0, 1, 0, 0, 1};
        byte[] arrby3 = new byte[]{1, 1, 0, 0, 0, 0, 0};
        byte[] arrby4 = new byte[]{0, 0, 1, 0, 0, 1, 0};
        byte[] arrby5 = new byte[]{1, 0, 0, 0, 0, 1, 0};
        byte[] arrby6 = new byte[]{0, 1, 0, 0, 1, 0, 0};
        byte[] arrby7 = new byte[]{1, 0, 0, 0, 1, 0, 1};
        byte[] arrby8 = new byte[]{1, 0, 1, 0, 0, 0, 1};
        byte[] arrby9 = new byte[]{1, 0, 1, 0, 1, 0, 0};
        byte[] arrby10 = new byte[]{0, 0, 1, 0, 1, 0, 1};
        byte[] arrby11 = new byte[]{0, 1, 0, 1, 0, 0, 1};
        byte[] arrby12 = new byte[]{0, 0, 0, 1, 1, 1, 0};
        BARS = new byte[][]{{0, 0, 0, 0, 0, 1, 1}, arrby, arrby2, arrby3, arrby4, arrby5, {0, 1, 0, 0, 0, 0, 1}, arrby6, {0, 1, 1, 0, 0, 0, 0}, {1, 0, 0, 1, 0, 0, 0}, {0, 0, 0, 1, 1, 0, 0}, {0, 0, 1, 1, 0, 0, 0}, arrby7, arrby8, arrby9, arrby10, {0, 0, 1, 1, 0, 1, 0}, arrby11, {0, 0, 0, 1, 0, 1, 1}, arrby12};
    }

    public BarcodeCodabar() {
        try {
            this.x = 0.8f;
            this.n = 2.0f;
            this.font = BaseFont.createFont("Helvetica", "winansi", false);
            this.baseline = this.size = 8.0f;
            this.barHeight = this.size * 3.0f;
            this.textAlignment = 1;
            this.generateChecksum = false;
            this.checksumText = false;
            this.startStopText = false;
            this.codeType = 12;
            return;
        }
        catch (Exception exception) {
            throw new ExceptionConverter(exception);
        }
    }

    public static String calculateChecksum(String string2) {
        int n2;
        if (string2.length() < 2) {
            return string2;
        }
        CharSequence charSequence = string2.toUpperCase();
        int n3 = charSequence.length();
        int n4 = 0;
        for (n2 = 0; n2 < n3; ++n2) {
            n4 += CHARS.indexOf(charSequence.charAt(n2));
        }
        n2 = (n4 + 15) / 16;
        charSequence = new StringBuilder();
        charSequence.append(string2.substring(0, --n3));
        charSequence.append(CHARS.charAt(n2 * 16 - n4));
        charSequence.append(string2.substring(n3));
        return charSequence.toString();
    }

    public static byte[] getBarsCodabar(String string2) {
        int n2 = (string2 = string2.toUpperCase()).length();
        if (n2 >= 2) {
            int n3;
            if (CHARS.indexOf(string2.charAt(0)) >= 16 && CHARS.indexOf(string2.charAt(n3 = n2 - 1)) >= 16) {
                byte[] arrby = new byte[string2.length() * 8 - 1];
                for (int i2 = 0; i2 < n2; ++i2) {
                    int n4 = CHARS.indexOf(string2.charAt(i2));
                    if (n4 >= 16 && i2 > 0 && i2 < n3) {
                        throw new IllegalArgumentException(MessageLocalization.getComposedMessage("in.codabar.start.stop.characters.are.only.allowed.at.the.extremes", new Object[0]));
                    }
                    if (n4 >= 0) {
                        System.arraycopy(BARS[n4], 0, arrby, i2 * 8, 7);
                        continue;
                    }
                    throw new IllegalArgumentException(MessageLocalization.getComposedMessage("the.character.1.is.illegal.in.codabar", string2.charAt(i2)));
                }
                return arrby;
            }
            throw new IllegalArgumentException(MessageLocalization.getComposedMessage("codabar.must.have.one.of.abcd.as.start.stop.character", new Object[0]));
        }
        throw new IllegalArgumentException(MessageLocalization.getComposedMessage("codabar.must.have.at.least.a.start.and.stop.character", new Object[0]));
    }

    @Override
    public Rectangle getBarcodeSize() {
        int n2;
        float f2;
        Object object = this.code;
        Object object2 = object;
        if (this.generateChecksum) {
            object2 = object;
            if (this.checksumText) {
                object2 = BarcodeCodabar.calculateChecksum(this.code);
            }
        }
        object = object2;
        if (!this.startStopText) {
            object = object2.substring(1, object2.length() - 1);
        }
        object2 = this.font;
        float f3 = 0.0f;
        if (object2 != null) {
            f3 = this.baseline > 0.0f ? this.baseline - this.font.getFontDescriptor(3, this.size) : - this.baseline + this.size;
            object2 = this.font;
            if (this.altText != null) {
                object = this.altText;
            }
            f2 = object2.getWidthPoint((String)object, this.size);
        } else {
            f2 = 0.0f;
        }
        object = this.code;
        if (this.generateChecksum) {
            object = BarcodeCodabar.calculateChecksum(this.code);
        }
        object = BarcodeCodabar.getBarsCodabar((String)object);
        int n3 = 0;
        for (n2 = 0; n2 < ((byte[])object).length; ++n2) {
            n3 += object[n2];
        }
        n2 = ((byte[])object).length;
        return new Rectangle(Math.max(this.x * ((float)(n2 - n3) + (float)n3 * this.n), f2), this.barHeight + f3);
    }

    /*
     * Enabled aggressive block sorting
     */
    @Override
    public Rectangle placeBarcode(PdfContentByte pdfContentByte, BaseColor baseColor, BaseColor baseColor2) {
        int n2;
        int n3;
        float f2;
        float f3;
        int n4;
        float f4;
        int n5;
        String string2;
        byte[] arrby;
        float f5;
        float f6;
        block24 : {
            block21 : {
                block18 : {
                    block22 : {
                        block23 : {
                            block19 : {
                                block20 : {
                                    void var15_8;
                                    void var15_14;
                                    String string3 = string2 = this.code;
                                    if (this.generateChecksum) {
                                        String string4 = string2;
                                        if (this.checksumText) {
                                            String string5 = BarcodeCodabar.calculateChecksum(this.code);
                                        }
                                    }
                                    boolean bl2 = this.startStopText;
                                    n4 = 1;
                                    string2 = var15_8;
                                    if (!bl2) {
                                        string2 = var15_8.substring(1, var15_8.length() - 1);
                                    }
                                    BaseFont baseFont = this.font;
                                    f5 = 0.0f;
                                    if (baseFont != null) {
                                        BaseFont baseFont2 = this.font;
                                        if (this.altText != null) {
                                            string2 = this.altText;
                                        }
                                        f4 = baseFont2.getWidthPoint(string2, this.size);
                                    } else {
                                        f4 = 0.0f;
                                    }
                                    if (this.generateChecksum) {
                                        String string6 = BarcodeCodabar.calculateChecksum(this.code);
                                    } else {
                                        String string7 = this.code;
                                    }
                                    arrby = BarcodeCodabar.getBarsCodabar((String)var15_14);
                                    n5 = 0;
                                    n3 = 0;
                                    for (n2 = 0; n2 < arrby.length; n3 += arrby[n2], ++n2) {
                                    }
                                    n2 = arrby.length;
                                    f2 = this.x * ((float)(n2 - n3) + (float)n3 * this.n);
                                    n3 = this.textAlignment;
                                    if (n3 == 0) break block18;
                                    if (n3 == 2) break block19;
                                    if (f4 <= f2) break block20;
                                    f4 = (f4 - f2) / 2.0f;
                                    break block21;
                                }
                                f4 = (f2 - f4) / 2.0f;
                                break block22;
                            }
                            if (f4 <= f2) break block23;
                            f4 -= f2;
                            break block21;
                        }
                        f4 = f2 - f4;
                    }
                    f6 = f4;
                    f4 = 0.0f;
                    break block24;
                }
                f4 = 0.0f;
            }
            f6 = 0.0f;
        }
        if (this.font != null) {
            if (this.baseline <= 0.0f) {
                f2 = this.barHeight - this.baseline;
            } else {
                f5 = - this.font.getFontDescriptor(3, this.size);
                f3 = this.baseline;
                f2 = f5;
                f5 = f3 + f5;
            }
        } else {
            f2 = 0.0f;
        }
        f3 = f4;
        n3 = n4;
        n2 = n5;
        if (baseColor != null) {
            pdfContentByte.setColorFill(baseColor);
            n2 = n5;
            n3 = n4;
            f3 = f4;
        }
        while (n2 < arrby.length) {
            f4 = arrby[n2] == 0 ? this.x : this.x * this.n;
            if (n3 != 0) {
                pdfContentByte.rectangle(f3, f5, f4 - this.inkSpreading, this.barHeight);
            }
            n3 ^= 1;
            f3 += f4;
            ++n2;
        }
        pdfContentByte.fill();
        if (this.font != null) {
            if (baseColor2 != null) {
                pdfContentByte.setColorFill(baseColor2);
            }
            pdfContentByte.beginText();
            pdfContentByte.setFontAndSize(this.font, this.size);
            pdfContentByte.setTextMatrix(f6, f2);
            pdfContentByte.showText(string2);
            pdfContentByte.endText();
        }
        return this.getBarcodeSize();
    }
}

