/*
 * Decompiled with CFR 0_132.
 */
package com.itextpdf.text.pdf.codec;

import com.itextpdf.text.Image;
import com.itextpdf.text.Utilities;
import com.itextpdf.text.error_messages.MessageLocalization;
import com.itextpdf.text.pdf.ByteBuffer;
import com.itextpdf.text.pdf.ICC_Profile;
import com.itextpdf.text.pdf.PdfArray;
import com.itextpdf.text.pdf.PdfDictionary;
import com.itextpdf.text.pdf.PdfLiteral;
import com.itextpdf.text.pdf.PdfName;
import com.itextpdf.text.pdf.PdfNumber;
import com.itextpdf.text.pdf.PdfObject;
import com.itextpdf.text.pdf.PdfReader;
import com.itextpdf.text.pdf.PdfString;
import java.io.ByteArrayInputStream;
import java.io.ByteArrayOutputStream;
import java.io.DataInputStream;
import java.io.IOException;
import java.io.InputStream;
import java.net.URL;
import java.util.zip.Inflater;
import java.util.zip.InflaterInputStream;

public class PngImage {
    public static final String IDAT = "IDAT";
    public static final String IEND = "IEND";
    public static final String IHDR = "IHDR";
    public static final String PLTE = "PLTE";
    public static final int[] PNGID = new int[]{137, 80, 78, 71, 13, 10, 26, 10};
    private static final int PNG_FILTER_AVERAGE = 3;
    private static final int PNG_FILTER_NONE = 0;
    private static final int PNG_FILTER_PAETH = 4;
    private static final int PNG_FILTER_SUB = 1;
    private static final int PNG_FILTER_UP = 2;
    private static final int TRANSFERSIZE = 4096;
    public static final String cHRM = "cHRM";
    public static final String gAMA = "gAMA";
    public static final String iCCP = "iCCP";
    private static final PdfName[] intents = new PdfName[]{PdfName.PERCEPTUAL, PdfName.RELATIVECOLORIMETRIC, PdfName.SATURATION, PdfName.ABSOLUTECOLORIMETRIC};
    public static final String pHYs = "pHYs";
    public static final String sRGB = "sRGB";
    public static final String tRNS = "tRNS";
    float XYRatio;
    PdfDictionary additional = new PdfDictionary();
    int bitDepth;
    int bytesPerPixel;
    byte[] colorTable;
    int colorType;
    int compressionMethod;
    DataInputStream dataStream;
    int dpiX;
    int dpiY;
    int filterMethod;
    float gamma = 1.0f;
    boolean genBWMask;
    boolean hasCHRM = false;
    int height;
    ICC_Profile icc_profile;
    NewByteArrayOutputStream idat = new NewByteArrayOutputStream();
    byte[] image;
    int inputBands;
    PdfName intent;
    int interlaceMethod;
    InputStream is;
    boolean palShades;
    byte[] smask;
    byte[] trans;
    int transBlue = -1;
    int transGreen = -1;
    int transRedGray = -1;
    int width;
    float xB;
    float xG;
    float xR;
    float xW;
    float yB;
    float yG;
    float yR;
    float yW;

    PngImage(InputStream inputStream) {
        this.is = inputStream;
    }

    private static void decodeAverageFilter(byte[] arrby, byte[] arrby2, int n2, int n3) {
        int n4;
        for (n4 = 0; n4 < n3; ++n4) {
            arrby[n4] = (byte)((arrby[n4] & 255) + (arrby2[n4] & 255) / 2);
        }
        for (n4 = n3; n4 < n2; ++n4) {
            arrby[n4] = (byte)((arrby[n4] & 255) + ((arrby[n4 - n3] & 255) + (arrby2[n4] & 255)) / 2);
        }
    }

    private static void decodePaethFilter(byte[] arrby, byte[] arrby2, int n2, int n3) {
        int n4;
        for (n4 = 0; n4 < n3; ++n4) {
            arrby[n4] = (byte)((arrby[n4] & 255) + (arrby2[n4] & 255));
        }
        for (n4 = n3; n4 < n2; ++n4) {
            byte by2 = arrby[n4];
            int n5 = n4 - n3;
            arrby[n4] = (byte)((by2 & 255) + PngImage.paethPredictor(arrby[n5] & 255, arrby2[n4] & 255, arrby2[n5] & 255));
        }
    }

    private static void decodeSubFilter(byte[] arrby, int n2, int n3) {
        for (int i2 = n3; i2 < n2; ++i2) {
            arrby[i2] = (byte)((arrby[i2] & 255) + (arrby[i2 - n3] & 255));
        }
    }

    private static void decodeUpFilter(byte[] arrby, byte[] arrby2, int n2) {
        for (int i2 = 0; i2 < n2; ++i2) {
            arrby[i2] = (byte)((arrby[i2] & 255) + (arrby2[i2] & 255));
        }
    }

    public static Image getImage(InputStream inputStream) {
        return new PngImage(inputStream).getImage();
    }

    public static Image getImage(String string2) {
        return PngImage.getImage(Utilities.toURL(string2));
    }

    /*
     * Loose catch block
     * Enabled aggressive block sorting
     * Enabled unnecessary exception pruning
     * Enabled aggressive exception aggregation
     * Lifted jumps to return sites
     */
    public static Image getImage(URL object) {
        Object object2;
        block4 : {
            Image image;
            object2 = object.openStream();
            try {
                image = PngImage.getImage((InputStream)object2);
                image.setUrl((URL)object);
                if (object2 == null) return image;
            }
            catch (Throwable throwable) {
                object = object2;
                object2 = throwable;
            }
            object2.close();
            return image;
            break block4;
            catch (Throwable throwable) {
                object = null;
            }
        }
        if (object == null) throw object2;
        object.close();
        throw object2;
    }

    public static Image getImage(byte[] arrby) {
        Image image = PngImage.getImage(new ByteArrayInputStream(arrby));
        image.setOriginalData(arrby);
        return image;
    }

    public static final int getInt(InputStream inputStream) {
        return (inputStream.read() << 24) + (inputStream.read() << 16) + (inputStream.read() << 8) + inputStream.read();
    }

    static int getPixel(byte[] arrby, int n2, int n3, int n4, int n5) {
        if (n4 == 8) {
            return arrby[n5 * n3 + n2] & 255;
        }
        int n6 = 8 / n4;
        return arrby[n5 * n3 + n2 / n6] >> 8 - n2 % n6 * n4 - n4 & (1 << n4) - 1;
    }

    public static final String getString(InputStream inputStream) {
        StringBuffer stringBuffer = new StringBuffer();
        for (int i2 = 0; i2 < 4; ++i2) {
            stringBuffer.append((char)inputStream.read());
        }
        return stringBuffer.toString();
    }

    public static final int getWord(InputStream inputStream) {
        return (inputStream.read() << 8) + inputStream.read();
    }

    private static int paethPredictor(int n2, int n3, int n4) {
        int n5 = n2 + n3 - n4;
        int n6 = Math.abs(n5 - n2);
        int n7 = Math.abs(n5 - n3);
        n5 = Math.abs(n5 - n4);
        if (n6 <= n7 && n6 <= n5) {
            return n2;
        }
        if (n7 <= n5) {
            return n3;
        }
        return n4;
    }

    static void setPixel(byte[] arrby, int[] arrn, int n2, int n3, int n4, int n5, int n6, int n7) {
        int n8 = 0;
        int n9 = 0;
        if (n6 == 8) {
            for (n6 = n9; n6 < n3; ++n6) {
                arrby[n7 * n5 + n4 * n3 + n6] = (byte)arrn[n6 + n2];
            }
        } else if (n6 == 16) {
            for (n6 = n8; n6 < n3; ++n6) {
                arrby[n7 * n5 + n4 * n3 + n6] = (byte)(arrn[n6 + n2] >>> 8);
            }
        } else {
            n3 = 8 / n6;
            n5 = n7 * n5 + n4 / n3;
            arrby[n5] = (byte)(arrn[n2] << 8 - n4 % n3 * n6 - n6 | arrby[n5]);
        }
    }

    boolean checkMarker(String string2) {
        if (string2.length() != 4) {
            return false;
        }
        for (int i2 = 0; i2 < 4; ++i2) {
            char c2 = string2.charAt(i2);
            if (c2 >= 'a' && c2 <= 'z') continue;
            if (c2 >= 'A') {
                if (c2 <= 'Z') continue;
                return false;
            }
            return false;
        }
        return true;
    }

    /*
     * Unable to fully structure code
     * Enabled aggressive block sorting
     * Lifted jumps to return sites
     */
    void decodeIdat() {
        block19 : {
            block18 : {
                block17 : {
                    block15 : {
                        block13 : {
                            block16 : {
                                block14 : {
                                    var2_2 = var1_1 = this.bitDepth;
                                    if (var1_1 == 16) {
                                        var2_2 = 8;
                                    }
                                    var1_1 = -1;
                                    var3_3 = this.bitDepth == 16 ? 2 : 1;
                                    this.bytesPerPixel = var3_3;
                                    var3_3 = this.colorType;
                                    if (var3_3 == 0) break block13;
                                    if (var3_3 == 6) break block14;
                                    switch (var3_3) {
                                        default: {
                                            break block15;
                                        }
                                        case 4: {
                                            var1_1 = this.width * this.height;
                                            var2_2 = this.bytesPerPixel * 2;
                                            ** break;
                                        }
                                        case 3: {
                                            if (this.interlaceMethod == 1) {
                                                var1_1 = (var2_2 * this.width + 7) / 8 * this.height;
                                            }
                                            this.bytesPerPixel = 1;
                                            break block15;
                                        }
                                        case 2: 
                                    }
                                    var1_1 = this.width * 3 * this.height;
                                    var2_2 = this.bytesPerPixel * 3;
                                    break block16;
                                }
                                var1_1 = this.width * 3 * this.height;
                                var2_2 = this.bytesPerPixel * 4;
                            }
                            this.bytesPerPixel = var2_2;
                            break block15;
                        }
                        var1_1 = (var2_2 * this.width + 7) / 8 * this.height;
                    }
                    if (var1_1 >= 0) {
                        this.image = new byte[var1_1];
                    }
                    if (!this.palShades) break block17;
                    var1_1 = this.width;
                    break block18;
                }
                if (!this.genBWMask) break block19;
                var1_1 = (this.width + 7) / 8;
            }
            this.smask = new byte[var1_1 * this.height];
        }
        this.dataStream = new DataInputStream(new InflaterInputStream(new ByteArrayInputStream(this.idat.getBuf(), 0, this.idat.size()), new Inflater()));
        if (this.interlaceMethod != 1) {
            var1_1 = 0;
            var2_2 = 1;
            var3_3 = this.width;
            var4_4 = this.height;
        } else {
            this.decodePass(0, 0, 8, 8, (this.width + 7) / 8, (this.height + 7) / 8);
            this.decodePass(4, 0, 8, 8, (this.width + 3) / 8, (this.height + 7) / 8);
            this.decodePass(0, 4, 4, 8, (this.width + 3) / 4, (this.height + 3) / 8);
            this.decodePass(2, 0, 4, 4, (this.width + 1) / 4, (this.height + 3) / 4);
            this.decodePass(0, 2, 2, 4, (this.width + 1) / 2, (this.height + 1) / 4);
            var2_2 = 2;
            this.decodePass(1, 0, 2, 2, this.width / 2, (this.height + 1) / 2);
            var1_1 = 1;
            var3_3 = this.width;
            var4_4 = this.height / 2;
        }
        this.decodePass(0, var1_1, 1, var2_2, var3_3, var4_4);
    }

    /*
     * Enabled aggressive block sorting
     * Enabled unnecessary exception pruning
     * Enabled aggressive exception aggregation
     */
    void decodePass(int n2, int n3, int n4, int n5, int n6, int n7) {
        if (n6 == 0) {
            return;
        }
        if (n7 == 0) {
            return;
        }
        int n8 = (this.inputBands * n6 * this.bitDepth + 7) / 8;
        byte[] arrby = new byte[n8];
        byte[] arrby2 = new byte[n8];
        int n9 = 0;
        while (n9 < n7) {
            int n10;
            try {
                n10 = this.dataStream.read();
            }
            catch (Exception exception) {}
            try {
                this.dataStream.readFully(arrby, 0, n8);
            }
            catch (Exception exception) {}
            n10 = 0;
            switch (n10) {
                default: {
                    throw new RuntimeException(MessageLocalization.getComposedMessage("png.filter.unknown", new Object[0]));
                }
                case 4: {
                    PngImage.decodePaethFilter(arrby, arrby2, n8, this.bytesPerPixel);
                    break;
                }
                case 3: {
                    PngImage.decodeAverageFilter(arrby, arrby2, n8, this.bytesPerPixel);
                    break;
                }
                case 2: {
                    PngImage.decodeUpFilter(arrby, arrby2, n8);
                    break;
                }
                case 1: {
                    PngImage.decodeSubFilter(arrby, n8, this.bytesPerPixel);
                }
                case 0: 
            }
            this.processPixels(arrby, n2, n4, n3, n6);
            ++n9;
            n3 += n5;
            byte[] arrby3 = arrby;
            arrby = arrby2;
            arrby2 = arrby3;
        }
    }

    /*
     * Enabled aggressive block sorting
     */
    PdfObject getColorspace() {
        if (this.icc_profile != null) {
            if ((this.colorType & 2) == 0) {
                return PdfName.DEVICEGRAY;
            }
            return PdfName.DEVICERGB;
        }
        if (this.gamma == 1.0f && !this.hasCHRM) {
            if ((this.colorType & 2) == 0) {
                return PdfName.DEVICEGRAY;
            }
            return PdfName.DEVICERGB;
        }
        PdfArray pdfArray = new PdfArray();
        PdfDictionary pdfDictionary = new PdfDictionary();
        if ((this.colorType & 2) == 0) {
            if (this.gamma == 1.0f) {
                return PdfName.DEVICEGRAY;
            }
            pdfArray.add(PdfName.CALGRAY);
            pdfDictionary.put(PdfName.GAMMA, new PdfNumber(this.gamma));
            pdfDictionary.put(PdfName.WHITEPOINT, new PdfLiteral("[1 1 1]"));
        } else {
            PdfArray pdfArray2;
            PdfObject pdfObject = new PdfLiteral("[1 1 1]");
            pdfArray.add(PdfName.CALRGB);
            if (this.gamma != 1.0f) {
                pdfArray2 = new PdfArray();
                PdfNumber pdfNumber = new PdfNumber(this.gamma);
                pdfArray2.add(pdfNumber);
                pdfArray2.add(pdfNumber);
                pdfArray2.add(pdfNumber);
                pdfDictionary.put(PdfName.GAMMA, pdfArray2);
            }
            if (this.hasCHRM) {
                float f2 = this.yW * ((this.xG - this.xB) * this.yR - (this.xR - this.xB) * this.yG + (this.xR - this.xG) * this.yB);
                float f3 = this.yR * ((this.xG - this.xB) * this.yW - (this.xW - this.xB) * this.yG + (this.xW - this.xG) * this.yB) / f2;
                float f4 = this.xR * f3 / this.yR;
                float f5 = ((1.0f - this.xR) / this.yR - 1.0f) * f3;
                float f6 = (- this.yG) * ((this.xR - this.xB) * this.yW - (this.xW - this.xB) * this.yR + (this.xW - this.xR) * this.yB) / f2;
                float f7 = this.xG * f6 / this.yG;
                float f8 = ((1.0f - this.xG) / this.yG - 1.0f) * f6;
                f2 = this.yB * ((this.xR - this.xG) * this.yW - (this.xW - this.xG) * this.yW + (this.xW - this.xR) * this.yG) / f2;
                float f9 = this.xB * f2 / this.yB;
                float f10 = ((1.0f - this.xB) / this.yB - 1.0f) * f2;
                pdfObject = new PdfArray();
                pdfObject.add(new PdfNumber(f4 + f7 + f9));
                pdfObject.add(new PdfNumber(1.0f));
                pdfObject.add(new PdfNumber(f5 + f8 + f10));
                pdfArray2 = new PdfArray();
                pdfArray2.add(new PdfNumber(f4));
                pdfArray2.add(new PdfNumber(f3));
                pdfArray2.add(new PdfNumber(f5));
                pdfArray2.add(new PdfNumber(f7));
                pdfArray2.add(new PdfNumber(f6));
                pdfArray2.add(new PdfNumber(f8));
                pdfArray2.add(new PdfNumber(f9));
                pdfArray2.add(new PdfNumber(f2));
                pdfArray2.add(new PdfNumber(f10));
                pdfDictionary.put(PdfName.MATRIX, pdfArray2);
            }
            pdfDictionary.put(PdfName.WHITEPOINT, pdfObject);
        }
        pdfArray.add(pdfDictionary);
        return pdfArray;
    }

    /*
     * Exception decompiling
     */
    Image getImage() {
        // This method has failed to decompile.  When submitting a bug report, please provide this stack trace, and (if you hold appropriate legal rights) the relevant class file.
        // org.benf.cfr.reader.util.CannotPerformDecode: reachable test BLOCK was exited and re-entered.
        // org.benf.cfr.reader.bytecode.analysis.opgraph.op3rewriters.Misc.getFarthestReachableInRange(Misc.java:143)
        // org.benf.cfr.reader.bytecode.analysis.opgraph.op3rewriters.SwitchReplacer.examineSwitchContiguity(SwitchReplacer.java:385)
        // org.benf.cfr.reader.bytecode.analysis.opgraph.op3rewriters.SwitchReplacer.replaceRawSwitches(SwitchReplacer.java:65)
        // org.benf.cfr.reader.bytecode.CodeAnalyser.getAnalysisInner(CodeAnalyser.java:416)
        // org.benf.cfr.reader.bytecode.CodeAnalyser.getAnalysisOrWrapFail(CodeAnalyser.java:196)
        // org.benf.cfr.reader.bytecode.CodeAnalyser.getAnalysis(CodeAnalyser.java:141)
        // org.benf.cfr.reader.entities.attributes.AttributeCode.analyse(AttributeCode.java:95)
        // org.benf.cfr.reader.entities.Method.analyse(Method.java:372)
        // org.benf.cfr.reader.entities.ClassFile.analyseMid(ClassFile.java:867)
        // org.benf.cfr.reader.entities.ClassFile.analyseTop(ClassFile.java:768)
        // org.benf.cfr.reader.Main.doJar(Main.java:141)
        // org.benf.cfr.reader.Main.main(Main.java:242)
        throw new IllegalStateException("Decompilation failed");
    }

    int[] getPixel(byte[] arrby) {
        int n2;
        int n3 = this.bitDepth;
        int n4 = 0;
        int n5 = 0;
        if (n3 != 8) {
            if (n3 != 16) {
                int[] arrn = new int[arrby.length * 8 / this.bitDepth];
                n3 = 8 / this.bitDepth;
                int n6 = this.bitDepth;
                n4 = 0;
                for (n2 = 0; n2 < arrby.length; ++n2) {
                    n5 = n3 - 1;
                    while (n5 >= 0) {
                        arrn[n4] = arrby[n2] >>> this.bitDepth * n5 & (1 << n6) - 1;
                        --n5;
                        ++n4;
                    }
                }
                return arrn;
            }
            int[] arrn = new int[arrby.length / 2];
            for (n2 = n4; n2 < arrn.length; ++n2) {
                n4 = n2 * 2;
                arrn[n2] = ((arrby[n4] & 255) << 8) + (arrby[n4 + 1] & 255);
            }
            return arrn;
        }
        int[] arrn = new int[arrby.length];
        for (n2 = n5; n2 < arrn.length; ++n2) {
            arrn[n2] = arrby[n2] & 255;
        }
        return arrn;
    }

    /*
     * Unable to fully structure code
     * Enabled aggressive block sorting
     * Lifted jumps to return sites
     */
    void processPixels(byte[] var1_1, int var2_2, int var3_3, int var4_4, int var5_5) {
        block21 : {
            block22 : {
                block20 : {
                    block19 : {
                        block18 : {
                            var1_1 = this.getPixel(var1_1);
                            var6_6 = this.colorType;
                            var9_7 = 0;
                            if (var6_6 == 0) break block18;
                            if (var6_6 == 6) ** GOTO lbl-1000
                            switch (var6_6) {
                                default: {
                                    var6_6 = 0;
                                    ** break;
                                }
                                case 2: lbl-1000: // 2 sources:
                                {
                                    var6_6 = 3;
                                    ** break;
                                }
                                case 3: 
                                case 4: 
                            }
                        }
                        var6_6 = 1;
lbl16: // 3 sources:
                        if (this.image != null) {
                            var8_8 = this.width;
                            var7_9 = this.bitDepth == 16 ? 8 : this.bitDepth;
                            var10_10 = (var8_8 * var6_6 * var7_9 + 7) / 8;
                            var8_8 = var2_2;
                            for (var7_9 = 0; var7_9 < var5_5; var8_8 += var3_3, ++var7_9) {
                                PngImage.setPixel(this.image, var1_1, this.inputBands * var7_9, var6_6, var8_8, var4_4, this.bitDepth, var10_10);
                            }
                        }
                        if (!this.palShades) break block19;
                        if ((this.colorType & 4) != 0) {
                            if (this.bitDepth == 16) {
                                for (var7_9 = 0; var7_9 < var5_5; ++var7_9) {
                                    var8_8 = this.inputBands * var7_9 + var6_6;
                                    var1_1[var8_8] = var1_1[var8_8] >>> 8;
                                }
                            }
                            var8_8 = this.width;
                            var7_9 = var2_2;
                            var2_2 = var9_7;
                            while (var2_2 < var5_5) {
                                PngImage.setPixel(this.smask, var1_1, this.inputBands * var2_2 + var6_6, 1, var7_9, var4_4, 8, var8_8);
                                var7_9 += var3_3;
                                ++var2_2;
                            }
                            return;
                        }
                        break block20;
                    }
                    if (this.genBWMask == false) return;
                    var6_6 = this.colorType;
                    if (var6_6 == 0) break block21;
                    switch (var6_6) {
                        default: {
                            return;
                        }
                        case 3: {
                            var8_8 = (this.width + 7) / 8;
                            var11_12 = new int[1];
                            var7_9 = 0;
                            var6_6 = var2_2;
                            var2_2 = var7_9;
                            while (var2_2 < var5_5) {
                                var7_9 = var1_1[var2_2];
                                var7_9 = var7_9 < this.trans.length && this.trans[var7_9] == 0 ? 1 : 0;
                                var11_12[0] = var7_9;
                                PngImage.setPixel(this.smask, var11_12, 0, 1, var6_6, var4_4, 1, var8_8);
                                var6_6 += var3_3;
                                ++var2_2;
                            }
                            return;
                        }
                        case 2: 
                    }
                    break block22;
                }
                var8_8 = this.width;
                var11_11 = new int[1];
                var7_9 = 0;
                var6_6 = var2_2;
                var2_2 = var7_9;
                while (var2_2 < var5_5) {
                    var7_9 = var1_1[var2_2];
                    var11_11[0] = var7_9 < this.trans.length ? this.trans[var7_9] : 255;
                    PngImage.setPixel(this.smask, var11_11, 0, 1, var6_6, var4_4, 8, var8_8);
                    var6_6 += var3_3;
                    ++var2_2;
                }
                return;
            }
            var8_8 = (this.width + 7) / 8;
            var11_13 = new int[1];
            var7_9 = 0;
            var6_6 = var2_2;
            var2_2 = var7_9;
            while (var2_2 < var5_5) {
                var7_9 = this.inputBands * var2_2;
                var7_9 = var1_1[var7_9] == this.transRedGray && var1_1[var7_9 + 1] == this.transGreen && var1_1[var7_9 + 2] == this.transBlue ? 1 : 0;
                var11_13[0] = var7_9;
                PngImage.setPixel(this.smask, var11_13, 0, 1, var6_6, var4_4, 1, var8_8);
                var6_6 += var3_3;
                ++var2_2;
                ** break;
lbl93: // 1 sources:
            }
            return;
        }
        var8_8 = (this.width + 7) / 8;
        var11_14 = new int[1];
        var7_9 = 0;
        var6_6 = var2_2;
        var2_2 = var7_9;
        while (var2_2 < var5_5) {
            var7_9 = var1_1[var2_2] == this.transRedGray ? 1 : 0;
            var11_14[0] = var7_9;
            PngImage.setPixel(this.smask, var11_14, 0, 1, var6_6, var4_4, 1, var8_8);
            var6_6 += var3_3;
            ++var2_2;
        }
    }

    /*
     * Unable to fully structure code
     * Enabled aggressive block sorting
     * Enabled unnecessary exception pruning
     * Enabled aggressive exception aggregation
     * Lifted jumps to return sites
     */
    void readPng() {
        for (var1_1 = 0; var1_1 < PngImage.PNGID.length; ++var1_1) {
            if (PngImage.PNGID[var1_1] != this.is.read()) throw new IOException(MessageLocalization.getComposedMessage("file.is.not.a.valid.png", new Object[0]));
        }
        var7_2 = new byte[4096];
        do {
            block28 : {
                block24 : {
                    block36 : {
                        block33 : {
                            block35 : {
                                block34 : {
                                    block32 : {
                                        block30 : {
                                            block31 : {
                                                block29 : {
                                                    block27 : {
                                                        block25 : {
                                                            block26 : {
                                                                var8_8 = PngImage.getString(this.is);
                                                                if (var1_1 < 0) throw new IOException(MessageLocalization.getComposedMessage("corrupted.png.file", new Object[0]));
                                                                if (this.checkMarker((String)var8_8) == false) throw new IOException(MessageLocalization.getComposedMessage("corrupted.png.file", new Object[0]));
                                                                if ("IDAT".equals(var8_8)) break block24;
                                                                if (!"tRNS".equals(var8_8)) break block25;
                                                                var2_3 = this.colorType;
                                                                if (var2_3 == 0) break block26;
                                                                switch (var2_3) {
                                                                    default: {
                                                                        var2_3 = var1_1;
                                                                        ** break;
                                                                    }
                                                                    case 3: {
                                                                        var2_3 = var1_1;
                                                                        if (var1_1 > 0) {
                                                                            this.trans = new byte[var1_1];
                                                                            for (var2_3 = 0; var2_3 < var1_1; ++var2_3) {
                                                                                this.trans[var2_3] = (byte)this.is.read();
                                                                            }
                                                                            var2_3 = 0;
                                                                            ** break;
                                                                        }
                                                                        ** GOTO lbl176
                                                                    }
                                                                    case 2: 
                                                                }
                                                                var2_3 = var1_1;
                                                                if (var1_1 >= 6) {
                                                                    var2_3 = var1_1 - 6;
                                                                    var1_1 = PngImage.getWord(this.is);
                                                                    var3_4 = PngImage.getWord(this.is);
                                                                    var4_5 = PngImage.getWord(this.is);
                                                                    if (this.bitDepth == 16) {
                                                                        this.transRedGray = var1_1;
                                                                        this.transGreen = var3_4;
                                                                        this.transBlue = var4_5;
                                                                        ** break;
                                                                    }
                                                                    var8_8 = this.additional;
                                                                    var9_10 = PdfName.MASK;
                                                                    var10_11 = new StringBuilder();
                                                                    var10_11.append("[");
                                                                    var10_11.append(var1_1);
                                                                    var10_11.append(" ");
                                                                    var10_11.append(var1_1);
                                                                    var10_11.append(" ");
                                                                    var10_11.append(var3_4);
                                                                    var10_11.append(" ");
                                                                    var10_11.append(var3_4);
                                                                    var10_11.append(" ");
                                                                    var10_11.append(var4_5);
                                                                    var10_11.append(" ");
                                                                    var10_11.append(var4_5);
                                                                    var10_11.append("]");
                                                                    var8_8.put((PdfName)var9_10, new PdfLiteral(var10_11.toString()));
                                                                    ** break;
                                                                }
lbl57: // 6 sources:
                                                                ** GOTO lbl176
                                                            }
                                                            var2_3 = var1_1;
                                                            if (var1_1 >= 2) {
                                                                var2_3 = var1_1 - 2;
                                                                var1_1 = PngImage.getWord(this.is);
                                                                if (this.bitDepth == 16) {
                                                                    this.transRedGray = var1_1;
                                                                } else {
                                                                    var8_8 = this.additional;
                                                                    var9_10 = PdfName.MASK;
                                                                    var10_11 = new StringBuilder();
                                                                    var10_11.append("[");
                                                                    var10_11.append(var1_1);
                                                                    var10_11.append(" ");
                                                                    var10_11.append(var1_1);
                                                                    var10_11.append("]");
                                                                    var8_8.put((PdfName)var9_10, new PdfLiteral(var10_11.toString()));
                                                                }
                                                            }
                                                            ** GOTO lbl176
                                                        }
                                                        if (!"IHDR".equals(var8_8)) break block27;
                                                        this.width = PngImage.getInt(this.is);
                                                        this.height = PngImage.getInt(this.is);
                                                        this.bitDepth = this.is.read();
                                                        this.colorType = this.is.read();
                                                        this.compressionMethod = this.is.read();
                                                        this.filterMethod = this.is.read();
                                                        this.interlaceMethod = this.is.read();
                                                        break block28;
                                                    }
                                                    var6_7 = "PLTE".equals(var8_8);
                                                    var5_6 = true;
                                                    if (!var6_7) break block29;
                                                    var2_3 = var1_1;
                                                    if (this.colorType != 3) ** GOTO lbl176
                                                    var8_8 = new PdfArray();
                                                    var8_8.add(PdfName.INDEXED);
                                                    var8_8.add(this.getColorspace());
                                                    var8_8.add(new PdfNumber(var1_1 / 3 - 1));
                                                    var9_10 = new ByteBuffer();
                                                    for (var1_1 = PngImage.getInt((InputStream)this.is); var1_1 > 0; --var1_1) {
                                                        var9_10.append_i(this.is.read());
                                                    }
                                                    var9_10 = var9_10.toByteArray();
                                                    this.colorTable = var9_10;
                                                    var8_8.add(new PdfString(var9_10));
                                                    this.additional.put(PdfName.COLORSPACE, (PdfObject)var8_8);
                                                    break block28;
                                                }
                                                if (!"pHYs".equals(var8_8)) break block30;
                                                var1_1 = PngImage.getInt(this.is);
                                                var2_3 = PngImage.getInt(this.is);
                                                if (this.is.read() != 1) break block31;
                                                this.dpiX = (int)((float)var1_1 * 0.0254f + 0.5f);
                                                this.dpiY = (int)((float)var2_3 * 0.0254f + 0.5f);
                                                break block28;
                                            }
                                            if (var2_3 == 0) break block28;
                                            this.XYRatio = (float)var1_1 / (float)var2_3;
                                            break block28;
                                        }
                                        if (!"cHRM".equals(var8_8)) break block32;
                                        this.xW = (float)PngImage.getInt(this.is) / 100000.0f;
                                        this.yW = (float)PngImage.getInt(this.is) / 100000.0f;
                                        this.xR = (float)PngImage.getInt(this.is) / 100000.0f;
                                        this.yR = (float)PngImage.getInt(this.is) / 100000.0f;
                                        this.xG = (float)PngImage.getInt(this.is) / 100000.0f;
                                        this.yG = (float)PngImage.getInt(this.is) / 100000.0f;
                                        this.xB = (float)PngImage.getInt(this.is) / 100000.0f;
                                        this.yB = (float)PngImage.getInt(this.is) / 100000.0f;
                                        if (Math.abs(this.xW) < 1.0E-4f || Math.abs(this.yW) < 1.0E-4f || Math.abs(this.xR) < 1.0E-4f || Math.abs(this.yR) < 1.0E-4f || Math.abs(this.xG) < 1.0E-4f || Math.abs(this.yG) < 1.0E-4f || Math.abs(this.xB) < 1.0E-4f || Math.abs(this.yB) < 1.0E-4f) {
                                            var5_6 = false;
                                        }
                                        break block33;
                                    }
                                    if (!"sRGB".equals(var8_8)) break block34;
                                    var1_1 = this.is.read();
                                    this.intent = PngImage.intents[var1_1];
                                    this.gamma = 2.2f;
                                    break block35;
                                }
                                if (!"gAMA".equals(var8_8)) break block36;
                                var1_1 = PngImage.getInt(this.is);
                                if (var1_1 == 0) break block28;
                                this.gamma = 100000.0f / (float)var1_1;
                                if (this.hasCHRM) break block28;
                            }
                            this.xW = 0.3127f;
                            this.yW = 0.329f;
                            this.xR = 0.64f;
                            this.yR = 0.33f;
                            this.xG = 0.3f;
                            this.yG = 0.6f;
                            this.xB = 0.15f;
                            this.yB = 0.06f;
                        }
                        this.hasCHRM = var5_6;
                        break block28;
                    }
                    if ("iCCP".equals(var8_8)) {
                        do {
                            var1_1 = var2_3 = var1_1 - 1;
                        } while (this.is.read() != 0);
                        this.is.read();
                        var1_1 = var2_3 - 1;
                        var8_8 = new byte[var1_1];
                        var2_3 = 0;
                        while (var1_1 > 0) {
                            var3_4 = this.is.read(var8_8, var2_3, var1_1);
                            if (var3_4 < 0) throw new IOException(MessageLocalization.getComposedMessage("premature.end.of.file", new Object[0]));
                            var2_3 += var3_4;
                            var1_1 -= var3_4;
                        }
                        var8_8 = PdfReader.FlateDecode(var8_8, true);
                        this.icc_profile = ICC_Profile.getInstance(var8_8);
                        ** GOTO lbl189
                    } else {
                        var2_3 = var1_1;
                        if ("IEND".equals(var8_8)) {
                            return;
                        }
lbl176: // 7 sources:
                        Utilities.skip(this.is, var2_3);
                    }
                    break block28;
                    catch (RuntimeException var8_9) {}
                    this.icc_profile = null;
                    break block28;
                }
                while (var1_1 != 0) {
                    var2_3 = this.is.read(var7_2, 0, Math.min(var1_1, 4096));
                    if (var2_3 < 0) {
                        return;
                    }
                    this.idat.write(var7_2, 0, var2_3);
                    var1_1 -= var2_3;
                }
            }
            Utilities.skip(this.is, 4);
        } while (true);
    }

    static class NewByteArrayOutputStream
    extends ByteArrayOutputStream {
        NewByteArrayOutputStream() {
        }

        public byte[] getBuf() {
            return this.buf;
        }
    }

}

