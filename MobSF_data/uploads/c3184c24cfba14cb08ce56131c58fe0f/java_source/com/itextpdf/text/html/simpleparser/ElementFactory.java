/*
 * Decompiled with CFR 0_132.
 */
package com.itextpdf.text.html.simpleparser;

import com.itextpdf.text.BaseColor;
import com.itextpdf.text.Chunk;
import com.itextpdf.text.DocListener;
import com.itextpdf.text.Font;
import com.itextpdf.text.FontFactory;
import com.itextpdf.text.FontProvider;
import com.itextpdf.text.Image;
import com.itextpdf.text.List;
import com.itextpdf.text.ListItem;
import com.itextpdf.text.Paragraph;
import com.itextpdf.text.html.HtmlUtilities;
import com.itextpdf.text.html.simpleparser.ChainedProperties;
import com.itextpdf.text.html.simpleparser.ImageProvider;
import com.itextpdf.text.pdf.HyphenationAuto;
import com.itextpdf.text.pdf.HyphenationEvent;
import com.itextpdf.text.pdf.draw.LineSeparator;
import java.io.File;
import java.util.HashMap;
import java.util.Map;
import java.util.StringTokenizer;

@Deprecated
public class ElementFactory {
    private FontProvider provider = FontFactory.getFontImp();

    /*
     * Enabled aggressive block sorting
     * Enabled unnecessary exception pruning
     * Enabled aggressive exception aggregation
     */
    protected static void setParagraphLeading(Paragraph paragraph, String object) {
        if (object == null) {
            paragraph.setLeading(0.0f, 1.5f);
            return;
        }
        try {
            object = new StringTokenizer((String)object, " ,");
            float f2 = Float.parseFloat(object.nextToken());
            if (!object.hasMoreTokens()) {
                paragraph.setLeading(f2, 0.0f);
                return;
            }
            paragraph.setLeading(f2, Float.parseFloat(object.nextToken()));
            return;
        }
        catch (Exception exception) {}
        paragraph.setLeading(0.0f, 1.5f);
    }

    /*
     * Enabled aggressive block sorting
     */
    public Chunk createChunk(String object, ChainedProperties chainedProperties) {
        block4 : {
            float f2;
            block3 : {
                Font font;
                block2 : {
                    font = this.getFont(chainedProperties);
                    object = new Chunk((String)object, font);
                    if (!chainedProperties.hasProperty("sub")) break block2;
                    f2 = - font.getSize();
                    break block3;
                }
                if (!chainedProperties.hasProperty("sup")) break block4;
                f2 = font.getSize();
            }
            object.setTextRise(f2 / 2.0f);
        }
        object.setHyphenation(this.getHyphenation(chainedProperties));
        return object;
    }

    /*
     * Unable to fully structure code
     * Enabled aggressive block sorting
     * Lifted jumps to return sites
     */
    public Image createImage(String var1_1, Map<String, String> var2_2, ChainedProperties var3_3, DocListener var4_4, ImageProvider var5_5, HashMap<String, Image> var6_6, String var7_7) {
        block18 : {
            block17 : {
                var4_4 = var5_5 != null ? var5_5.getImage((String)var1_1, (Map<String, String>)var2_2, var3_3, (DocListener)var4_4) : null;
                var5_5 = var4_4;
                if (var4_4 != null) break block17;
                var5_5 = var4_4;
                if (var6_6 == null) break block18;
                var6_6 = (Image)var6_6.get(var1_1);
                var5_5 = var4_4;
                if (var6_6 != null) {
                    var5_5 = Image.getInstance((Image)var6_6);
                }
            }
            if (var5_5 != null) {
                return var5_5;
            }
        }
        if (!var1_1.startsWith("http") && var7_7 != null) {
            var4_4 = new StringBuilder();
            var4_4.append(var7_7);
            var4_4.append((String)var1_1);
            var4_4 = var4_4.toString();
        } else {
            var4_4 = var1_1;
            if (var5_5 == null) {
                var4_4 = var1_1;
                if (!var1_1.startsWith("http")) {
                    var4_4 = var5_5 = var3_3.getProperty("image_path");
                    if (var5_5 == null) {
                        var4_4 = "";
                    }
                    var4_4 = new File((String)var4_4, (String)var1_1).getPath();
                }
            }
        }
        var1_1 = Image.getInstance((String)var4_4);
        if (var1_1 == null) {
            return null;
        }
        var8_9 = var9_8 = HtmlUtilities.parseLength(var3_3.getProperty("size"), 12.0f);
        if (var9_8 <= 0.0f) {
            var8_9 = 12.0f;
        }
        var9_8 = HtmlUtilities.parseLength((String)var2_2.get("width"), var8_9);
        var8_9 = HtmlUtilities.parseLength((String)var2_2.get("height"), var8_9);
        var10_10 = var9_8 FCMPL 0.0f;
        if (var10_10 > 0 && var8_9 > 0.0f) ** GOTO lbl40
        if (var10_10 > 0) {
            var8_9 = var1_1.getHeight() * var9_8 / var1_1.getWidth();
lbl40: // 2 sources:
            var1_1.scaleAbsolute(var9_8, var8_9);
        } else if (var8_9 > 0.0f) {
            var1_1.scaleAbsolute(var1_1.getWidth() * var8_9 / var1_1.getHeight(), var8_9);
        }
        var2_2 = var3_3.getProperty("before");
        if (var2_2 != null) {
            var1_1.setSpacingBefore(Float.parseFloat((String)var2_2));
        }
        if ((var2_2 = var3_3.getProperty("after")) != null) {
            var1_1.setSpacingAfter(Float.parseFloat((String)var2_2));
        }
        var1_1.setWidthPercentage(0.0f);
        return var1_1;
    }

    public LineSeparator createLineSeparator(Map<String, String> map, float f2) {
        float f3;
        float f4;
        block6 : {
            block5 : {
                String string2 = map.get("size");
                if (string2 == null || (f4 = HtmlUtilities.parseLength(string2, 12.0f)) <= 0.0f) {
                    f4 = 1.0f;
                }
                string2 = map.get("width");
                if (string2 == null) break block5;
                f3 = HtmlUtilities.parseLength(string2, 12.0f);
                if (f3 <= 0.0f) {
                    f3 = 100.0f;
                }
                if (string2.endsWith("%")) break block6;
            }
            f3 = 100.0f;
        }
        return new LineSeparator(f4, f3, null, HtmlUtilities.alignmentValue(map.get("align")), f2);
    }

    /*
     * Enabled aggressive block sorting
     * Enabled unnecessary exception pruning
     * Enabled aggressive exception aggregation
     */
    public List createList(String object, ChainedProperties chainedProperties) {
        if ("ul".equalsIgnoreCase((String)object)) {
            object = new List(false);
            object.setListSymbol("\u2022 ");
        } else {
            object = new List(true);
        }
        try {
            object.setIndentationLeft(new Float(chainedProperties.getProperty("indent")).floatValue());
            return object;
        }
        catch (Exception exception) {}
        object.setAutoindent(true);
        return object;
    }

    public ListItem createListItem(ChainedProperties chainedProperties) {
        ListItem listItem = new ListItem();
        this.updateElement(listItem, chainedProperties);
        return listItem;
    }

    public Paragraph createParagraph(ChainedProperties chainedProperties) {
        Paragraph paragraph = new Paragraph();
        this.updateElement(paragraph, chainedProperties);
        return paragraph;
    }

    public Font getFont(ChainedProperties object) {
        Object object2;
        String string2;
        String string3;
        block18 : {
            block17 : {
                string3 = object.getProperty("face");
                if (string3 == null) break block17;
                string2 = string3;
                if (string3.trim().length() != 0) break block18;
            }
            string2 = object.getProperty("font-family");
        }
        int n2 = 0;
        string3 = string2;
        if (string2 != null) {
            object2 = new StringTokenizer(string2, ",");
            string3 = string2;
            while (object2.hasMoreTokens()) {
                string3 = string2 = object2.nextToken().trim();
                if (string2.startsWith("\"")) {
                    string3 = string2.substring(1);
                }
                string2 = string3;
                if (string3.endsWith("\"")) {
                    string2 = string3.substring(0, string3.length() - 1);
                }
                string3 = string2;
                if (!this.provider.isRegistered(string2)) continue;
                string3 = string2;
                break;
            }
        }
        object2 = object.getProperty("encoding");
        string2 = object2;
        if (object2 == null) {
            string2 = "Cp1252";
        }
        float f2 = (object2 = object.getProperty("size")) != null ? Float.parseFloat((String)object2) : 12.0f;
        object2 = object.getProperty("text-decoration");
        int n3 = n2;
        if (object2 != null) {
            n3 = n2;
            if (object2.trim().length() != 0) {
                if ("underline".equals(object2)) {
                    n3 = 4;
                } else {
                    n3 = n2;
                    if ("line-through".equals(object2)) {
                        n3 = 8;
                    }
                }
            }
        }
        n2 = n3;
        if (object.hasProperty("i")) {
            n2 = n3 | 2;
        }
        n3 = n2;
        if (object.hasProperty("b")) {
            n3 = n2 | 1;
        }
        n2 = n3;
        if (object.hasProperty("u")) {
            n2 = n3 | 4;
        }
        if (object.hasProperty("s")) {
            n2 |= 8;
        }
        object = HtmlUtilities.decodeColor(object.getProperty("color"));
        return this.provider.getFont(string3, string2, true, f2, n2, (BaseColor)object);
    }

    public FontProvider getFontProvider() {
        return this.provider;
    }

    public HyphenationEvent getHyphenation(ChainedProperties object) {
        String string2 = object.getProperty("hyphenation");
        if (string2 != null) {
            if (string2.length() == 0) {
                return null;
            }
            int n2 = string2.indexOf(95);
            int n3 = 2;
            if (n2 == -1) {
                return new HyphenationAuto(string2, null, 2, 2);
            }
            object = string2.substring(0, n2);
            String string3 = string2.substring(n2 + 1);
            n2 = string3.indexOf(44);
            if (n2 == -1) {
                return new HyphenationAuto((String)object, string3, 2, 2);
            }
            string2 = string3.substring(n2 + 1);
            string3 = string3.substring(0, n2);
            int n4 = string2.indexOf(44);
            if (n4 == -1) {
                n2 = Integer.parseInt(string2);
            } else {
                n2 = Integer.parseInt(string2.substring(0, n4));
                n3 = Integer.parseInt(string2.substring(n4 + 1));
            }
            return new HyphenationAuto((String)object, string3, n2, n3);
        }
        return null;
    }

    public void setFontProvider(FontProvider fontProvider) {
        this.provider = fontProvider;
    }

    /*
     * Enabled aggressive block sorting
     * Enabled unnecessary exception pruning
     * Enabled aggressive exception aggregation
     * Lifted jumps to return sites
     */
    protected void updateElement(Paragraph paragraph, ChainedProperties object) {
        String string2;
        paragraph.setAlignment(HtmlUtilities.alignmentValue(object.getProperty("align")));
        paragraph.setHyphenation(this.getHyphenation((ChainedProperties)object));
        ElementFactory.setParagraphLeading(paragraph, object.getProperty("leading"));
        string2 = object.getProperty("after");
        if (string2 != null) {
            try {
                paragraph.setSpacingBefore(Float.parseFloat(string2));
            }
            catch (Exception exception) {}
        }
        if ((string2 = object.getProperty("after")) != null) {
            try {
                paragraph.setSpacingAfter(Float.parseFloat(string2));
            }
            catch (Exception exception) {}
        }
        if ((string2 = object.getProperty("extraparaspace")) != null) {
            try {
                paragraph.setExtraParagraphSpace(Float.parseFloat(string2));
            }
            catch (Exception exception) {}
        }
        if ((object = object.getProperty("indent")) == null) return;
        try {
            paragraph.setIndentationLeft(Float.parseFloat((String)object));
            return;
        }
        catch (Exception exception) {
            return;
        }
    }
}

