/*
 * Decompiled with CFR 0_132.
 */
package com.itextpdf.text.io;

import com.itextpdf.text.io.RandomAccessSource;
import java.lang.reflect.Method;
import java.nio.Buffer;
import java.nio.BufferUnderflowException;
import java.nio.ByteBuffer;
import java.security.AccessController;
import java.security.PrivilegedAction;

class ByteBufferRandomAccessSource
implements RandomAccessSource {
    private final ByteBuffer byteBuffer;

    public ByteBufferRandomAccessSource(ByteBuffer byteBuffer) {
        this.byteBuffer = byteBuffer;
    }

    private static boolean clean(final ByteBuffer byteBuffer) {
        if (byteBuffer != null && byteBuffer.isDirect()) {
            return (Boolean)AccessController.doPrivileged(new PrivilegedAction<Boolean>(){

                @Override
                public Boolean run() {
                    Boolean bl2 = Boolean.FALSE;
                    try {
                        Object object = byteBuffer.getClass().getMethod("cleaner", null);
                        object.setAccessible(true);
                        object = object.invoke(byteBuffer, null);
                        object.getClass().getMethod("clean", null).invoke(object, null);
                        object = Boolean.TRUE;
                        return object;
                    }
                    catch (Exception exception) {
                        return bl2;
                    }
                }
            });
        }
        return false;
    }

    @Override
    public void close() {
        ByteBufferRandomAccessSource.clean(this.byteBuffer);
    }

    /*
     * Enabled force condition propagation
     * Lifted jumps to return sites
     */
    @Override
    public int get(long l2) {
        block3 : {
            if (l2 > Integer.MAX_VALUE) throw new IllegalArgumentException("Position must be less than Integer.MAX_VALUE");
            try {
                if (l2 < (long)this.byteBuffer.limit()) break block3;
                return -1;
            }
            catch (BufferUnderflowException bufferUnderflowException) {
                return -1;
            }
        }
        byte by2 = this.byteBuffer.get((int)l2);
        return by2 & 255;
    }

    @Override
    public int get(long l2, byte[] arrby, int n2, int n3) {
        if (l2 <= Integer.MAX_VALUE) {
            if (l2 >= (long)this.byteBuffer.limit()) {
                return -1;
            }
            this.byteBuffer.position((int)l2);
            n3 = Math.min(n3, this.byteBuffer.remaining());
            this.byteBuffer.get(arrby, n2, n3);
            return n3;
        }
        throw new IllegalArgumentException("Position must be less than Integer.MAX_VALUE");
    }

    @Override
    public long length() {
        return this.byteBuffer.limit();
    }

}

