/*
 * Decompiled with CFR 0_132.
 * 
 * Could not load the following classes:
 *  android.content.Context
 *  android.content.res.Resources
 *  android.graphics.Point
 *  android.graphics.Rect
 *  android.os.Build
 *  android.os.Build$VERSION
 *  android.util.DisplayMetrics
 *  android.view.Display
 *  android.view.View
 *  android.view.WindowManager
 *  android.widget.PopupWindow
 *  android.widget.PopupWindow$OnDismissListener
 */
package android.support.v7.view.menu;

import android.content.Context;
import android.content.res.Resources;
import android.graphics.Point;
import android.graphics.Rect;
import android.os.Build;
import android.support.v4.view.d;
import android.support.v4.view.s;
import android.support.v7.a.a;
import android.support.v7.view.menu.e;
import android.support.v7.view.menu.h;
import android.support.v7.view.menu.m;
import android.support.v7.view.menu.o;
import android.support.v7.view.menu.t;
import android.util.DisplayMetrics;
import android.view.Display;
import android.view.View;
import android.view.WindowManager;
import android.widget.PopupWindow;

public class n {
    private final Context a;
    private final h b;
    private final boolean c;
    private final int d;
    private final int e;
    private View f;
    private int g = 8388611;
    private boolean h;
    private o.a i;
    private m j;
    private PopupWindow.OnDismissListener k;
    private final PopupWindow.OnDismissListener l = new PopupWindow.OnDismissListener(){

        public void onDismiss() {
            n.this.e();
        }
    };

    public n(Context context, h h2, View view, boolean bl2, int n2) {
        this(context, h2, view, bl2, n2, 0);
    }

    public n(Context context, h h2, View view, boolean bl2, int n2, int n3) {
        this.a = context;
        this.b = h2;
        this.f = view;
        this.c = bl2;
        this.d = n2;
        this.e = n3;
    }

    private void a(int n2, int n3, boolean bl2, boolean bl3) {
        m m2 = this.b();
        m2.c(bl3);
        if (bl2) {
            int n4 = n2;
            if ((d.a(this.g, s.e(this.f)) & 7) == 5) {
                n4 = n2 + this.f.getWidth();
            }
            m2.b(n4);
            m2.c(n3);
            n2 = (int)(this.a.getResources().getDisplayMetrics().density * 48.0f / 2.0f);
            m2.a(new Rect(n4 - n2, n3 - n2, n4 + n2, n3 + n2));
        }
        m2.a();
    }

    private m g() {
        Object object = ((WindowManager)this.a.getSystemService("window")).getDefaultDisplay();
        Point point = new Point();
        if (Build.VERSION.SDK_INT >= 17) {
            object.getRealSize(point);
        } else {
            object.getSize(point);
        }
        boolean bl2 = Math.min(point.x, point.y) >= this.a.getResources().getDimensionPixelSize(a.d.abc_cascading_menus_min_smallest_width);
        object = bl2 ? new e(this.a, this.f, this.d, this.e, this.c) : new t(this.a, this.b, this.f, this.d, this.e, this.c);
        object.a(this.b);
        object.a(this.l);
        object.a(this.f);
        object.a(this.i);
        object.a(this.h);
        object.a(this.g);
        return object;
    }

    public void a() {
        if (this.c()) {
            return;
        }
        throw new IllegalStateException("MenuPopupHelper cannot be used without an anchor");
    }

    public void a(int n2) {
        this.g = n2;
    }

    public void a(o.a a2) {
        this.i = a2;
        if (this.j != null) {
            this.j.a(a2);
        }
    }

    public void a(View view) {
        this.f = view;
    }

    public void a(PopupWindow.OnDismissListener onDismissListener) {
        this.k = onDismissListener;
    }

    public void a(boolean bl2) {
        this.h = bl2;
        if (this.j != null) {
            this.j.a(bl2);
        }
    }

    public boolean a(int n2, int n3) {
        if (this.f()) {
            return true;
        }
        if (this.f == null) {
            return false;
        }
        this.a(n2, n3, true, true);
        return true;
    }

    public m b() {
        if (this.j == null) {
            this.j = this.g();
        }
        return this.j;
    }

    public boolean c() {
        if (this.f()) {
            return true;
        }
        if (this.f == null) {
            return false;
        }
        this.a(0, 0, false, false);
        return true;
    }

    public void d() {
        if (this.f()) {
            this.j.c();
        }
    }

    protected void e() {
        this.j = null;
        if (this.k != null) {
            this.k.onDismiss();
        }
    }

    public boolean f() {
        if (this.j != null && this.j.d()) {
            return true;
        }
        return false;
    }

}

