/*
 * Decompiled with CFR 0_132.
 * 
 * Could not load the following classes:
 *  android.view.View
 *  android.view.View$OnAttachStateChangeListener
 *  android.view.ViewGroup
 *  android.view.ViewTreeObserver
 *  android.view.ViewTreeObserver$OnPreDrawListener
 */
package android.support.transition;

import android.support.transition.e;
import android.support.transition.t;
import android.support.transition.u;
import android.support.transition.v;
import android.support.v4.view.s;
import android.view.View;
import android.view.ViewGroup;
import android.view.ViewTreeObserver;
import java.lang.ref.WeakReference;
import java.util.ArrayList;
import java.util.Collection;
import java.util.Iterator;

public class w {
    private static u a = new e();
    private static ThreadLocal<WeakReference<android.support.v4.g.a<ViewGroup, ArrayList<u>>>> b = new ThreadLocal();
    private static ArrayList<ViewGroup> c = new ArrayList();

    static android.support.v4.g.a<ViewGroup, ArrayList<u>> a() {
        WeakReference<android.support.v4.g.a<Object, ArrayList<u>>> weakReference;
        block3 : {
            block2 : {
                WeakReference<android.support.v4.g.a<ViewGroup, ArrayList<u>>> weakReference2 = b.get();
                if (weakReference2 == null) break block2;
                weakReference = weakReference2;
                if (weakReference2.get() != null) break block3;
            }
            weakReference = new WeakReference(new android.support.v4.g.a());
            b.set(weakReference);
        }
        return weakReference.get();
    }

    public static void a(ViewGroup viewGroup, u u2) {
        if (!c.contains((Object)viewGroup) && s.u((View)viewGroup)) {
            c.add(viewGroup);
            u u3 = u2;
            if (u2 == null) {
                u3 = a;
            }
            u2 = u3.m();
            w.c(viewGroup, u2);
            t.a((View)viewGroup, null);
            w.b(viewGroup, u2);
        }
    }

    private static void b(ViewGroup viewGroup, u object) {
        if (object != null && viewGroup != null) {
            object = new a((u)object, viewGroup);
            viewGroup.addOnAttachStateChangeListener((View.OnAttachStateChangeListener)object);
            viewGroup.getViewTreeObserver().addOnPreDrawListener((ViewTreeObserver.OnPreDrawListener)object);
        }
    }

    private static void c(ViewGroup object, u u2) {
        ArrayList<u> arrayList = w.a().get(object);
        if (arrayList != null && arrayList.size() > 0) {
            arrayList = arrayList.iterator();
            while (arrayList.hasNext()) {
                ((u)arrayList.next()).d((View)object);
            }
        }
        if (u2 != null) {
            u2.a((ViewGroup)object, true);
        }
        if ((object = t.a((View)object)) != null) {
            object.a();
        }
    }

    private static class a
    implements View.OnAttachStateChangeListener,
    ViewTreeObserver.OnPreDrawListener {
        u a;
        ViewGroup b;

        a(u u2, ViewGroup viewGroup) {
            this.a = u2;
            this.b = viewGroup;
        }

        private void a() {
            this.b.getViewTreeObserver().removeOnPreDrawListener((ViewTreeObserver.OnPreDrawListener)this);
            this.b.removeOnAttachStateChangeListener((View.OnAttachStateChangeListener)this);
        }

        public boolean onPreDraw() {
            Object object;
            this.a();
            if (!c.remove((Object)this.b)) {
                return true;
            }
            final android.support.v4.g.a<ViewGroup, ArrayList<u>> a2 = w.a();
            ArrayList<u> arrayList = a2.get((Object)this.b);
            ArrayList<u> arrayList2 = null;
            if (arrayList == null) {
                object = new ArrayList();
                a2.put(this.b, (ArrayList<u>)object);
            } else {
                object = arrayList;
                if (arrayList.size() > 0) {
                    arrayList2 = new ArrayList<u>(arrayList);
                    object = arrayList;
                }
            }
            object.add((u)this.a);
            this.a.a(new v(){

                @Override
                public void a(u u2) {
                    ((ArrayList)a2.get((Object)a.this.b)).remove(u2);
                }
            });
            this.a.a(this.b, false);
            if (arrayList2 != null) {
                object = arrayList2.iterator();
                while (object.hasNext()) {
                    ((u)object.next()).e((View)this.b);
                }
            }
            this.a.a(this.b);
            return true;
        }

        public void onViewAttachedToWindow(View view) {
        }

        public void onViewDetachedFromWindow(View object) {
            this.a();
            c.remove((Object)this.b);
            object = w.a().get((Object)this.b);
            if (object != null && object.size() > 0) {
                object = object.iterator();
                while (object.hasNext()) {
                    ((u)object.next()).e((View)this.b);
                }
            }
            this.a.a(true);
        }

    }

}

