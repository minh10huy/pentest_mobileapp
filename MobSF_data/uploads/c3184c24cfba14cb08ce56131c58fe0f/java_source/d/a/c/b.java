/*
 * Decompiled with CFR 0_132.
 */
package d.a.c;

import d.a.c.c;
import d.a.c.f;
import d.a.c.g;
import d.aa;
import d.ab;
import d.ac;
import d.ad;
import d.e;
import d.i;
import d.p;
import d.r;
import d.u;
import e.d;
import e.l;
import java.net.ProtocolException;

public final class b
implements u {
    private final boolean a;

    public b(boolean bl2) {
        this.a = bl2;
    }

    @Override
    public ac a(u.a object) {
        int n2;
        g g2 = (g)object;
        c c2 = g2.g();
        d.a.b.g g3 = g2.f();
        d.a.b.c c3 = (d.a.b.c)g2.e();
        aa aa2 = g2.a();
        long l2 = System.currentTimeMillis();
        g2.i().c(g2.h());
        c2.a(aa2);
        g2.i().a(g2.h(), aa2);
        boolean bl2 = f.c(aa2.b());
        d d2 = null;
        Object object2 = null;
        object = d2;
        if (bl2) {
            object = d2;
            if (aa2.d() != null) {
                if ("100-continue".equalsIgnoreCase(aa2.a("Expect"))) {
                    c2.a();
                    g2.i().e(g2.h());
                    object2 = c2.a(true);
                }
                if (object2 == null) {
                    g2.i().d(g2.h());
                    object = new a(c2.a(aa2, aa2.d().b()));
                    d2 = l.a((e.r)object);
                    aa2.d().a(d2);
                    d2.close();
                    g2.i().a(g2.h(), object.a);
                    object = object2;
                } else {
                    object = object2;
                    if (!c3.e()) {
                        g3.e();
                        object = object2;
                    }
                }
            }
        }
        c2.b();
        object2 = object;
        if (object == null) {
            g2.i().e(g2.h());
            object2 = c2.a(false);
        }
        object = object2.a(aa2).a(g3.c().d()).a(l2).b(System.currentTimeMillis()).a();
        int n3 = n2 = object.c();
        if (n2 == 100) {
            object = c2.a(false).a(aa2).a(g3.c().d()).a(l2).b(System.currentTimeMillis()).a();
            n3 = object.c();
        }
        g2.i().a(g2.h(), (ac)object);
        if (this.a && n3 == 101) {
            object2 = object.i();
            object = d.a.c.c;
        } else {
            object2 = object.i();
            object = c2.a((ac)object);
        }
        object = object2.a((ad)object).a();
        if ("close".equalsIgnoreCase(object.a().a("Connection")) || "close".equalsIgnoreCase(object.a("Connection"))) {
            g3.e();
        }
        if (n3 != 204 && n3 != 205 || object.h().b() <= 0L) {
            return object;
        }
        object2 = new StringBuilder();
        object2.append("HTTP ");
        object2.append(n3);
        object2.append(" had non-zero Content-Length: ");
        object2.append(object.h().b());
        throw new ProtocolException(object2.toString());
    }

    static final class a
    extends e.g {
        long a;

        a(e.r r2) {
            super(r2);
        }

        @Override
        public void a_(e.c c2, long l2) {
            super.a_(c2, l2);
            this.a += l2;
        }
    }

}

