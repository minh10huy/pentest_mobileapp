/*
 * Decompiled with CFR 0_132.
 */
package d.a.a;

import d.a.a.b;
import d.a.a.c;
import d.a.a.f;
import d.a.c.e;
import d.a.c.h;
import d.aa;
import d.ac;
import d.ad;
import d.s;
import d.u;
import d.y;
import e.d;
import e.l;
import e.r;
import e.t;
import java.io.IOException;
import java.util.concurrent.TimeUnit;

public final class a
implements u {
    final f a;

    public a(f f2) {
        this.a = f2;
    }

    private ac a(b object, ac ac2) {
        if (object == null) {
            return ac2;
        }
        Object object2 = object.b();
        if (object2 == null) {
            return ac2;
        }
        object = new e.s(ac2.h().c(), (b)object, l.a((r)object2)){
            boolean a;
            final /* synthetic */ e.e b;
            final /* synthetic */ b c;
            final /* synthetic */ d d;
            {
                this.b = e2;
                this.c = b2;
                this.d = d2;
            }

            @Override
            public long a(e.c c2, long l2) {
                block3 : {
                    block4 : {
                        try {
                            l2 = this.b.a(c2, l2);
                            if (l2 != -1L) break block3;
                            if (this.a) break block4;
                            this.a = true;
                        }
                        catch (IOException iOException) {
                            if (!this.a) {
                                this.a = true;
                                this.c.a();
                            }
                            throw iOException;
                        }
                        this.d.close();
                    }
                    return -1L;
                }
                c2.a(this.d.c(), c2.b() - l2, l2);
                this.d.w();
                return l2;
            }

            @Override
            public t a() {
                return this.b.a();
            }

            @Override
            public void close() {
                if (!this.a && !d.a.c.a(this, 100, TimeUnit.MILLISECONDS)) {
                    this.a = true;
                    this.c.a();
                }
                this.b.close();
            }
        };
        object2 = ac2.a("Content-Type");
        long l2 = ac2.h().b();
        return ac2.i().a(new h((String)object2, l2, l.a((e.s)object))).a();
    }

    private static ac a(ac ac2) {
        ac ac3 = ac2;
        if (ac2 != null) {
            ac3 = ac2;
            if (ac2.h() != null) {
                ac3 = ac2.i().a((ad)null).a();
            }
        }
        return ac3;
    }

    private static s a(s object, s s2) {
        int n2;
        s.a a2 = new s.a();
        int n3 = object.a();
        int n4 = 0;
        for (n2 = 0; n2 < n3; ++n2) {
            String string2 = object.a(n2);
            String string3 = object.b(n2);
            if ("Warning".equalsIgnoreCase(string2) && string3.startsWith("1") || !a.b(string2) && a.a(string2) && s2.a(string2) != null) continue;
            d.a.a.a.a(a2, string2, string3);
        }
        n3 = s2.a();
        for (n2 = n4; n2 < n3; ++n2) {
            object = s2.a(n2);
            if (a.b((String)object) || !a.a((String)object)) continue;
            d.a.a.a.a(a2, (String)object, s2.b(n2));
        }
        return a2.a();
    }

    static boolean a(String string2) {
        if (!("Connection".equalsIgnoreCase(string2) || "Keep-Alive".equalsIgnoreCase(string2) || "Proxy-Authenticate".equalsIgnoreCase(string2) || "Proxy-Authorization".equalsIgnoreCase(string2) || "TE".equalsIgnoreCase(string2) || "Trailers".equalsIgnoreCase(string2) || "Transfer-Encoding".equalsIgnoreCase(string2) || "Upgrade".equalsIgnoreCase(string2))) {
            return true;
        }
        return false;
    }

    static boolean b(String string2) {
        if (!("Content-Length".equalsIgnoreCase(string2) || "Content-Encoding".equalsIgnoreCase(string2) || "Content-Type".equalsIgnoreCase(string2))) {
            return false;
        }
        return true;
    }

    /*
     * Enabled force condition propagation
     * Lifted jumps to return sites
     */
    @Override
    public ac a(u.a object) {
        aa aa2;
        ac ac3;
        ac ac2;
        block11 : {
            ac2 = this.a != null ? this.a.a(object.a()) : null;
            c c2 = new c.a(System.currentTimeMillis(), object.a(), ac2).a();
            aa2 = c2.a;
            ac3 = c2.b;
            if (this.a != null) {
                this.a.a(c2);
            }
            if (ac2 != null && ac3 == null) {
                d.a.c.a(ac2.h());
            }
            if (aa2 == null && ac3 == null) {
                return new ac.a().a(object.a()).a(y.b).a(504).a("Unsatisfiable Request (only-if-cached)").a(d.a.c.c).a(-1L).b(System.currentTimeMillis()).a();
            }
            if (aa2 == null) {
                return ac3.i().b(a.a(ac3)).a();
            }
            try {
                object = object.a(aa2);
                if (object != null || ac2 == null) break block11;
            }
            catch (Throwable throwable) {
                if (ac2 == null) throw throwable;
                d.a.c.a(ac2.h());
                throw throwable;
            }
            d.a.c.a(ac2.h());
        }
        if (ac3 != null) {
            if (object.c() == 304) {
                ac2 = ac3.i().a(a.a(ac3.g(), object.g())).a(object.n()).b(object.o()).b(a.a(ac3)).a(a.a((ac)object)).a();
                object.h().close();
                this.a.a();
                this.a.a(ac3, ac2);
                return ac2;
            }
            d.a.c.a(ac3.h());
        }
        object = object.i().b(a.a(ac3)).a(a.a((ac)object)).a();
        if (this.a == null) return object;
        if (e.d((ac)object) && c.a((ac)object, aa2)) {
            return this.a(this.a.a((ac)object), (ac)object);
        }
        if (!d.a.c.f.a(aa2.b())) return object;
        try {
            this.a.b(aa2);
        }
        catch (IOException iOException) {
            return object;
        }
        return object;
    }

}

