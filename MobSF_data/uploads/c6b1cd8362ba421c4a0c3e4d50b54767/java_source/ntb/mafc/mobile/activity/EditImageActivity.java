/*
 * Decompiled with CFR 0_132.
 * 
 * Could not load the following classes:
 *  android.content.Intent
 *  android.net.Uri
 *  android.os.Bundle
 *  android.support.v7.app.ActionBar
 *  android.support.v7.app.AppCompatActivity
 *  android.support.v7.widget.Toolbar
 *  android.view.MenuItem
 *  android.view.View
 *  android.view.View$OnClickListener
 *  android.widget.ImageButton
 *  com.theartofdev.edmodo.cropper.CropImageView
 *  com.theartofdev.edmodo.cropper.CropImageView$OnCropImageCompleteListener
 *  kotlin.Metadata
 *  kotlin.jvm.internal.Intrinsics
 *  ntb.mafc.mobile.activity.EditImageActivity$onCreate
 *  ntb.mafc.mobile.manager.LocaleManager
 *  ntb.mafc.mobile.manager.MainApplication
 *  ntb.mafc.mobile.manager.MainApplication$Companion
 *  org.jetbrains.annotations.Nullable
 */
package ntb.mafc.mobile.activity;

import android.content.Intent;
import android.net.Uri;
import android.os.Bundle;
import android.support.v7.app.ActionBar;
import android.support.v7.app.AppCompatActivity;
import android.support.v7.widget.Toolbar;
import android.view.MenuItem;
import android.view.View;
import android.widget.ImageButton;
import com.theartofdev.edmodo.cropper.CropImageView;
import java.io.File;
import java.util.HashMap;
import kotlin.Metadata;
import kotlin.jvm.internal.Intrinsics;
import ntb.mafc.mobile.R;
import ntb.mafc.mobile.activity.EditImageActivity;
import ntb.mafc.mobile.manager.LocaleManager;
import ntb.mafc.mobile.manager.MainApplication;
import org.jetbrains.annotations.Nullable;

@Metadata(bv={1, 0, 2}, d1={"\u00008\n\u0002\u0018\u0002\n\u0002\u0018\u0002\n\u0002\b\u0002\n\u0002\u0018\u0002\n\u0002\b\u0005\n\u0002\u0010\u000e\n\u0002\b\u000b\n\u0002\u0010\u0002\n\u0002\b\u0002\n\u0002\u0018\u0002\n\u0000\n\u0002\u0010\u000b\n\u0000\n\u0002\u0018\u0002\n\u0002\b\u0003\u0018\u00002\u00020\u0001B\u0005\u00a2\u0006\u0002\u0010\u0002J\u0006\u0010\u0015\u001a\u00020\u0016J\u0012\u0010\u0017\u001a\u00020\u00162\b\u0010\u0018\u001a\u0004\u0018\u00010\u0019H\u0014J\u0012\u0010\u001a\u001a\u00020\u001b2\b\u0010\u001c\u001a\u0004\u0018\u00010\u001dH\u0016J\b\u0010\u001e\u001a\u00020\u0016H\u0002J\u0006\u0010\u001f\u001a\u00020\u0016R\u001c\u0010\u0003\u001a\u0004\u0018\u00010\u0004X\u0086\u000e\u00a2\u0006\u000e\n\u0000\u001a\u0004\b\u0005\u0010\u0006\"\u0004\b\u0007\u0010\bR\u001c\u0010\t\u001a\u0004\u0018\u00010\nX\u0086\u000e\u00a2\u0006\u000e\n\u0000\u001a\u0004\b\u000b\u0010\f\"\u0004\b\r\u0010\u000eR\u001c\u0010\u000f\u001a\u0004\u0018\u00010\nX\u0086\u000e\u00a2\u0006\u000e\n\u0000\u001a\u0004\b\u0010\u0010\f\"\u0004\b\u0011\u0010\u000eR\u001c\u0010\u0012\u001a\u0004\u0018\u00010\nX\u0086\u000e\u00a2\u0006\u000e\n\u0000\u001a\u0004\b\u0013\u0010\f\"\u0004\b\u0014\u0010\u000e\u00a8\u0006 "}, d2={"Lntb/mafc/mobile/activity/EditImageActivity;", "Landroid/support/v7/app/AppCompatActivity;", "()V", "fileNeedEdit", "Ljava/io/File;", "getFileNeedEdit", "()Ljava/io/File;", "setFileNeedEdit", "(Ljava/io/File;)V", "folderParent", "", "getFolderParent", "()Ljava/lang/String;", "setFolderParent", "(Ljava/lang/String;)V", "nameFolder", "getNameFolder", "setNameFolder", "uri", "getUri", "setUri", "cropImage", "", "onCreate", "savedInstanceState", "Landroid/os/Bundle;", "onOptionsItemSelected", "", "item", "Landroid/view/MenuItem;", "rotate", "save", "app_release"}, k=1, mv={1, 1, 11})
public final class EditImageActivity
extends AppCompatActivity {
    private HashMap _$_findViewCache;
    @Nullable
    private File fileNeedEdit;
    @Nullable
    private String folderParent;
    @Nullable
    private String nameFolder;
    @Nullable
    private String uri;

    public static final /* synthetic */ void access$rotate(EditImageActivity editImageActivity) {
        editImageActivity.rotate();
    }

    private final void rotate() {
        ((CropImageView)this._$_findCachedViewById(R.id.cropImageView)).rotateImage(90);
    }

    public void _$_clearFindViewByIdCache() {
        if (this._$_findViewCache != null) {
            this._$_findViewCache.clear();
        }
    }

    public View _$_findCachedViewById(int n) {
        View view;
        if (this._$_findViewCache == null) {
            this._$_findViewCache = new HashMap();
        }
        View view2 = view = (View)this._$_findViewCache.get(n);
        if (view == null) {
            view2 = this.findViewById(n);
            this._$_findViewCache.put(n, view2);
        }
        return view2;
    }

    public final void cropImage() {
        ((CropImageView)this._$_findCachedViewById(R.id.cropImageView)).getCroppedImageAsync();
    }

    @Nullable
    public final File getFileNeedEdit() {
        return this.fileNeedEdit;
    }

    @Nullable
    public final String getFolderParent() {
        return this.folderParent;
    }

    @Nullable
    public final String getNameFolder() {
        return this.nameFolder;
    }

    @Nullable
    public final String getUri() {
        return this.uri;
    }

    protected void onCreate(@Nullable Bundle bundle) {
        super.onCreate(bundle);
        this.setContentView(2131427401);
        this.setSupportActionBar((Toolbar)this._$_findCachedViewById(R.id.toolbar));
        bundle = this.getSupportActionBar();
        if (bundle != null) {
            bundle.setDisplayHomeAsUpEnabled(true);
        }
        if ((bundle = this.getSupportActionBar()) != null) {
            bundle.setHomeAsUpIndicator(2131165305);
        }
        this.uri = this.getIntent().getStringExtra("uri");
        this.folderParent = this.getIntent().getStringExtra("folderParent");
        this.nameFolder = this.getIntent().getStringExtra("nameFolder");
        bundle = (Toolbar)this._$_findCachedViewById(R.id.toolbar);
        Intrinsics.checkExpressionValueIsNotNull((Object)bundle, (String)"toolbar");
        bundle.setTitle((CharSequence)MainApplication.Companion.getLocale().getEditimage());
        this.fileNeedEdit = new File(String.valueOf(this.uri));
        ((CropImageView)this._$_findCachedViewById(R.id.cropImageView)).setImageUriAsync(Uri.fromFile((File)this.fileNeedEdit));
        bundle = (CropImageView)this._$_findCachedViewById(R.id.cropImageView);
        if (bundle != null) {
            bundle.setOnCropImageCompleteListener(new CropImageView.OnCropImageCompleteListener(this){
                final /* synthetic */ EditImageActivity this$0;
                {
                    this.this$0 = editImageActivity;
                }

                public void onCropImageComplete(@Nullable CropImageView object, @Nullable com.theartofdev.edmodo.cropper.CropImageView$CropResult object2) {
                    Object var6_3 = null;
                    Object object3 = object2 != null ? java.lang.Boolean.valueOf(object2.isSuccessful()) : null;
                    if (object3 == null) {
                        Intrinsics.throwNpe();
                    }
                    if (object3.booleanValue()) {
                        object3 = var6_3;
                        if (object != null) {
                            object3 = object.getTag();
                        }
                        if (Intrinsics.areEqual((Object)object3, (Object)"save")) {
                            object = java.util.Calendar.getInstance();
                            Intrinsics.checkExpressionValueIsNotNull((Object)object, (String)"Calendar.getInstance()");
                            long l = object.getTimeInMillis();
                            object = (CropImageView)this.this$0._$_findCachedViewById(R.id.cropImageView);
                            Intrinsics.checkExpressionValueIsNotNull((Object)object, (String)"cropImageView");
                            object = object.getCroppedImage();
                            if (object != null) {
                                object2 = new java.lang.StringBuilder();
                                object2.append(this.this$0.getFilesDir());
                                object2.append('/');
                                object2.append(this.this$0.getFolderParent());
                                object2 = new File(object2.toString());
                                object3 = new java.lang.StringBuilder();
                                object3.append(this.this$0.getNameFolder());
                                object3.append(l);
                                object3.append(".jpeg");
                                object3 = new File((File)object2, object3.toString());
                                if (!object2.exists()) {
                                    object2.mkdirs();
                                }
                                object.compress(android.graphics.Bitmap$CompressFormat.JPEG, 100, (java.io.OutputStream)new java.io.FileOutputStream((File)object3));
                                object = this.this$0.getFileNeedEdit();
                                if (object != null && object.exists() && (object = this.this$0.getFileNeedEdit()) != null) {
                                    object.delete();
                                }
                            }
                            this.this$0.finish();
                            return;
                        }
                        if (object != null) {
                            object.setImageBitmap(object2.getBitmap());
                        }
                    }
                }
            });
        }
        ((ImageButton)this._$_findCachedViewById(R.id.btnRotate)).setOnClickListener(new View.OnClickListener(this){
            final /* synthetic */ EditImageActivity this$0;
            {
                this.this$0 = editImageActivity;
            }

            public final void onClick(View view) {
                EditImageActivity.access$rotate(this.this$0);
            }
        });
        ((ImageButton)this._$_findCachedViewById(R.id.btnCropImage)).setOnClickListener(new View.OnClickListener(this){
            final /* synthetic */ EditImageActivity this$0;
            {
                this.this$0 = editImageActivity;
            }

            public final void onClick(View view) {
                this.this$0.cropImage();
            }
        });
        ((ImageButton)this._$_findCachedViewById(R.id.btnSavePicture)).setOnClickListener(new View.OnClickListener(this){
            final /* synthetic */ EditImageActivity this$0;
            {
                this.this$0 = editImageActivity;
            }

            public final void onClick(View view) {
                this.this$0.save();
            }
        });
    }

    public boolean onOptionsItemSelected(@Nullable MenuItem menuItem) {
        Integer n = menuItem != null ? Integer.valueOf(menuItem.getItemId()) : null;
        if (n != null && n == 16908332) {
            this.finish();
        }
        return super.onOptionsItemSelected(menuItem);
    }

    public final void save() {
        ImageButton imageButton = (ImageButton)this._$_findCachedViewById(R.id.btnSavePicture);
        if (imageButton != null) {
            imageButton.setVisibility(8);
        }
        imageButton = (CropImageView)this._$_findCachedViewById(R.id.cropImageView);
        Intrinsics.checkExpressionValueIsNotNull((Object)imageButton, (String)"cropImageView");
        imageButton.setTag((Object)"save");
        ((CropImageView)this._$_findCachedViewById(R.id.cropImageView)).getCroppedImageAsync();
    }

    public final void setFileNeedEdit(@Nullable File file) {
        this.fileNeedEdit = file;
    }

    public final void setFolderParent(@Nullable String string2) {
        this.folderParent = string2;
    }

    public final void setNameFolder(@Nullable String string2) {
        this.nameFolder = string2;
    }

    public final void setUri(@Nullable String string2) {
        this.uri = string2;
    }
}

