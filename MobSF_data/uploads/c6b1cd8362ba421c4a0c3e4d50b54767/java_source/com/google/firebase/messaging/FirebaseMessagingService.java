/*
 * Decompiled with CFR 0_132.
 * 
 * Could not load the following classes:
 *  android.app.PendingIntent
 *  android.app.PendingIntent$CanceledException
 *  android.content.Context
 *  android.content.Intent
 *  android.os.Bundle
 *  android.os.Parcelable
 *  android.text.TextUtils
 *  android.util.Log
 */
package com.google.firebase.messaging;

import android.app.PendingIntent;
import android.content.Context;
import android.content.Intent;
import android.os.Bundle;
import android.os.Parcelable;
import android.support.annotation.WorkerThread;
import android.text.TextUtils;
import android.util.Log;
import com.google.android.gms.tasks.Task;
import com.google.android.gms.tasks.Tasks;
import com.google.firebase.iid.zzat;
import com.google.firebase.iid.zzz;
import com.google.firebase.messaging.RemoteMessage;
import com.google.firebase.messaging.SendException;
import com.google.firebase.messaging.zza;
import com.google.firebase.messaging.zzb;
import java.util.ArrayDeque;
import java.util.Iterator;
import java.util.Queue;
import java.util.Set;
import java.util.concurrent.ExecutionException;
import java.util.concurrent.TimeUnit;
import java.util.concurrent.TimeoutException;

public class FirebaseMessagingService
extends com.google.firebase.iid.zzb {
    private static final Queue<String> zzdl = new ArrayDeque<String>(10);

    static void zzj(Bundle object) {
        object = object.keySet().iterator();
        while (object.hasNext()) {
            String string2 = (String)object.next();
            if (string2 == null || !string2.startsWith("google.c.")) continue;
            object.remove();
        }
    }

    static boolean zzk(Bundle bundle) {
        if (bundle == null) {
            return false;
        }
        return "1".equals(bundle.getString("google.c.a.e"));
    }

    @WorkerThread
    public void onDeletedMessages() {
    }

    @WorkerThread
    public void onMessageReceived(RemoteMessage remoteMessage) {
    }

    @WorkerThread
    public void onMessageSent(String string2) {
    }

    @WorkerThread
    public void onNewToken(String string2) {
    }

    @WorkerThread
    public void onSendError(String string2, Exception exception) {
    }

    @Override
    protected final Intent zzb(Intent intent) {
        return zzat.zzah().zzai();
    }

    /*
     * Enabled aggressive block sorting
     * Enabled unnecessary exception pruning
     * Enabled aggressive exception aggregation
     */
    @Override
    public final boolean zzc(Intent intent) {
        block5 : {
            if (!"com.google.firebase.messaging.NOTIFICATION_OPEN".equals(intent.getAction())) {
                return false;
            }
            PendingIntent pendingIntent = (PendingIntent)intent.getParcelableExtra("pending_intent");
            if (pendingIntent != null) {
                try {
                    pendingIntent.send();
                    break block5;
                }
                catch (PendingIntent.CanceledException canceledException) {}
                Log.e((String)"FirebaseMessaging", (String)"Notification pending intent canceled");
            }
        }
        if (FirebaseMessagingService.zzk(intent.getExtras())) {
            zzb.zzf((Context)this, intent);
        }
        return true;
    }

    /*
     * Unable to fully structure code
     * Enabled aggressive block sorting
     * Enabled unnecessary exception pruning
     * Enabled aggressive exception aggregation
     * Lifted jumps to return sites
     */
    @Override
    public final void zzd(Intent var1_1) {
        block25 : {
            block26 : {
                block30 : {
                    block27 : {
                        block28 : {
                            block29 : {
                                var5_4 = var1_1.getAction();
                                if (!"com.google.android.c2dm.intent.RECEIVE".equals(var5_4)) break block25;
                                var6_5 = var1_1.getStringExtra("google.message_id");
                                var4_6 = TextUtils.isEmpty((CharSequence)var6_5);
                                var3_7 = 2;
                                if (var4_6) {
                                    var5_4 = Tasks.forResult(null);
                                } else {
                                    var5_4 = new Bundle();
                                    var5_4.putString("google.message_id", var6_5);
                                    var5_4 = zzz.zzc((Context)this).zza(2, (Bundle)var5_4);
                                }
                                if (TextUtils.isEmpty((CharSequence)var6_5)) ** GOTO lbl22
                                if (FirebaseMessagingService.zzdl.contains(var6_5)) {
                                    if (Log.isLoggable((String)"FirebaseMessaging", (int)3)) {
                                        var6_5 = (var6_5 = String.valueOf(var6_5)).length() != 0 ? "Received duplicate message: ".concat(var6_5) : new String("Received duplicate message: ");
                                        Log.d((String)"FirebaseMessaging", (String)var6_5);
                                    }
                                    var2_8 = 1;
                                } else {
                                    if (FirebaseMessagingService.zzdl.size() >= 10) {
                                        FirebaseMessagingService.zzdl.remove();
                                    }
                                    FirebaseMessagingService.zzdl.add(var6_5);
lbl22: // 2 sources:
                                    var2_8 = 0;
                                }
                                if (var2_8 != 0) break block26;
                                var6_5 = var7_9 = var1_1.getStringExtra("message_type");
                                if (var7_9 == null) {
                                    var6_5 = "gcm";
                                }
                                if ((var2_8 = var6_5.hashCode()) == -2062414158) break block27;
                                if (var2_8 == 102161) break block28;
                                if (var2_8 == 814694033) break block29;
                                if (var2_8 != 814800675 || !var6_5.equals("send_event")) ** GOTO lbl-1000
                                var2_8 = var3_7;
                                break block30;
                            }
                            if (!var6_5.equals("send_error")) ** GOTO lbl-1000
                            var2_8 = 3;
                            break block30;
                        }
                        if (!var6_5.equals("gcm")) ** GOTO lbl-1000
                        var2_8 = 0;
                        break block30;
                    }
                    if (var6_5.equals("deleted_messages")) {
                        var2_8 = 1;
                    } else lbl-1000: // 4 sources:
                    {
                        var2_8 = -1;
                    }
                }
                switch (var2_8) {
                    default: {
                        var1_1 = String.valueOf(var6_5);
                        var1_1 = var1_1.length() != 0 ? "Received message with unknown type: ".concat((String)var1_1) : new String("Received message with unknown type: ");
                    }
                    case 3: {
                        var6_5 = var7_9 = var1_1.getStringExtra("google.message_id");
                        if (var7_9 == null) {
                            var6_5 = var1_1.getStringExtra("message_id");
                        }
                        this.onSendError(var6_5, new SendException(var1_1.getStringExtra("error")));
                        break block26;
                    }
                    case 2: {
                        this.onMessageSent(var1_1.getStringExtra("google.message_id"));
                        break block26;
                    }
                    case 1: {
                        this.onDeletedMessages();
                        break block26;
                    }
                    case 0: {
                        if (FirebaseMessagingService.zzk(var1_1.getExtras())) {
                            zzb.zze((Context)this, (Intent)var1_1);
                        }
                        var6_5 = var7_9 = var1_1.getExtras();
                        if (var7_9 == null) {
                            var6_5 = new Bundle();
                        }
                        var6_5.remove("android.support.content.wakelockid");
                        if (!zza.zzf((Bundle)var6_5)) ** GOTO lbl74
                        if (zza.zzd((Context)this).zzh((Bundle)var6_5)) break block26;
                        if (FirebaseMessagingService.zzk((Bundle)var6_5)) {
                            zzb.zzh((Context)this, (Intent)var1_1);
                        }
lbl74: // 4 sources:
                        this.onMessageReceived(new RemoteMessage((Bundle)var6_5));
                        break block26;
                    }
                }
                Log.w((String)"FirebaseMessaging", (String)var1_1);
            }
            try {
                Tasks.await(var5_4, 1L, TimeUnit.SECONDS);
                return;
            }
            catch (InterruptedException | ExecutionException | TimeoutException var1_2) {
                var1_3 = String.valueOf(var1_2);
                var5_4 = new StringBuilder(String.valueOf(var1_3).length() + 20);
                var5_4.append("Message ack failed: ");
                var5_4.append(var1_3);
                Log.w((String)"FirebaseMessaging", (String)var5_4.toString());
                return;
            }
        }
        if ("com.google.firebase.messaging.NOTIFICATION_DISMISS".equals(var5_4)) {
            if (FirebaseMessagingService.zzk(var1_1.getExtras()) == false) return;
            zzb.zzg((Context)this, (Intent)var1_1);
            return;
        }
        if ("com.google.firebase.messaging.NEW_TOKEN".equals(var5_4)) {
            this.onNewToken(var1_1.getStringExtra("token"));
            return;
        }
        var1_1 = (var1_1 = String.valueOf(var1_1.getAction())).length() != 0 ? "Unknown intent action: ".concat((String)var1_1) : new String("Unknown intent action: ");
        Log.d((String)"FirebaseMessaging", (String)var1_1);
    }
}

