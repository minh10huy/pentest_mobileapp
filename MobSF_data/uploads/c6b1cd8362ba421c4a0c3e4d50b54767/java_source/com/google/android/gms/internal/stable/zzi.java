/*
 * Decompiled with CFR 0_132.
 * 
 * Could not load the following classes:
 *  android.content.ContentResolver
 *  android.database.ContentObserver
 *  android.database.Cursor
 *  android.net.Uri
 *  android.os.Handler
 *  android.util.Log
 */
package com.google.android.gms.internal.stable;

import android.content.ContentResolver;
import android.database.ContentObserver;
import android.database.Cursor;
import android.net.Uri;
import android.os.Handler;
import android.util.Log;
import com.google.android.gms.internal.stable.zzj;
import java.util.HashMap;
import java.util.Map;
import java.util.TreeMap;
import java.util.concurrent.atomic.AtomicBoolean;
import java.util.regex.Matcher;
import java.util.regex.Pattern;

public class zzi {
    private static final Uri CONTENT_URI = Uri.parse((String)"content://com.google.android.gsf.gservices");
    private static HashMap<String, String> zzagq;
    private static final Uri zzagv;
    private static final Pattern zzagw;
    private static final Pattern zzagx;
    private static final AtomicBoolean zzagy;
    private static final HashMap<String, Boolean> zzagz;
    private static final HashMap<String, Integer> zzaha;
    private static final HashMap<String, Long> zzahb;
    private static final HashMap<String, Float> zzahc;
    private static Object zzahd;
    private static boolean zzahe;
    private static String[] zzahf;

    static {
        zzagv = Uri.parse((String)"content://com.google.android.gsf.gservices/prefix");
        zzagw = Pattern.compile("^(1|true|t|on|yes|y)$", 2);
        zzagx = Pattern.compile("^(0|false|f|off|no|n)$", 2);
        zzagy = new AtomicBoolean();
        zzagz = new HashMap();
        zzaha = new HashMap();
        zzahb = new HashMap();
        zzahc = new HashMap();
        zzahf = new String[0];
    }

    /*
     * Enabled aggressive block sorting
     * Enabled unnecessary exception pruning
     * Enabled aggressive exception aggregation
     */
    public static int getInt(ContentResolver object, String string2, int n) {
        void var1_7;
        Object object2;
        void var0_5;
        int n2;
        block4 : {
            Integer n3;
            block3 : {
                int n4;
                object2 = zzi.zzb(object);
                n3 = zzi.zza(zzaha, (String)var1_7, n2);
                if (n3 != null) {
                    return n3;
                }
                String string3 = zzi.zza(object, (String)var1_7, null);
                if (string3 == null) break block3;
                try {
                    n4 = Integer.parseInt(string3);
                }
                catch (NumberFormatException numberFormatException) {}
                Integer n5 = n4;
                n2 = n4;
                break block4;
            }
            Integer n6 = n3;
        }
        zzi.zza(object2, zzaha, (String)var1_7, var0_5);
        return n2;
    }

    /*
     * Enabled aggressive block sorting
     * Enabled unnecessary exception pruning
     * Enabled aggressive exception aggregation
     */
    public static long getLong(ContentResolver object, String string2, long l) {
        void var1_7;
        void var0_5;
        long l2;
        Object object2;
        block4 : {
            object2 = zzi.zzb(object);
            Long l3 = zzi.zza(zzahb, (String)var1_7, l2);
            if (l3 != null) {
                return l3;
            }
            String string3 = zzi.zza(object, (String)var1_7, null);
            if (string3 != null) {
                try {
                    long l4 = Long.parseLong(string3);
                    Long l5 = l4;
                    l2 = l4;
                    break block4;
                }
                catch (NumberFormatException numberFormatException) {}
            }
            Long l6 = l3;
        }
        zzi.zza(object2, zzahb, (String)var1_7, var0_5);
        return l2;
    }

    /*
     * Enabled aggressive block sorting
     * Enabled unnecessary exception pruning
     * Enabled aggressive exception aggregation
     */
    private static <T> T zza(HashMap<String, T> hashMap, String string2, T t) {
        synchronized (zzi.class) {
            if (!hashMap.containsKey(string2)) {
                return null;
            }
            if ((hashMap = hashMap.get(string2)) == null) {
                hashMap = t;
            }
            return (T)hashMap;
        }
    }

    /*
     * Enabled aggressive block sorting
     * Enabled unnecessary exception pruning
     * Enabled aggressive exception aggregation
     * Converted monitor instructions to comments
     * Lifted jumps to return sites
     */
    public static String zza(ContentResolver object, String string2, String object2) {
        // MONITORENTER : com.google.android.gms.internal.stable.zzi.class
        zzi.zza((ContentResolver)object);
        Object object3 = zzahd;
        if (zzagq.containsKey(string2)) {
            object = zzagq.get(string2);
            if (object == null) return object2;
            // MONITOREXIT : com.google.android.gms.internal.stable.zzi.class
            return object;
        }
        Object object4 = zzahf;
        int n = ((String[])object4).length;
        int n2 = 0;
        do {
            block18 : {
                Cursor cursor;
                Throwable throwable2;
                block19 : {
                    block16 : {
                        block15 : {
                            block17 : {
                                if (n2 >= n) break block17;
                                if (string2.startsWith(object4[n2])) {
                                    if (!zzahe || zzagq.isEmpty()) {
                                        object4 = zzahf;
                                        zzagq.putAll(zzi.zza((ContentResolver)object, (String[])object4));
                                        zzahe = true;
                                        if (zzagq.containsKey(string2)) {
                                            object = zzagq.get(string2);
                                            if (object == null) return object2;
                                            // MONITOREXIT : com.google.android.gms.internal.stable.zzi.class
                                            return object;
                                        }
                                    }
                                    // MONITOREXIT : com.google.android.gms.internal.stable.zzi.class
                                    return object2;
                                }
                                break block18;
                            }
                            // MONITOREXIT : com.google.android.gms.internal.stable.zzi.class
                            cursor = object.query(CONTENT_URI, null, null, new String[]{string2}, null);
                            if (cursor != null) {
                                if (!cursor.moveToFirst()) break block15;
                                object4 = cursor.getString(1);
                                object = object4;
                                if (object4 != null) {
                                    object = object4;
                                    if (object4.equals(object2)) {
                                        object = object2;
                                    }
                                }
                                zzi.zza(object3, string2, (String)object);
                                if (object != null) {
                                    object2 = object;
                                }
                                if (cursor == null) return object2;
                                cursor.close();
                                return object2;
                            }
                        }
                        try {
                            zzi.zza(object3, string2, null);
                            if (cursor == null) return object2;
                            break block16;
                        }
                        catch (Throwable throwable2) {}
                        break block19;
                    }
                    cursor.close();
                    return object2;
                }
                if (cursor == null) throw throwable2;
                cursor.close();
                throw throwable2;
            }
            ++n2;
        } while (true);
    }

    private static /* varargs */ Map<String, String> zza(ContentResolver contentResolver, String ... object) {
        contentResolver = contentResolver.query(zzagv, null, null, (String[])object, null);
        object = new TreeMap();
        if (contentResolver == null) {
            return object;
        }
        try {
            while (contentResolver.moveToNext()) {
                object.put(contentResolver.getString(0), contentResolver.getString(1));
            }
            return object;
        }
        finally {
            contentResolver.close();
        }
    }

    private static void zza(ContentResolver contentResolver) {
        if (zzagq == null) {
            zzagy.set(false);
            zzagq = new HashMap();
            zzahd = new Object();
            zzahe = false;
            contentResolver.registerContentObserver(CONTENT_URI, true, (ContentObserver)new zzj(null));
            return;
        }
        if (zzagy.getAndSet(false)) {
            zzagq.clear();
            zzagz.clear();
            zzaha.clear();
            zzahb.clear();
            zzahc.clear();
            zzahd = new Object();
            zzahe = false;
        }
    }

    /*
     * Enabled aggressive block sorting
     * Enabled unnecessary exception pruning
     * Enabled aggressive exception aggregation
     */
    private static void zza(Object object, String string2, String string3) {
        synchronized (zzi.class) {
            if (object == zzahd) {
                zzagq.put(string2, string3);
            }
            return;
        }
    }

    /*
     * Enabled aggressive block sorting
     * Enabled unnecessary exception pruning
     * Enabled aggressive exception aggregation
     */
    private static <T> void zza(Object object, HashMap<String, T> hashMap, String string2, T t) {
        synchronized (zzi.class) {
            if (object == zzahd) {
                hashMap.put(string2, t);
                zzagq.remove(string2);
            }
            return;
        }
    }

    public static boolean zza(ContentResolver object, String string2, boolean bl) {
        Object object2 = zzi.zzb((ContentResolver)object);
        Boolean bl2 = zzi.zza(zzagz, string2, Boolean.valueOf(bl));
        if (bl2 != null) {
            return bl2;
        }
        String string3 = zzi.zza((ContentResolver)object, string2, null);
        object = bl2;
        boolean bl3 = bl;
        if (string3 != null) {
            if (string3.equals("")) {
                object = bl2;
                bl3 = bl;
            } else if (zzagw.matcher(string3).matches()) {
                object = true;
                bl3 = true;
            } else if (zzagx.matcher(string3).matches()) {
                object = false;
                bl3 = false;
            } else {
                object = new StringBuilder("attempt to read gservices key ");
                object.append(string2);
                object.append(" (value \"");
                object.append(string3);
                object.append("\") as boolean");
                Log.w((String)"Gservices", (String)object.toString());
                bl3 = bl;
                object = bl2;
            }
        }
        zzi.zza(object2, zzagz, string2, object);
        return bl3;
    }

    /*
     * Enabled aggressive block sorting
     * Enabled unnecessary exception pruning
     * Enabled aggressive exception aggregation
     */
    private static Object zzb(ContentResolver object) {
        synchronized (zzi.class) {
            zzi.zza(object);
            return zzahd;
        }
    }

    static /* synthetic */ AtomicBoolean zzdv() {
        return zzagy;
    }
}

