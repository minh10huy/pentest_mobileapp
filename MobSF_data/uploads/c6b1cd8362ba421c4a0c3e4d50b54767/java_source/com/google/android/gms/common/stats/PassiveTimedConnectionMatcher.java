/*
 * Decompiled with CFR 0_132.
 * 
 * Could not load the following classes:
 *  android.os.SystemClock
 *  android.util.Log
 */
package com.google.android.gms.common.stats;

import android.os.SystemClock;
import android.support.v4.util.SimpleArrayMap;
import android.util.Log;

public class PassiveTimedConnectionMatcher {
    private final long zzym;
    private final int zzyn;
    private final SimpleArrayMap<String, Long> zzyo;

    public PassiveTimedConnectionMatcher() {
        this.zzym = 60000L;
        this.zzyn = 10;
        this.zzyo = new SimpleArrayMap(10);
    }

    public PassiveTimedConnectionMatcher(int n, long l) {
        this.zzym = l;
        this.zzyn = n;
        this.zzyo = new SimpleArrayMap();
    }

    /*
     * Enabled aggressive block sorting
     * Enabled unnecessary exception pruning
     * Enabled aggressive exception aggregation
     */
    public Long get(String object) {
        synchronized (this) {
            return this.zzyo.get(object);
        }
    }

    /*
     * Enabled aggressive block sorting
     * Enabled unnecessary exception pruning
     * Enabled aggressive exception aggregation
     */
    public Long put(String object) {
        long l = SystemClock.elapsedRealtime();
        long l2 = this.zzym;
        synchronized (this) {
            block2 : while (this.zzyo.size() >= this.zzyn) {
                int n = this.zzyo.size() - 1;
                do {
                    if (n >= 0) {
                        if (l - this.zzyo.valueAt(n) > l2) {
                            this.zzyo.removeAt(n);
                        }
                    } else {
                        n = this.zzyn;
                        StringBuilder stringBuilder = new StringBuilder(94);
                        stringBuilder.append("The max capacity ");
                        stringBuilder.append(n);
                        stringBuilder.append(" is not enough. Current durationThreshold is: ");
                        stringBuilder.append(l2 /= 2L);
                        Log.w((String)"ConnectionTracker", (String)stringBuilder.toString());
                        continue block2;
                    }
                    --n;
                } while (true);
                break;
            }
            return this.zzyo.put((String)object, l);
        }
    }

    /*
     * Enabled aggressive block sorting
     * Enabled unnecessary exception pruning
     * Enabled aggressive exception aggregation
     */
    public boolean remove(String string2) {
        synchronized (this) {
            if (this.zzyo.remove(string2) == null) return false;
            return true;
        }
    }

    /*
     * Enabled aggressive block sorting
     * Enabled unnecessary exception pruning
     * Enabled aggressive exception aggregation
     */
    public boolean removeByPrefix(String string2) {
        synchronized (this) {
            int n = 0;
            boolean bl = false;
            while (n < this.size()) {
                String string3 = this.zzyo.keyAt(n);
                boolean bl2 = bl;
                if (string3 != null) {
                    bl2 = bl;
                    if (string3.startsWith(string2)) {
                        this.zzyo.remove(string3);
                        bl2 = true;
                    }
                }
                ++n;
                bl = bl2;
            }
            return bl;
        }
    }

    /*
     * Enabled aggressive block sorting
     * Enabled unnecessary exception pruning
     * Enabled aggressive exception aggregation
     */
    public int size() {
        synchronized (this) {
            return this.zzyo.size();
        }
    }
}

