/*
 * Decompiled with CFR 0_132.
 */
package com.google.android.gms.common.data;

import com.google.android.gms.common.data.AbstractDataBuffer;
import com.google.android.gms.common.data.DataHolder;
import java.util.ArrayList;

public abstract class EntityBuffer<T>
extends AbstractDataBuffer<T> {
    private boolean zzoa = false;
    private ArrayList<Integer> zzob;

    protected EntityBuffer(DataHolder dataHolder) {
        super(dataHolder);
    }

    /*
     * Enabled aggressive block sorting
     * Enabled unnecessary exception pruning
     * Enabled aggressive exception aggregation
     */
    private final void zzck() {
        synchronized (this) {
            if (!this.zzoa) {
                int n = this.mDataHolder.getCount();
                this.zzob = new ArrayList();
                if (n > 0) {
                    this.zzob.add(0);
                    String string2 = this.getPrimaryDataMarkerColumn();
                    int n2 = this.mDataHolder.getWindowIndex(0);
                    CharSequence charSequence = this.mDataHolder.getString(string2, 0, n2);
                    for (n2 = 1; n2 < n; ++n2) {
                        int n3 = this.mDataHolder.getWindowIndex(n2);
                        String string3 = this.mDataHolder.getString(string2, n2, n3);
                        if (string3 == null) {
                            charSequence = new StringBuilder(String.valueOf(string2).length() + 78);
                            charSequence.append("Missing value for markerColumn: ");
                            charSequence.append(string2);
                            charSequence.append(", at row: ");
                            charSequence.append(n2);
                            charSequence.append(", for window: ");
                            charSequence.append(n3);
                            throw new NullPointerException(charSequence.toString());
                        }
                        String string4 = charSequence;
                        if (!string3.equals(charSequence)) {
                            this.zzob.add(n2);
                            string4 = string3;
                        }
                        charSequence = string4;
                    }
                }
                this.zzoa = true;
            }
            return;
        }
    }

    @Override
    public final T get(int n) {
        this.zzck();
        return this.getEntry(this.zzi(n), this.getChildCount(n));
    }

    /*
     * Enabled aggressive block sorting
     */
    protected int getChildCount(int n) {
        if (n < 0) {
            return 0;
        }
        if (n == this.zzob.size()) {
            return 0;
        }
        int n2 = n == this.zzob.size() - 1 ? this.mDataHolder.getCount() : this.zzob.get(n + 1).intValue();
        if ((n2 -= this.zzob.get(n).intValue()) == 1) {
            n = this.zzi(n);
            int n3 = this.mDataHolder.getWindowIndex(n);
            String string2 = this.getChildDataMarkerColumn();
            if (string2 != null && this.mDataHolder.getString(string2, n, n3) == null) {
                return 0;
            }
        }
        return n2;
    }

    protected String getChildDataMarkerColumn() {
        return null;
    }

    @Override
    public int getCount() {
        this.zzck();
        return this.zzob.size();
    }

    protected abstract T getEntry(int var1, int var2);

    protected abstract String getPrimaryDataMarkerColumn();

    final int zzi(int n) {
        if (n >= 0 && n < this.zzob.size()) {
            return this.zzob.get(n);
        }
        StringBuilder stringBuilder = new StringBuilder(53);
        stringBuilder.append("Position ");
        stringBuilder.append(n);
        stringBuilder.append(" is out of bounds for this buffer");
        throw new IllegalArgumentException(stringBuilder.toString());
    }
}

