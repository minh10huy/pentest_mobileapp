/*
 * Decompiled with CFR 0_132.
 */
package com.itextpdf.text.pdf.codec;

import com.itextpdf.text.ExceptionConverter;
import com.itextpdf.text.Image;
import com.itextpdf.text.error_messages.MessageLocalization;
import com.itextpdf.text.pdf.RandomAccessFileOrArray;
import com.itextpdf.text.pdf.codec.TIFFDirectory;
import com.itextpdf.text.pdf.codec.TIFFField;
import java.io.IOException;
import java.io.Serializable;
import java.util.zip.DataFormatException;
import java.util.zip.DeflaterOutputStream;
import java.util.zip.Inflater;

public class TiffImage {
    static Image ProcessExtraSamples(DeflaterOutputStream deflaterOutputStream, DeflaterOutputStream deflaterOutputStream2, byte[] arrby, int n, int n2, int n3, int n4) throws IOException {
        if (n2 == 8) {
            int n5 = n3 * n4;
            byte[] arrby2 = new byte[n5];
            n4 = 0;
            n2 = 0;
            n3 = 0;
            while (n4 < n5 * n) {
                int n6 = 0;
                while (n6 < n - 1) {
                    arrby[n2] = arrby[n4 + n6];
                    ++n6;
                    ++n2;
                }
                arrby2[n3] = arrby[(n4 += n) - 1];
                ++n3;
            }
            deflaterOutputStream.write(arrby, 0, n2);
            deflaterOutputStream2.write(arrby2, 0, n3);
            return null;
        }
        throw new IllegalArgumentException(MessageLocalization.getComposedMessage("extra.samples.are.not.supported", new Object[0]));
    }

    public static void applyPredictor(byte[] arrby, int n, int n2, int n3, int n4) {
        if (n != 2) {
            return;
        }
        for (n = 0; n < n3; ++n) {
            int n5 = (n * n2 + 1) * n4;
            for (int i = n4; i < n2 * n4; ++i) {
                arrby[n5] = (byte)(arrby[n5] + arrby[n5 - n4]);
                ++n5;
            }
        }
    }

    /*
     * Enabled aggressive block sorting
     * Enabled unnecessary exception pruning
     * Enabled aggressive exception aggregation
     */
    public static void decodePackbits(byte[] arrby, byte[] arrby2) {
        int n = 0;
        int n2 = 0;
        block2 : do {
            byte by;
            int n3;
            block7 : {
                block8 : {
                    block6 : {
                        try {
                            if (n >= arrby2.length) break block6;
                        }
                        catch (Exception exception) {
                            return;
                        }
                        n3 = n2 + 1;
                        by = arrby[n2];
                        if (by < 0 || by > 127) break block7;
                        break block8;
                    }
                    return;
                }
                n2 = n3;
                n3 = 0;
                do {
                    if (n3 >= by + 1) continue block2;
                    arrby2[n] = arrby[n2];
                    ++n3;
                    ++n;
                    ++n2;
                } while (true);
            }
            if (by <= -1 && by >= -127) {
                byte by2 = arrby[n3];
                for (n2 = 0; n2 < - by + 1; ++n2, ++n) {
                    arrby2[n] = by2;
                }
                n2 = n3 + 1;
                continue;
            }
            n2 = n3 + 1;
        } while (true);
    }

    static long[] getArrayLongShort(TIFFDirectory serializable, int n) {
        if ((serializable = serializable.getField(n)) == null) {
            return null;
        }
        if (serializable.getType() == 4) {
            return serializable.getAsLongs();
        }
        serializable = serializable.getAsChars();
        long[] arrl = new long[((Serializable)serializable).length];
        for (n = 0; n < ((Serializable)serializable).length; ++n) {
            arrl[n] = (long)serializable[n];
        }
        return arrl;
    }

    static int getDpi(TIFFField arrl, int n) {
        if (arrl == null) {
            return 0;
        }
        arrl = arrl.getAsRational(0);
        float f = (float)arrl[0] / (float)arrl[1];
        switch (n) {
            default: {
                return 0;
            }
            case 3: {
                return (int)((double)f * 2.54 + 0.5);
            }
            case 1: 
            case 2: 
        }
        return (int)((double)f + 0.5);
    }

    public static int getNumberOfPages(RandomAccessFileOrArray randomAccessFileOrArray) {
        try {
            int n = TIFFDirectory.getNumDirectories(randomAccessFileOrArray);
            return n;
        }
        catch (Exception exception) {
            throw new ExceptionConverter(exception);
        }
    }

    public static Image getTiffImage(RandomAccessFileOrArray randomAccessFileOrArray, int n) {
        return TiffImage.getTiffImage(randomAccessFileOrArray, n, false);
    }

    public static Image getTiffImage(RandomAccessFileOrArray randomAccessFileOrArray, int n, boolean bl) {
        return TiffImage.getTiffImage(randomAccessFileOrArray, false, n, bl);
    }

    public static Image getTiffImage(RandomAccessFileOrArray randomAccessFileOrArray, boolean bl, int n) {
        return TiffImage.getTiffImage(randomAccessFileOrArray, bl, n, false);
    }

    /*
     * Exception decompiling
     */
    public static Image getTiffImage(RandomAccessFileOrArray var0, boolean var1_3, int var2_4, boolean var3_5) {
        // This method has failed to decompile.  When submitting a bug report, please provide this stack trace, and (if you hold appropriate legal rights) the relevant class file.
        // org.benf.cfr.reader.util.ConfusedCFRException: First case is not immediately after switch.
        // org.benf.cfr.reader.bytecode.analysis.opgraph.op3rewriters.SwitchReplacer.examineSwitchContiguity(SwitchReplacer.java:366)
        // org.benf.cfr.reader.bytecode.analysis.opgraph.op3rewriters.SwitchReplacer.replaceRawSwitches(SwitchReplacer.java:65)
        // org.benf.cfr.reader.bytecode.CodeAnalyser.getAnalysisInner(CodeAnalyser.java:416)
        // org.benf.cfr.reader.bytecode.CodeAnalyser.getAnalysisOrWrapFail(CodeAnalyser.java:196)
        // org.benf.cfr.reader.bytecode.CodeAnalyser.getAnalysis(CodeAnalyser.java:141)
        // org.benf.cfr.reader.entities.attributes.AttributeCode.analyse(AttributeCode.java:95)
        // org.benf.cfr.reader.entities.Method.analyse(Method.java:372)
        // org.benf.cfr.reader.entities.ClassFile.analyseMid(ClassFile.java:867)
        // org.benf.cfr.reader.entities.ClassFile.analyseTop(ClassFile.java:768)
        // org.benf.cfr.reader.Main.doJar(Main.java:141)
        // org.benf.cfr.reader.Main.main(Main.java:242)
        throw new IllegalStateException("Decompilation failed");
    }

    protected static Image getTiffImageColor(TIFFDirectory tIFFDirectory, RandomAccessFileOrArray randomAccessFileOrArray) {
        RuntimeException runtimeException;
        super("d2j fail translate: java.lang.RuntimeException: can not merge I and Z\n\tat com.googlecode.dex2jar.ir.TypeClass.merge(TypeClass.java:100)\n\tat com.googlecode.dex2jar.ir.ts.TypeTransformer$TypeRef.updateTypeClass(TypeTransformer.java:174)\n\tat com.googlecode.dex2jar.ir.ts.TypeTransformer$TypeAnalyze.copyTypes(TypeTransformer.java:311)\n\tat com.googlecode.dex2jar.ir.ts.TypeTransformer$TypeAnalyze.fixTypes(TypeTransformer.java:226)\n\tat com.googlecode.dex2jar.ir.ts.TypeTransformer$TypeAnalyze.analyze(TypeTransformer.java:207)\n\tat com.googlecode.dex2jar.ir.ts.TypeTransformer.transform(TypeTransformer.java:44)\n\tat com.googlecode.d2j.dex.Dex2jar$2.optimize(Dex2jar.java:162)\n\tat com.googlecode.d2j.dex.Dex2Asm.convertCode(Dex2Asm.java:414)\n\tat com.googlecode.d2j.dex.ExDex2Asm.convertCode(ExDex2Asm.java:42)\n\tat com.googlecode.d2j.dex.Dex2jar$2.convertCode(Dex2jar.java:128)\n\tat com.googlecode.d2j.dex.Dex2Asm.convertMethod(Dex2Asm.java:509)\n\tat com.googlecode.d2j.dex.Dex2Asm.convertClass(Dex2Asm.java:406)\n\tat com.googlecode.d2j.dex.Dex2Asm.convertDex(Dex2Asm.java:422)\n\tat com.googlecode.d2j.dex.Dex2jar.doTranslate(Dex2jar.java:172)\n\tat com.googlecode.d2j.dex.Dex2jar.to(Dex2jar.java:272)\n\tat com.googlecode.dex2jar.tools.Dex2jarCmd.doCommandLine(Dex2jarCmd.java:108)\n\tat com.googlecode.dex2jar.tools.BaseCmd.doMain(BaseCmd.java:288)\n\tat com.googlecode.dex2jar.tools.Dex2jarCmd.main(Dex2jarCmd.java:32)\n");
        throw runtimeException;
    }

    public static void inflate(byte[] arrby, byte[] arrby2) {
        Inflater inflater = new Inflater();
        inflater.setInput(arrby);
        try {
            inflater.inflate(arrby2);
            return;
        }
        catch (DataFormatException dataFormatException) {
            throw new ExceptionConverter(dataFormatException);
        }
    }
}

