/*
 * Decompiled with CFR 0_132.
 */
package com.itextpdf.text.pdf;

import com.itextpdf.text.ExceptionConverter;
import com.itextpdf.text.error_messages.MessageLocalization;
import com.itextpdf.text.factories.RomanAlphabetFactory;
import com.itextpdf.text.factories.RomanNumberFactory;
import com.itextpdf.text.pdf.PdfDictionary;
import com.itextpdf.text.pdf.PdfName;
import com.itextpdf.text.pdf.PdfNumber;
import com.itextpdf.text.pdf.PdfNumberTree;
import com.itextpdf.text.pdf.PdfObject;
import com.itextpdf.text.pdf.PdfReader;
import com.itextpdf.text.pdf.PdfString;
import com.itextpdf.text.pdf.PdfWriter;
import java.io.IOException;
import java.io.Serializable;
import java.util.Arrays;
import java.util.HashMap;
import java.util.Set;

public class PdfPageLabels {
    public static final int DECIMAL_ARABIC_NUMERALS = 0;
    public static final int EMPTY = 5;
    public static final int LOWERCASE_LETTERS = 4;
    public static final int LOWERCASE_ROMAN_NUMERALS = 2;
    public static final int UPPERCASE_LETTERS = 3;
    public static final int UPPERCASE_ROMAN_NUMERALS = 1;
    static PdfName[] numberingStyle = new PdfName[]{PdfName.D, PdfName.R, new PdfName("r"), PdfName.A, new PdfName("a")};
    private HashMap<Integer, PdfDictionary> map = new HashMap();

    public PdfPageLabels() {
        this.addPageLabel(1, 0, null, 1);
    }

    public static PdfPageLabelFormat[] getPageLabelFormats(PdfReader object) {
        if ((object = (PdfDictionary)PdfReader.getPdfObjectRelease(object.getCatalog().get(PdfName.PAGELABELS))) == null) {
            return null;
        }
        HashMap<Integer, PdfObject> hashMap = PdfNumberTree.readTree((PdfDictionary)object);
        object = new Integer[hashMap.size()];
        Object[] arrobject = hashMap.keySet().toArray((T[])object);
        Arrays.sort(arrobject);
        PdfPageLabelFormat[] arrpdfPageLabelFormat = new PdfPageLabelFormat[hashMap.size()];
        for (int i = 0; i < arrobject.length; ++i) {
            int n;
            Object object2 = arrobject[i];
            PdfDictionary pdfDictionary = (PdfDictionary)PdfReader.getPdfObjectRelease(hashMap.get(object2));
            int n2 = pdfDictionary.contains(PdfName.ST) ? ((PdfNumber)pdfDictionary.get(PdfName.ST)).intValue() : 1;
            object = pdfDictionary.contains(PdfName.P) ? ((PdfString)pdfDictionary.get(PdfName.P)).toUnicodeString() : "";
            n = pdfDictionary.contains(PdfName.S) ? ((n = (int)((PdfName)pdfDictionary.get(PdfName.S)).toString().charAt(1)) != 65 ? (n != 82 ? (n != 97 ? (n != 114 ? 0 : 2) : 4) : 1) : 3) : 5;
            arrpdfPageLabelFormat[i] = new PdfPageLabelFormat(object2.intValue() + 1, n, (String)object, n2);
        }
        return arrpdfPageLabelFormat;
    }

    public static String[] getPageLabels(PdfReader object) {
        int n = object.getNumberOfPages();
        if ((object = (PdfDictionary)PdfReader.getPdfObjectRelease(object.getCatalog().get(PdfName.PAGELABELS))) == null) {
            return null;
        }
        String[] arrstring = new String[n];
        HashMap<Integer, PdfObject> hashMap = PdfNumberTree.readTree((PdfDictionary)object);
        int n2 = 68;
        object = "";
        int n3 = 1;
        for (int i = 0; i < n; ++i) {
            Serializable serializable = Integer.valueOf(i);
            if (hashMap.containsKey(serializable)) {
                n2 = (serializable = (PdfDictionary)PdfReader.getPdfObjectRelease(hashMap.get(serializable))).contains(PdfName.ST) ? ((PdfNumber)serializable.get(PdfName.ST)).intValue() : 1;
                object = serializable.contains(PdfName.P) ? ((PdfString)serializable.get(PdfName.P)).toUnicodeString() : "";
                if (serializable.contains(PdfName.S)) {
                    char c = ((PdfName)serializable.get(PdfName.S)).toString().charAt(1);
                    n3 = n2;
                    n2 = c;
                } else {
                    n3 = n2;
                    n2 = 101;
                }
            }
            if (n2 != 65) {
                if (n2 != 82) {
                    if (n2 != 97) {
                        if (n2 != 101) {
                            if (n2 != 114) {
                                serializable = new StringBuilder();
                                serializable.append((String)object);
                                serializable.append(n3);
                                arrstring[i] = serializable.toString();
                            } else {
                                serializable = new StringBuilder();
                                serializable.append((String)object);
                                serializable.append(RomanNumberFactory.getLowerCaseString(n3));
                                arrstring[i] = serializable.toString();
                            }
                        } else {
                            arrstring[i] = object;
                        }
                    } else {
                        serializable = new StringBuilder();
                        serializable.append((String)object);
                        serializable.append(RomanAlphabetFactory.getLowerCaseString(n3));
                        arrstring[i] = serializable.toString();
                    }
                } else {
                    serializable = new StringBuilder();
                    serializable.append((String)object);
                    serializable.append(RomanNumberFactory.getUpperCaseString(n3));
                    arrstring[i] = serializable.toString();
                }
            } else {
                serializable = new StringBuilder();
                serializable.append((String)object);
                serializable.append(RomanAlphabetFactory.getUpperCaseString(n3));
                arrstring[i] = serializable.toString();
            }
            ++n3;
        }
        return arrstring;
    }

    public void addPageLabel(int n, int n2) {
        this.addPageLabel(n, n2, null, 1);
    }

    public void addPageLabel(int n, int n2, String string2) {
        this.addPageLabel(n, n2, string2, 1);
    }

    public void addPageLabel(int n, int n2, String string2, int n3) {
        if (n >= 1 && n3 >= 1) {
            PdfDictionary pdfDictionary = new PdfDictionary();
            if (n2 >= 0 && n2 < numberingStyle.length) {
                pdfDictionary.put(PdfName.S, numberingStyle[n2]);
            }
            if (string2 != null) {
                pdfDictionary.put(PdfName.P, new PdfString(string2, "UnicodeBig"));
            }
            if (n3 != 1) {
                pdfDictionary.put(PdfName.ST, new PdfNumber(n3));
            }
            this.map.put(n - 1, pdfDictionary);
            return;
        }
        throw new IllegalArgumentException(MessageLocalization.getComposedMessage("in.a.page.label.the.page.numbers.must.be.greater.or.equal.to.1", new Object[0]));
    }

    public void addPageLabel(int n, int n2, String string2, int n3, boolean bl) {
        if (n >= 1 && n3 >= 1) {
            PdfDictionary pdfDictionary = new PdfDictionary();
            if (n2 >= 0 && n2 < numberingStyle.length) {
                pdfDictionary.put(PdfName.S, numberingStyle[n2]);
            }
            if (string2 != null) {
                pdfDictionary.put(PdfName.P, new PdfString(string2, "UnicodeBig"));
            }
            if (n3 != 1 || bl) {
                pdfDictionary.put(PdfName.ST, new PdfNumber(n3));
            }
            this.map.put(n - 1, pdfDictionary);
            return;
        }
        throw new IllegalArgumentException(MessageLocalization.getComposedMessage("in.a.page.label.the.page.numbers.must.be.greater.or.equal.to.1", new Object[0]));
    }

    public void addPageLabel(PdfPageLabelFormat pdfPageLabelFormat) {
        this.addPageLabel(pdfPageLabelFormat.physicalPage, pdfPageLabelFormat.numberStyle, pdfPageLabelFormat.prefix, pdfPageLabelFormat.logicalPage);
    }

    public PdfDictionary getDictionary(PdfWriter object) {
        try {
            object = PdfNumberTree.writeTree(this.map, (PdfWriter)object);
            return object;
        }
        catch (IOException iOException) {
            throw new ExceptionConverter(iOException);
        }
    }

    public void removePageLabel(int n) {
        if (n <= 1) {
            return;
        }
        this.map.remove(n - 1);
    }

    public static class PdfPageLabelFormat {
        public int logicalPage;
        public int numberStyle;
        public int physicalPage;
        public String prefix;

        public PdfPageLabelFormat(int n, int n2, String string2, int n3) {
            this.physicalPage = n;
            this.numberStyle = n2;
            this.prefix = string2;
            this.logicalPage = n3;
        }

        public String toString() {
            return String.format("Physical page %s: style: %s; prefix '%s'; logical page: %s", this.physicalPage, this.numberStyle, this.prefix, this.logicalPage);
        }
    }

}

