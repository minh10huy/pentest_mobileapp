/*
 * Decompiled with CFR 0_132.
 */
package com.itextpdf.text.pdf;

import com.itextpdf.text.BaseColor;
import com.itextpdf.text.error_messages.MessageLocalization;
import com.itextpdf.text.pdf.CMYKColor;
import com.itextpdf.text.pdf.ColorDetails;
import com.itextpdf.text.pdf.DeviceNColor;
import com.itextpdf.text.pdf.ExtendedColor;
import com.itextpdf.text.pdf.GrayColor;
import com.itextpdf.text.pdf.ICachedColorSpace;
import com.itextpdf.text.pdf.PdfArray;
import com.itextpdf.text.pdf.PdfBoolean;
import com.itextpdf.text.pdf.PdfDeviceNColor;
import com.itextpdf.text.pdf.PdfDictionary;
import com.itextpdf.text.pdf.PdfFunction;
import com.itextpdf.text.pdf.PdfIndirectObject;
import com.itextpdf.text.pdf.PdfIndirectReference;
import com.itextpdf.text.pdf.PdfName;
import com.itextpdf.text.pdf.PdfNumber;
import com.itextpdf.text.pdf.PdfObject;
import com.itextpdf.text.pdf.PdfSpotColor;
import com.itextpdf.text.pdf.PdfWriter;
import com.itextpdf.text.pdf.SpotColor;
import java.io.IOException;

public class PdfShading {
    protected boolean antiAlias = false;
    protected float[] bBox;
    protected ColorDetails colorDetails;
    private BaseColor cspace;
    protected PdfDictionary shading;
    protected PdfName shadingName;
    protected PdfIndirectReference shadingReference;
    protected int shadingType;
    protected PdfWriter writer;

    protected PdfShading(PdfWriter pdfWriter) {
        this.writer = pdfWriter;
    }

    public static void checkCompatibleColors(BaseColor baseColor, BaseColor baseColor2) {
        int n = ExtendedColor.getType(baseColor);
        if (n != ExtendedColor.getType(baseColor2)) {
            throw new IllegalArgumentException(MessageLocalization.getComposedMessage("both.colors.must.be.of.the.same.type", new Object[0]));
        }
        if (n == 3 && ((SpotColor)baseColor).getPdfSpotColor() != ((SpotColor)baseColor2).getPdfSpotColor()) {
            throw new IllegalArgumentException(MessageLocalization.getComposedMessage("the.spot.color.must.be.the.same.only.the.tint.can.vary", new Object[0]));
        }
        if (n == 4 || n == 5) {
            PdfShading.throwColorSpaceError();
        }
    }

    public static float[] getColorArray(BaseColor baseColor) {
        int n = ExtendedColor.getType(baseColor);
        if (n != 6) {
            switch (n) {
                default: {
                    PdfShading.throwColorSpaceError();
                    return null;
                }
                case 3: {
                    return new float[]{((SpotColor)baseColor).getTint()};
                }
                case 2: {
                    baseColor = (CMYKColor)baseColor;
                    return new float[]{baseColor.getCyan(), baseColor.getMagenta(), baseColor.getYellow(), baseColor.getBlack()};
                }
                case 1: {
                    return new float[]{((GrayColor)baseColor).getGray()};
                }
                case 0: 
            }
            return new float[]{(float)baseColor.getRed() / 255.0f, (float)baseColor.getGreen() / 255.0f, (float)baseColor.getBlue() / 255.0f};
        }
        return ((DeviceNColor)baseColor).getTints();
    }

    public static PdfShading simpleAxial(PdfWriter pdfWriter, float f, float f2, float f3, float f4, BaseColor baseColor, BaseColor baseColor2) {
        return PdfShading.simpleAxial(pdfWriter, f, f2, f3, f4, baseColor, baseColor2, true, true);
    }

    public static PdfShading simpleAxial(PdfWriter pdfWriter, float f, float f2, float f3, float f4, BaseColor baseColor, BaseColor object, boolean bl, boolean bl2) {
        PdfShading.checkCompatibleColors(baseColor, (BaseColor)object);
        float[] arrf = PdfShading.getColorArray(baseColor);
        object = PdfShading.getColorArray((BaseColor)object);
        object = PdfFunction.type2(pdfWriter, new float[]{0.0f, 1.0f}, null, arrf, object, 1.0f);
        return PdfShading.type2(pdfWriter, baseColor, new float[]{f, f2, f3, f4}, null, (PdfFunction)object, new boolean[]{bl, bl2});
    }

    public static PdfShading simpleRadial(PdfWriter pdfWriter, float f, float f2, float f3, float f4, float f5, float f6, BaseColor baseColor, BaseColor baseColor2) {
        return PdfShading.simpleRadial(pdfWriter, f, f2, f3, f4, f5, f6, baseColor, baseColor2, true, true);
    }

    public static PdfShading simpleRadial(PdfWriter pdfWriter, float f, float f2, float f3, float f4, float f5, float f6, BaseColor baseColor, BaseColor object, boolean bl, boolean bl2) {
        PdfShading.checkCompatibleColors(baseColor, (BaseColor)object);
        float[] arrf = PdfShading.getColorArray(baseColor);
        object = PdfShading.getColorArray((BaseColor)object);
        object = PdfFunction.type2(pdfWriter, new float[]{0.0f, 1.0f}, null, arrf, object, 1.0f);
        return PdfShading.type3(pdfWriter, baseColor, new float[]{f, f2, f3, f4, f5, f6}, null, (PdfFunction)object, new boolean[]{bl, bl2});
    }

    public static void throwColorSpaceError() {
        throw new IllegalArgumentException(MessageLocalization.getComposedMessage("a.tiling.or.shading.pattern.cannot.be.used.as.a.color.space.in.a.shading.pattern", new Object[0]));
    }

    public static PdfShading type1(PdfWriter object, BaseColor baseColor, float[] arrf, float[] arrf2, PdfFunction pdfFunction) {
        object = new PdfShading((PdfWriter)object);
        object.shading = new PdfDictionary();
        object.shadingType = 1;
        object.shading.put(PdfName.SHADINGTYPE, new PdfNumber(object.shadingType));
        object.setColorSpace(baseColor);
        if (arrf != null) {
            object.shading.put(PdfName.DOMAIN, new PdfArray(arrf));
        }
        if (arrf2 != null) {
            object.shading.put(PdfName.MATRIX, new PdfArray(arrf2));
        }
        object.shading.put(PdfName.FUNCTION, pdfFunction.getReference());
        return object;
    }

    public static PdfShading type2(PdfWriter object, BaseColor object2, float[] arrf, float[] arrf2, PdfFunction pdfFunction, boolean[] arrbl) {
        PdfShading pdfShading = new PdfShading((PdfWriter)object);
        pdfShading.shading = new PdfDictionary();
        pdfShading.shadingType = 2;
        pdfShading.shading.put(PdfName.SHADINGTYPE, new PdfNumber(pdfShading.shadingType));
        pdfShading.setColorSpace((BaseColor)object2);
        pdfShading.shading.put(PdfName.COORDS, new PdfArray(arrf));
        if (arrf2 != null) {
            pdfShading.shading.put(PdfName.DOMAIN, new PdfArray(arrf2));
        }
        pdfShading.shading.put(PdfName.FUNCTION, pdfFunction.getReference());
        if (arrbl != null && (arrbl[0] || arrbl[1])) {
            object = arrbl[0] ? PdfBoolean.PDFTRUE : PdfBoolean.PDFFALSE;
            object2 = new PdfArray((PdfObject)object);
            object = arrbl[1] ? PdfBoolean.PDFTRUE : PdfBoolean.PDFFALSE;
            object2.add((PdfObject)object);
            pdfShading.shading.put(PdfName.EXTEND, (PdfObject)object2);
        }
        return pdfShading;
    }

    public static PdfShading type3(PdfWriter object, BaseColor baseColor, float[] arrf, float[] arrf2, PdfFunction pdfFunction, boolean[] arrbl) {
        object = PdfShading.type2((PdfWriter)object, baseColor, arrf, arrf2, pdfFunction, arrbl);
        object.shadingType = 3;
        object.shading.put(PdfName.SHADINGTYPE, new PdfNumber(object.shadingType));
        return object;
    }

    public void addToBody() throws IOException {
        if (this.bBox != null) {
            this.shading.put(PdfName.BBOX, new PdfArray(this.bBox));
        }
        if (this.antiAlias) {
            this.shading.put(PdfName.ANTIALIAS, PdfBoolean.PDFTRUE);
        }
        this.writer.addToBody((PdfObject)this.shading, this.getShadingReference());
    }

    public float[] getBBox() {
        return this.bBox;
    }

    ColorDetails getColorDetails() {
        return this.colorDetails;
    }

    public BaseColor getColorSpace() {
        return this.cspace;
    }

    PdfName getShadingName() {
        return this.shadingName;
    }

    PdfIndirectReference getShadingReference() {
        if (this.shadingReference == null) {
            this.shadingReference = this.writer.getPdfIndirectReference();
        }
        return this.shadingReference;
    }

    PdfWriter getWriter() {
        return this.writer;
    }

    public boolean isAntiAlias() {
        return this.antiAlias;
    }

    public void setAntiAlias(boolean bl) {
        this.antiAlias = bl;
    }

    public void setBBox(float[] arrf) {
        if (arrf.length != 4) {
            throw new IllegalArgumentException(MessageLocalization.getComposedMessage("bbox.must.be.a.4.element.array", new Object[0]));
        }
        this.bBox = arrf;
    }

    protected void setColorSpace(BaseColor object) {
        block7 : {
            this.cspace = object;
            switch (ExtendedColor.getType((BaseColor)object)) {
                default: {
                    break;
                }
                case 6: {
                    object = (DeviceNColor)object;
                    this.colorDetails = this.writer.addSimple(object.getPdfDeviceNColor());
                    object = this.colorDetails.getIndirectReference();
                    break block7;
                }
                case 4: 
                case 5: {
                    PdfShading.throwColorSpaceError();
                    break;
                }
                case 3: {
                    object = (SpotColor)object;
                    this.colorDetails = this.writer.addSimple(object.getPdfSpotColor());
                    object = this.colorDetails.getIndirectReference();
                    break block7;
                }
                case 2: {
                    object = PdfName.DEVICECMYK;
                    break block7;
                }
                case 1: {
                    object = PdfName.DEVICEGRAY;
                    break block7;
                }
            }
            object = PdfName.DEVICERGB;
        }
        this.shading.put(PdfName.COLORSPACE, (PdfObject)object);
    }

    void setName(int n) {
        StringBuilder stringBuilder = new StringBuilder();
        stringBuilder.append("Sh");
        stringBuilder.append(n);
        this.shadingName = new PdfName(stringBuilder.toString());
    }
}

