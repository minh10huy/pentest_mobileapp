/*
 * Decompiled with CFR 0_132.
 * 
 * Could not load the following classes:
 *  android.graphics.Bitmap
 *  android.graphics.Bitmap$CompressFormat
 *  android.graphics.Rect
 *  android.graphics.YuvImage
 */
package com.otaliastudios.cameraview;

import android.graphics.Bitmap;
import android.graphics.Rect;
import android.graphics.YuvImage;
import com.otaliastudios.cameraview.AspectRatio;
import com.otaliastudios.cameraview.CameraUtils;
import java.io.ByteArrayOutputStream;
import java.io.OutputStream;

class CropHelper {
    CropHelper() {
    }

    private static Rect computeCrop(int n, int n2, AspectRatio aspectRatio) {
        int n3;
        int n4;
        if (AspectRatio.of(n, n2).toFloat() > aspectRatio.toFloat()) {
            n4 = (int)((float)n2 * aspectRatio.toFloat());
            n = (n - n4) / 2;
            n3 = 0;
        } else {
            n4 = (int)((float)n / aspectRatio.toFloat());
            n3 = (n2 - n4) / 2;
            n2 = n4;
            int n5 = 0;
            n4 = n;
            n = n5;
        }
        return new Rect(n, n3, n4 + n, n2 + n3);
    }

    static byte[] cropToJpeg(YuvImage yuvImage, AspectRatio aspectRatio, int n) {
        aspectRatio = CropHelper.computeCrop(yuvImage.getWidth(), yuvImage.getHeight(), aspectRatio);
        ByteArrayOutputStream byteArrayOutputStream = new ByteArrayOutputStream();
        yuvImage.compressToJpeg((Rect)aspectRatio, n, (OutputStream)byteArrayOutputStream);
        return byteArrayOutputStream.toByteArray();
    }

    static byte[] cropToJpeg(byte[] object, AspectRatio aspectRatio, int n) {
        object = CameraUtils.decodeBitmap((byte[])object, Integer.MAX_VALUE, Integer.MAX_VALUE);
        aspectRatio = CropHelper.computeCrop(object.getWidth(), object.getHeight(), aspectRatio);
        aspectRatio = Bitmap.createBitmap((Bitmap)object, (int)aspectRatio.left, (int)aspectRatio.top, (int)aspectRatio.width(), (int)aspectRatio.height());
        object.recycle();
        object = new ByteArrayOutputStream();
        aspectRatio.compress(Bitmap.CompressFormat.JPEG, n, (OutputStream)object);
        aspectRatio.recycle();
        return object.toByteArray();
    }
}

