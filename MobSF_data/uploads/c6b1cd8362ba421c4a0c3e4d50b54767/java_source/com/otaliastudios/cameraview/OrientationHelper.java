/*
 * Decompiled with CFR 0_132.
 * 
 * Could not load the following classes:
 *  android.content.Context
 *  android.view.Display
 *  android.view.OrientationEventListener
 *  android.view.WindowManager
 */
package com.otaliastudios.cameraview;

import android.content.Context;
import android.support.annotation.NonNull;
import android.view.Display;
import android.view.OrientationEventListener;
import android.view.WindowManager;

class OrientationHelper {
    private final Callback mCallback;
    private int mDeviceOrientation = -1;
    private int mDisplayOffset = -1;
    final OrientationEventListener mListener;

    OrientationHelper(Context context, @NonNull Callback callback) {
        this.mCallback = callback;
        this.mListener = new OrientationEventListener(context, 3){

            public void onOrientationChanged(int n) {
                int n2;
                int n3 = 0;
                if (n == -1) {
                    n2 = n3;
                } else {
                    n2 = n3;
                    if (n < 315) {
                        if (n < 45) {
                            n2 = n3;
                        } else if (n >= 45 && n < 135) {
                            n2 = 90;
                        } else if (n >= 135 && n < 225) {
                            n2 = 180;
                        } else {
                            n2 = n3;
                            if (n >= 225) {
                                n2 = n3;
                                if (n < 315) {
                                    n2 = 270;
                                }
                            }
                        }
                    }
                }
                if (n2 != OrientationHelper.this.mDeviceOrientation) {
                    OrientationHelper.this.mDeviceOrientation = n2;
                    OrientationHelper.this.mCallback.onDeviceOrientationChanged(OrientationHelper.this.mDeviceOrientation);
                }
            }
        };
    }

    void disable() {
        this.mListener.disable();
        this.mDisplayOffset = -1;
        this.mDeviceOrientation = -1;
    }

    void enable(Context context) {
        switch (((WindowManager)context.getSystemService("window")).getDefaultDisplay().getRotation()) {
            default: {
                this.mDisplayOffset = 0;
                break;
            }
            case 3: {
                this.mDisplayOffset = 270;
                break;
            }
            case 2: {
                this.mDisplayOffset = 180;
                break;
            }
            case 1: {
                this.mDisplayOffset = 90;
                break;
            }
            case 0: {
                this.mDisplayOffset = 0;
            }
        }
        this.mListener.enable();
    }

    int getDeviceOrientation() {
        return this.mDeviceOrientation;
    }

    int getDisplayOffset() {
        return this.mDisplayOffset;
    }

    static interface Callback {
        public void onDeviceOrientationChanged(int var1);
    }

}

