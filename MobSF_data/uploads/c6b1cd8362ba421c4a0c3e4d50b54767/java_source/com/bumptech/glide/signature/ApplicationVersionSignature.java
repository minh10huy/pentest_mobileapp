/*
 * Decompiled with CFR 0_132.
 * 
 * Could not load the following classes:
 *  android.content.Context
 *  android.content.pm.PackageInfo
 *  android.content.pm.PackageManager
 *  android.content.pm.PackageManager$NameNotFoundException
 */
package com.bumptech.glide.signature;

import android.content.Context;
import android.content.pm.PackageInfo;
import android.content.pm.PackageManager;
import com.bumptech.glide.load.Key;
import com.bumptech.glide.signature.StringSignature;
import java.util.UUID;
import java.util.concurrent.ConcurrentHashMap;

public final class ApplicationVersionSignature {
    private static final ConcurrentHashMap<String, Key> PACKAGE_NAME_TO_KEY = new ConcurrentHashMap();

    private ApplicationVersionSignature() {
    }

    public static Key obtain(Context object) {
        Key key;
        String string2 = object.getPackageName();
        Key key2 = key = PACKAGE_NAME_TO_KEY.get(string2);
        if (key == null && (key2 = PACKAGE_NAME_TO_KEY.putIfAbsent(string2, (Key)(object = ApplicationVersionSignature.obtainVersionSignature(object)))) == null) {
            return object;
        }
        return key2;
    }

    private static Key obtainVersionSignature(Context object) {
        try {
            object = object.getPackageManager().getPackageInfo(object.getPackageName(), 0);
        }
        catch (PackageManager.NameNotFoundException nameNotFoundException) {
            nameNotFoundException.printStackTrace();
            object = null;
        }
        object = object != null ? String.valueOf(object.versionCode) : UUID.randomUUID().toString();
        return new StringSignature((String)object);
    }

    static void reset() {
        PACKAGE_NAME_TO_KEY.clear();
    }
}

